"use strict";(self.webpackChunkwaste2earn_home=self.webpackChunkwaste2earn_home||[]).push([[3663],{18951:(e,n,t)=>{t.d(n,{A:()=>l});var i=t(3481),o=t(1054),r=t(69770),s=t(37012);function l(e){var n;const t=(0,r.A)();return(0,s.jsx)(o.A,{...e,sx:{padding:"1px 3px",cursor:"pointer",borderRadius:"2px",backgroundColor:t.colors.secondaryMain,color:"#ffffff",fontSize:"12px",...null!==(n=e.sx)&&void 0!==n?n:{}},children:(0,s.jsx)(i.x6,{id:"CK1KXz"})})}},54929:(e,n,t)=>{t.r(n),t.d(n,{Pages:()=>Ce,default:()=>ze,getStateValue:()=>Ne});var i=t(3481),o=t(54711),r=t(72296),s=t(27312),l=t(77500),a=t(33441),d=t(1054),c=t(11871),x=t(27648),u=t(52593),m=t(16910);let p=function(e){return e.LIVE="LIVE",e.UPCOMING="UNSTART",e.FINISHED="FINISHED",e}({});var h=t(6),j=t(29160),g=t(4102),v=t(92213),A=t(69770),y=t(85066),k=t(12288),f=t(97070);const b=(0,r.createContext)({});var w=t(37012);function S(e){let{defaultChecked:n,onChange:t,children:i}=e;const[o,s]=(0,r.useState)([]);(0,r.useEffect)((()=>{n&&n.length&&s(n)}),[n]);return(0,w.jsx)(b.Provider,{value:{checked:o,onChange:e=>{s(e),t&&t(e)}},children:i})}function I(){return(0,w.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,w.jsx)("circle",{cx:"10",cy:"10",r:"9",stroke:"#5669DC",strokeWidth:"2"})})}function T(){return(0,w.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,w.jsx)("circle",{cx:"10",cy:"10",r:"10",fill:"#5669DC"}),(0,w.jsx)("path",{d:"M14.2 8.2L9.4 13C9 13.4 8.4 13.4 8 13L5.8 10.8C5.4 10.4 5.4 9.8 5.8 9.4C6.2 9 6.8 9 7.2 9.4L8.7 10.9L12.8 6.8C13.2 6.4 13.8 6.4 14.2 6.8C14.6 7.2 14.6 7.8 14.2 8.2Z",fill:"white"})]})}function C(e){let{value:n,radio:t}=e;const{checked:i,onChange:o}=(0,r.useContext)(b),s=i.includes(n);return(0,w.jsx)(l.A,{sx:{width:"20px",height:"20px",cursor:"pointer"},component:"span",onClick:()=>{if(t)i.includes(n)?o([]):o([n]);else if(i.includes(n)){const e=[...i];e.splice(e.indexOf(n),1),o(e)}else o([...i,n])},children:s?(0,w.jsx)(T,{}):(0,w.jsx)(I,{})})}var N=t(62474),B=t(55484),F=t(97521);function z(e){let{token:n,balance:t,name:i,border:o=!0,pool:r}=e;return(0,w.jsxs)(a.Ay,{container:!0,alignItems:"center",sx:{borderBottom:o?"1px solid #313A5A":"none",height:"64px"},children:[(0,w.jsx)(j.A,{src:null===n||void 0===n?void 0:n.logo,sx:{width:"24px",height:"24px",margin:"0 8px 0 0"},children:"\xa0"}),(0,w.jsx)(d.A,{color:"text.primary",children:(0,y.t)(t,null===n||void 0===n?void 0:n.decimals).toFormat()}),(0,w.jsx)(a.Ay,{item:!0,xs:!0,children:(0,w.jsxs)(a.Ay,{container:!0,alignItems:"center",justifyContent:"flex-end",children:[(0,w.jsx)(d.A,{color:"text.primary",sx:{margin:"0 32px 0 0"},children:i}),(0,w.jsx)(C,{value:"".concat(r,"_").concat(null===n||void 0===n?void 0:n.canisterId),radio:!0})]})})]})}function L(e){let{balance:n,end:t}=e;const{result:i}=(0,f.Vs)(n.stakingToken.address),o=i?"".concat(i.symbol):"--";return(0,w.jsx)(z,{pool:n.canisterId.toString(),token:i,balance:n.balance,name:o,border:!t})}function P(e){let{open:n,onClose:t}=e;const s=(0,A.A)(),[a,d]=(0,r.useState)([]),[x,u]=(0,r.useState)(!1),{loading:p,result:j}=(0,F.b4)(x),[y,f]=(0,B.cO)(),b=(0,r.useMemo)((()=>j?j.filter((e=>e.balance!==BigInt(0))):[]),[j]);return(0,w.jsx)(h.A,{open:n,title:o.Ru._({id:"C/nuTt"}),onClose:t,children:p?(0,w.jsxs)(c.FO,{children:[(0,w.jsx)("div",{}),(0,w.jsx)("div",{}),(0,w.jsx)("div",{}),(0,w.jsx)("div",{}),(0,w.jsx)("div",{}),(0,w.jsx)("div",{}),(0,w.jsx)("div",{}),(0,w.jsx)("div",{})]}):b.length>0?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(S,{onChange:e=>{d(e)},children:[(0,w.jsx)(l.A,{sx:{background:s.palette.background.level3,borderRadius:"12px",border:"1px solid ".concat(s.palette.background.level4),padding:"0 24px",maxHeight:"348px",overflow:"auto"},children:b.map(((e,n)=>(0,w.jsx)(L,{balance:e,end:n===b.length-1},n)))}),(0,w.jsx)(l.A,{mt:"24px",children:(0,w.jsx)(N.A,{onSubmit:async(e,n)=>{let{loading:t,closeLoading:i}=n;if(t)return;const o=y("Reclaim your tokens",B.lA.loading),r=[];for(let s=0;s<a.length;s++){const n=a[s].split("_")[0],t=b.filter((e=>e.canisterId.toString()===n))[0];if(t){t.balance!==BigInt(0)&&r.push((0,m.Dz)(n,e).then((async e=>{var n;e.status===k.i.OK?y("Withdrew ".concat(t.stakingTokenSymbol," successfully"),B.lA.success):y(null!==(n=e.message)&&void 0!==n?n:"Failed to Withdraw ".concat(t.stakingTokenSymbol),B.lA.error)})))}}await Promise.all(r),i(),f(o),u(!x)},fullScreenLoading:!0,children:e=>{let{submit:n,loading:t}=e;return(0,w.jsx)(g.A,{variant:"contained",fullWidth:!0,size:"large",disabled:!a.length||t,onClick:n,startIcon:t?(0,w.jsx)(v.A,{size:24,color:"inherit"}):null,children:(0,w.jsx)(i.x6,{id:"OsyKSt"})})}})})]})}):(0,w.jsx)(c.YQ,{})})}var D=t(12852),M=t(87851),R=t(93321),E=t(11149),_=t.n(E),V=t(87529),O=t(23603),W=t(2281),H=t(94926),G=t(27895),U=t(54316),q=t(40970),K=t(78192),Z=t(53922),Y=t(72794),X=t(50972),Q=t(86100);const $=e=>{let{startTime:n,endTime:t}=e;const o=parseInt(String(Date.now()/1e3));let r=!1,s=n;return o>t&&(r=!0),s=o<n?1e3*n:o>n&&o<t?1e3*t:0,r?(0,w.jsx)(d.A,{color:"text.primary",children:(0,w.jsx)(i.x6,{id:"xDr/ct"})}):(0,w.jsx)(U.Ay,{date:s})};function J(e){var n,t;let{pool:o,state:s,poolData:c,rewardToken:x,rewardTokenPrice:u,stakingTokenPrice:h}=e;const j=(0,A.A)(),[g,v]=r.useState(!1),{result:k}=(0,K.nC)(null===o||void 0===o?void 0:o.stakingToken.address,null===o||void 0===o?void 0:o.canisterId),f=(0,r.useMemo)((()=>!o||!k||k&&isNaN(k.toNumber())?"0":(0,y.t)(k,o.stakingTokenDecimals).multipliedBy(null!==h&&void 0!==h?h:0).toNumber()),[k,h]),{result:b}=(0,m.WE)(null===o||void 0===o?void 0:o.canisterId),S=(0,r.useMemo)((()=>x&&c?(0,y.t)(c.rewardDebt,x.decimals).toNumber():0),[null===c||void 0===c?void 0:c.rewardDebt,x]),I=(0,r.useMemo)((()=>new G.A(S).multipliedBy(null!==u&&void 0!==u?u:0).toNumber()),[S,u]),{result:T}=(0,F.tA)(null===o||void 0===o?void 0:o.canisterId,null===o||void 0===o?void 0:o.version);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(l.A,{sx:{padding:"0 0 20px 0",background:j.palette.background.level1},children:(0,w.jsx)(a.Ay,{container:!0,justifyContent:"center",onClick:()=>{v(!g)},children:(0,w.jsx)(d.A,{sx:{fontWeight:"500",fontSize:"14px",lineHeight:"24px",textAlign:"center",color:"#648EFB",cursor:"pointer"},children:g?"Hide":"Details"})})}),(0,w.jsx)(V.A,{in:g,timeout:"auto",unmountOnExit:!0,children:(0,w.jsx)(l.A,{style:{padding:"24px 24px",borderTop:"1px solid #313A5A",background:j.palette.background.level1},children:(0,w.jsxs)(l.A,{sx:{display:"grid",gap:"24px 0"},children:[(0,w.jsx)(a.Ay,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",children:(0,w.jsxs)(d.A,{sx:{cursor:"pointer"},onClick:()=>{(null===o||void 0===o?void 0:o.stakingToken.address)===H.jb.address?window.open("/swap/?input=".concat(H.Nj.address),"_target"):window.open("/swap/?input=".concat(H.Nj.address,"&output=").concat(null===o||void 0===o?void 0:o.stakingToken.address),"_target")},children:["Get ",null===o||void 0===o?void 0:o.stakingTokenSymbol,(0,w.jsx)(q.a,{fontSize:"24",sx:{position:"relative",top:"3px",cursor:"pointer",marginLeft:"5px",color:j.colors.secondaryMain}})]})}),(0,w.jsxs)(a.Ay,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:[(0,w.jsx)(a.Ay,{item:!0,children:(0,w.jsx)(d.A,{children:(0,w.jsx)(i.x6,{id:"LygggV"})})}),(0,w.jsxs)(a.Ay,{item:!0,children:[(0,w.jsxs)(d.A,{color:"text.primary",style:{textAlign:"right"},children:[(0,y.t)(null!==k&&void 0!==k?k:0,null===o||void 0===o?void 0:o.stakingTokenDecimals).toFormat()," ",null===o||void 0===o?void 0:o.stakingTokenSymbol]}),(0,w.jsxs)(d.A,{color:"text.primary",style:{textAlign:"right"},children:["~$",new G.A(null!==f&&void 0!==f?f:0).toFormat(2)]})]})]}),(0,w.jsxs)(a.Ay,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:[(0,w.jsx)(a.Ay,{item:!0,children:(0,w.jsx)(d.A,{children:(0,w.jsx)(i.x6,{id:"qmYDVk"})})}),(0,w.jsxs)(a.Ay,{item:!0,xs:!0,children:[(0,w.jsxs)(d.A,{color:"text.primary",style:{textAlign:"right"},children:[new G.A(null!==S&&void 0!==S?S:0).toFormat()," ",null===o||void 0===o?void 0:o.rewardTokenSymbol]}),(0,w.jsxs)(d.A,{color:"text.primary",style:{textAlign:"right"},children:["~$",new G.A(null!==I&&void 0!==I?I:0).toFormat(2)]})]})]}),(0,w.jsxs)(a.Ay,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:[(0,w.jsx)(a.Ay,{item:!0,children:(0,w.jsx)(d.A,{children:(0,w.jsx)(i.x6,{id:"VI4hbC"})})}),(0,w.jsx)(a.Ay,{item:!0,xs:!0,children:(0,w.jsxs)(d.A,{color:"text.primary",style:{textAlign:"right"},children:[b&&x?(0,y.t)(new G.A(b.rewardPerTime.toString()).multipliedBy(b.BONUS_MULTIPLIER.toString()),x.decimals).toFormat():"--","\xa0",null===o||void 0===o?void 0:o.rewardTokenSymbol]})})]}),(0,w.jsxs)(a.Ay,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:[(0,w.jsx)(a.Ay,{item:!0,children:(0,w.jsx)(d.A,{children:(0,w.jsx)(i.x6,{id:"wGFX13"})})}),(0,w.jsx)(a.Ay,{item:!0,children:(0,w.jsx)(d.A,{color:"text.primary",children:null!==o&&void 0!==o&&o.startTime?(0,Z.sZ)(1e3*Number(o.startTime)):"--"})})]}),(0,w.jsxs)(a.Ay,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:[(0,w.jsx)(a.Ay,{item:!0,children:(0,w.jsx)(d.A,{children:s===p.UPCOMING?(0,w.jsx)(i.x6,{id:"UlKSMd"}):(0,w.jsx)(i.x6,{id:"h8mQug"})})}),(0,w.jsx)(a.Ay,{item:!0,children:(0,w.jsx)(d.A,{color:"text.primary",children:(0,w.jsx)($,{startTime:Number(null!==(n=null===c||void 0===c?void 0:c.lastRewardTime)&&void 0!==n?n:0),endTime:Number(null!==(t=null===c||void 0===c?void 0:c.bonusEndTime)&&void 0!==t?t:0)})})})]}),(0,w.jsxs)(a.Ay,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:[(0,w.jsx)(a.Ay,{item:!0,children:(0,w.jsx)(d.A,{children:"Created by"})}),(0,w.jsx)(a.Ay,{item:!0,children:(0,w.jsx)(d.A,{color:"text.primary.main",children:(0,w.jsx)(O.A,{href:"https://icscan.io/principal/".concat(null===o||void 0===o?void 0:o.creator),target:"_blank",children:null!==o&&void 0!==o&&o.creator?(0,Y.m)(null===o||void 0===o?void 0:o.creator):"--"})})})]}),(0,w.jsxs)(a.Ay,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:[(0,w.jsx)(a.Ay,{item:!0,children:(0,w.jsx)(d.A,{children:"Canister ID"})}),(0,w.jsx)(a.Ay,{item:!0,children:(0,w.jsx)(d.A,{color:"text.primary",children:o?(0,w.jsx)(O.A,{href:(0,Q.Sp)(o.canisterId),target:"_blank",children:null!==o&&void 0!==o&&o.canisterId?(0,Y.m)(null===o||void 0===o?void 0:o.canisterId):"--"}):null})})]}),(0,w.jsxs)(a.Ay,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:[(0,w.jsx)(a.Ay,{item:!0,children:(0,w.jsx)(d.A,{children:"Cycles left"})}),(0,w.jsx)(a.Ay,{item:!0,children:(0,w.jsx)(d.A,{color:"text.primary",children:T?(0,X.rr)(T):"--"})})]}),(0,w.jsx)(a.Ay,{container:!0,direction:"row",justifyContent:"flex-end",children:(0,w.jsx)(d.A,{color:"text.primary",children:(0,w.jsx)(O.A,{href:"".concat(W.xP,"/staking-token/details/").concat(null===o||void 0===o?void 0:o.canisterId,"/").concat(null===o||void 0===o?void 0:o.version,"/").concat(s),target:"_blank",children:"Token Pools Info"})})})]})})})]})}var ee=t(57803),ne=t(16443),te=t(61361),ie=t(84076);function oe(e){let{rewardToken:n,reward:t,pool:i}=e;const[s]=(0,B.cO)(),l=(0,ne.RZ)(),[d,c]=r.useState(!1),x=!!n&&!!t&&(0,y.t)(n.transFee,n.decimals).isGreaterThan(t)||!n||!t||0===t;return(0,w.jsx)(a.Ay,{children:l?(0,w.jsx)(N.A,{onSubmit:async e=>{if(d||!i)return;c(!0);const{status:n,message:t}=await(0,F.I2)(i.canisterId,i.version,e);n===k.i.OK?s(o.Ru._({id:"NIA4X8"}),B.mh):s((0,ie.If)(t),B.XI),c(!1)},children:e=>{let{submit:n}=e;return(0,w.jsx)(g.A,{disabled:d||x,fullWidth:!0,style:{height:"42px"},variant:"contained",size:"large",color:"primary",onClick:n,startIcon:d?(0,w.jsx)(v.A,{size:20,color:"inherit"}):null,children:o.Ru._({id:"5CWj/Y"})})}}):(0,w.jsx)(te.A,{style:{whiteSpace:"nowrap"}})})}function re(e){let{pool:n,poolData:t,StakingAndClaim:o,userStakingInfo:s,rewardToken:c,stakingToken:x,rewardTokenPrice:u,stakingTokenPrice:m,state:h}=e;const j=(0,D.bt)(),g=(0,r.useMemo)((()=>{if(null!==t&&void 0!==t&&t.BONUS_MULTIPLIER&&null!==t&&void 0!==t&&t.rewardPerTime&&x&&c){const e=Number(t.BONUS_MULTIPLIER*t.rewardPerTime),n=(0,y.t)(t.totalDeposit,x.decimals).toNumber();if(j&&u&&m&&c.decimals&&e>0){const t=3600*(0,y.t)(e,c.decimals).toNumber()*24*365/n*100*new G.A(u).dividedBy(m).toNumber();return Number.isFinite(t)?t:0}}return 0}),[j,t,c,u,m,x]),v=(0,r.useMemo)((()=>{var e;return(0,y.t)(null!==(e=null===s||void 0===s?void 0:s.amount)&&void 0!==e?e:0,null===x||void 0===x?void 0:x.decimals).toNumber()}),[s,x]),A=(0,r.useMemo)((()=>new G.A(v).multipliedBy(null!==m&&void 0!==m?m:0).toNumber()),[u,v]),k=(0,r.useMemo)((()=>c&&null!==s&&void 0!==s&&s.reward?(0,y.t)(s.reward,c.decimals).toNumber():0),[s,c]),f=(0,r.useMemo)((()=>new G.A(k).multipliedBy(null!==u&&void 0!==u?u:0).toNumber()),[k,u]),b=(0,ne.RZ)();return(0,w.jsx)(l.A,{sx:{padding:"24px"},children:(0,w.jsxs)(a.Ay,{container:!0,spacing:3,children:[(0,w.jsx)(a.Ay,{item:!0,xs:12,children:(0,w.jsxs)(a.Ay,{container:!0,children:[(0,w.jsx)(a.Ay,{item:!0,xs:6,children:(0,w.jsx)(l.A,{sx:{marginBottom:"14px"},children:(0,w.jsx)(d.A,{fontSize:"14px",children:(0,w.jsx)(i.x6,{id:"WzIDXJ"})})})}),(0,w.jsx)(a.Ay,{item:!0,xs:6,children:(0,w.jsx)(a.Ay,{container:!0,justifyContent:"flex-end",children:h===p.FINISHED?"--":(0,w.jsx)(ee.Ay,{preserveValue:!0,end:g,decimals:2,duration:1,suffix:"%",separator:","})})})]})}),(0,w.jsxs)(a.Ay,{item:!0,container:!0,xs:12,direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:[(0,w.jsx)(a.Ay,{item:!0,container:!0,children:(0,w.jsx)(l.A,{sx:{marginBottom:"14px"},children:(0,w.jsx)(d.A,{fontSize:"14px",children:(0,w.jsx)(i.x6,{id:"/+Ejhb",values:{0:null===n||void 0===n?void 0:n.rewardTokenSymbol}})})})}),(0,w.jsxs)(a.Ay,{item:!0,container:!0,direction:"row",justifyContent:"space-between",alignItems:"flex-start",wrap:"nowrap",spacing:2,children:[(0,w.jsxs)(a.Ay,{item:!0,xs:9,children:[(0,w.jsx)(l.A,{children:(0,w.jsx)(ee.Ay,{style:{fontSize:24},preserveValue:!0,end:k,decimals:4,duration:1,separator:","})}),(0,w.jsx)(l.A,{children:(0,w.jsx)(ee.Ay,{style:{fontSize:14},preserveValue:!0,end:f,decimals:2,duration:1,separator:",",prefix:"~$"})})]}),(0,w.jsx)(a.Ay,{item:!0,children:(0,w.jsx)(oe,{rewardToken:c,reward:k,pool:n})})]})]}),(0,w.jsxs)(a.Ay,{item:!0,xs:12,children:[(0,w.jsx)(l.A,{sx:{marginBottom:"14px"},children:(0,w.jsx)(d.A,{fontSize:"14px",children:(0,w.jsx)(i.x6,{id:"0BZEqP"})})}),(0,w.jsx)(a.Ay,{children:(0,w.jsxs)(a.Ay,{container:!0,children:[(0,w.jsxs)(a.Ay,{item:!0,xs:6,children:[(0,w.jsx)(l.A,{children:(0,w.jsx)(ee.Ay,{style:{fontSize:24},preserveValue:!0,end:v,decimals:4,duration:1,separator:","})}),(0,w.jsx)(l.A,{children:(0,w.jsx)(ee.Ay,{style:{fontSize:14},preserveValue:!0,end:A,decimals:2,duration:1,separator:",",prefix:"~$"})})]}),(0,w.jsx)(a.Ay,{item:!0,xs:6,children:(0,w.jsx)(a.Ay,{container:!0,justifyContent:"flex-end",children:b?o:(0,w.jsx)(te.A,{})})})]})})]})]})})}var se=t(81863),le=t(27442),ae=t(18951),de=t(10086);function ce(e){var n;let{open:t,onClose:s,onStakingSuccess:x,pool:u,onStaking:m}=e;const p=(0,ne.Le)(),[h,j]=(0,r.useState)(!1),[A,k]=(0,r.useState)(void 0),{result:f}=(0,K.nC)(u.stakingToken.address,p),[,b]=(0,R.rd)(u.stakingToken.address),S=(0,y.t)(String(null!==f&&void 0!==f?f:0),null===b||void 0===b?void 0:b.decimals);let I="";A&&S&&S.isLessThan(new G.A(A))&&(I=o.Ru._({id:"znqB4T"})),A&&b&&!(0,y.t)(b.transFee,b.decimals).isLessThan(A)&&(I=o.Ru._({id:"LbdhZw"})),A&&!new G.A(A).isEqualTo(0)||(I=o.Ru._({id:"iPMIoT"})),A&&S&&b&&(0,de.bM)(b)&&!(0,y.N)(A,b.decimals).isGreaterThan(b.transFee)&&(I=o.Ru._({id:"LbdhZw"}));return(0,w.jsx)(c.aF,{open:t,onClose:s,title:o.Ru._({id:"KsqhWn"}),children:(0,w.jsxs)(a.Ay,{children:[(0,w.jsx)(c.Tv,{id:"reward",name:"reward",type:"text",style:{marginBottom:6},value:A,onChange:e=>k(e.target.value),defaultValue:A,fullWidth:!0,autoComplete:"reward",numericProps:{decimalScale:Number(null!==(n=null===b||void 0===b?void 0:b.decimals)&&void 0!==n?n:8),allowNegative:!1,thousandSeparator:!0}}),(0,w.jsxs)(a.Ay,{container:!0,alignItems:"center",sx:{margin:"10px 0"},children:[(0,w.jsxs)(d.A,{children:[(0,w.jsx)(i.x6,{id:"fsBGk0"}),": ",null===S||void 0===S?void 0:S.toFormat()," ",u.stakingTokenSymbol]}),(0,w.jsx)(ae.A,{sx:{marginLeft:"6px"},onClick:()=>{S&&b&&(S.isLessThan((0,y.t)(b.transFee,b.decimals).multipliedBy(3))?k(S.toNumber()):k(S.minus((0,y.t)(b.transFee,b.decimals).multipliedBy(3)).toNumber()))}})]}),(0,w.jsx)(l.A,{mt:2,children:(0,w.jsx)(N.A,{onSubmit:async e=>{j(!0),e&&!h&&b&&p&&A&&(await m({identity:e,token:b,amount:(0,le.u)((0,y.N)(A,b.decimals)),id:u.canisterId}),j(!1),x&&x(),s&&s())},children:e=>{let{submit:n}=e;return(0,w.jsx)(g.A,{disabled:h||!new G.A(String(S)).toNumber()||!!I,variant:"contained",fullWidth:!0,onClick:n,size:"large",startIcon:h?(0,w.jsx)(v.A,{size:22,color:"inherit"}):null,children:I||o.Ru._({id:"7VpPHA"})})}})})]})})}function xe(e){let{open:n,onClose:t,onStakingSuccess:i,pool:o}=e;const r=(0,ne.Le)(),s=(0,F.gY)(),[l,a]=(0,B.VS)();return o?(0,w.jsx)(ce,{open:n,onClose:t,onStakingSuccess:i,onStaking:async e=>{let{identity:n,amount:t,token:i}=e;if(!n||!i||!r||!t||!o)return;const{call:d,key:x}=s({token:i,amount:t,poolId:o.canisterId}),u=l("Staking ".concat(i.symbol),{extraContent:(0,w.jsx)(c.eR,{step:x})});await d(),a(u)},pool:o}):null}var ue=t(65593),me=t(68703);function pe(e){let{open:n,onClose:t,onStakingSuccess:i,pool:o}=e;const[r]=(0,B.cO)(),s=(0,ne.Le)(),l=(0,me.z)();return o?(0,w.jsx)(ce,{open:n,onClose:t,onStakingSuccess:i,pool:o,onStaking:async e=>{let{identity:n,amount:a}=e;if(!o)return;const{status:d,message:c}=await l({canisterId:o.stakingToken.address,spender:o.canisterId,value:BigInt(a),account:s});if("ok"===d){const{status:e,message:s}=await(0,ue.eB)(o.canisterId,n,BigInt(a));r((0,ie.If)(s),e),i&&i(),t&&t()}else r((0,ie.If)(c),B.lA.error)}}):null}function he(e){var n;let{open:t,onClose:s,pool:x,onStakingSuccess:u}=e;const m=(0,D.F7)(),[p]=(0,B.cO)(),[h]=(0,F.Gc)(x.canisterId,x.version,m),j=(0,r.useMemo)((()=>null===h||void 0===h?void 0:h.amount),[h]),[A,k]=(0,r.useState)(!1),[b,S]=(0,r.useState)(void 0),{result:I}=(0,f.Vs)(x.rewardToken.address);let T="";b&&(0,y.N)(b,null===I||void 0===I?void 0:I.decimals).isGreaterThan(new G.A(String(null!==j&&void 0!==j?j:0)))&&(T=o.Ru._({id:"znqB4T"})),b&&!new G.A(b).isEqualTo(0)||(T=o.Ru._({id:"iPMIoT"}));const C=(0,y.t)(String(null!==j&&void 0!==j?j:0),null===I||void 0===I?void 0:I.decimals);return(0,w.jsx)(c.aF,{open:t,onClose:s,title:o.Ru._({id:"OsyKSt"}),children:(0,w.jsxs)(a.Ay,{children:[(0,w.jsx)(c.Tv,{id:"reward",name:"reward",type:"text",style:{marginBottom:6},value:b,onChange:e=>S(e.target.value),fullWidth:!0,autoComplete:"reward",numericProps:{decimalScale:Number(null!==(n=null===I||void 0===I?void 0:I.decimals)&&void 0!==n?n:8),allowNegative:!1,thousandSeparator:!0}}),(0,w.jsxs)(a.Ay,{container:!0,alignItems:"center",sx:{margin:"10px 0"},children:[(0,w.jsxs)(d.A,{children:[(0,w.jsx)(i.x6,{id:"q6lAbz"}),": ",C.toFormat()," ",x.stakingTokenSymbol]}),(0,w.jsx)(ae.A,{sx:{marginLeft:"6px"},onClick:()=>{C&&S(C.toNumber())}})]}),(0,w.jsx)(l.A,{mt:2,children:(0,w.jsx)(N.A,{onSubmit:async e=>{if(A||!b||!I)return;k(!0);const{status:n,message:t}=await(0,F.ne)(x.canisterId,BigInt((0,y.N)(b,null===I||void 0===I?void 0:I.decimals).toString()),x.version,e);p((0,ie.If)(t),n),u&&u(),s&&s(),k(!1)},children:e=>{let{submit:n}=e;return(0,w.jsx)(g.A,{disabled:A||!Number(null!==j&&void 0!==j?j:0)||!!T,variant:"contained",fullWidth:!0,type:"button",onClick:n,color:"primary",size:"large",startIcon:A?(0,w.jsx)(v.A,{size:22,color:"inherit"}):null,children:T||o.Ru._({id:"7VpPHA"})})}})})]})})}const je=(0,se.A)((e=>({button:{minWidth:"28px",width:"28px",height:"28px",lineHeight:"100%",background:"#29314F",borderRadius:"8px",fontSize:"28px",fontWeight:"normal",color:"dark"===e.palette.mode?e.colors.darkTextSecondary:e.colors.lightPrimaryMain,"&.Mui-disabled":{color:"#666"}}})));function ge(e){var n;let{pool:t,userStakingInfo:i,onStakingSuccess:o,state:s}=e;const[l,d]=r.useState(!1),[c,x]=r.useState("Deposit"),u=je();return(0,w.jsxs)(a.Ay,{container:!0,direction:"row",spacing:3,justifyContent:"flex-end",children:[(0,w.jsx)(a.Ay,{item:!0,children:(0,w.jsx)(g.A,{disabled:!new G.A(Number(null!==(n=null===i||void 0===i?void 0:i.amount)&&void 0!==n?n:0)).isGreaterThan(0),className:u.button,onClick:()=>{x("Withdraw"),d(!0)},children:"-"})}),(0,w.jsx)(a.Ay,{item:!0,children:(0,w.jsx)(g.A,{disabled:s!==p.LIVE,className:u.button,onClick:()=>{x("Deposit"),d(!0)},children:"+"})}),l&&("Deposit"===c?"1.0"===(null===t||void 0===t?void 0:t.version)?(0,w.jsx)(pe,{open:l,onClose:()=>d(!1),onStakingSuccess:o,pool:t}):(0,w.jsx)(xe,{open:l,onClose:()=>d(!1),onStakingSuccess:o,pool:t}):t?(0,w.jsx)(he,{open:l,onClose:()=>d(!1),onStakingSuccess:o,pool:t}):null)]})}var ve=t(82294);function Ae(e){let{pool:n,rewardToken:t,state:i,stakingToken:o}=e;const r=(0,A.A)();return(0,w.jsxs)(l.A,{sx:{height:"196px",background:"rgba(101, 80, 186, 0.18)",borderRadius:"4px 4px 0 0"},children:[(0,w.jsx)(d.A,{fontSize:"14px",sx:{display:"inline-block",minWidth:"77px",height:"30px",padding:"6px",background:"#654DA9",borderRadius:"4px 0 4px 0",textAlign:"center",border:"1px solid #654DA9",color:"dark"===r.palette.mode?r.colors.darkTextPrimary:r.colors.primaryMain},component:"span",children:_()(i.toLocaleLowerCase())}),(0,w.jsx)(l.A,{sx:{margin:"23px 0 26px 0",display:"flex",justifyContent:"center"},children:(0,w.jsxs)(l.A,{sx:{width:"85px",height:"85px",position:"relative"},children:[(0,w.jsx)(ve.H,{logo:null===t||void 0===t?void 0:t.logo,size:"85px"}),(0,w.jsx)(l.A,{sx:{width:"44px",height:"44px",position:"absolute",bottom:"-10px",right:"-3px",zIndex:"2"},children:(0,w.jsx)(ve.H,{logo:null===o||void 0===o?void 0:o.logo,size:"44px"})})]})}),(0,w.jsxs)(d.A,{color:"text.primary",align:"center",children:["Stake ",null===n||void 0===n?void 0:n.stakingTokenSymbol," to earn ",null===n||void 0===n?void 0:n.rewardTokenSymbol]})]})}function ye(e){let{stakedOnly:n,pool:t,state:i}=e;const o=(0,D.F7)(),s=(0,A.A)(),[a,d]=(0,F.dV)(null===t||void 0===t?void 0:t.canisterId,null===t||void 0===t?void 0:t.version),[c,x]=(0,F.Gc)(null===t||void 0===t?void 0:t.canisterId,null===t||void 0===t?void 0:t.version,o),[,u]=(0,R.rd)(null===t||void 0===t?void 0:t.rewardToken.address),[,m]=(0,R.rd)(null===t||void 0===t?void 0:t.stakingToken.address),p=(0,M.vb)(u),h=(0,M.vb)(m);(0,r.useEffect)((()=>{let e=window.setInterval((()=>{x(),d()}),5e3);return()=>{window.clearInterval(e),e=void 0}}),[]);return(0,w.jsxs)(l.A,{sx:{width:"384px",borderRadius:"12px",overflow:"hidden",height:"fit-content",display:n?null!==c&&void 0!==c&&c.amount?"block":"none":"block","@media (max-width: 520px)":{width:"340px"}},className:"staking-token-pool-item",children:[(0,w.jsxs)(l.A,{sx:{background:s.palette.background.level1},children:[(0,w.jsx)(Ae,{state:i,pool:t,rewardToken:u,stakingToken:m}),(0,w.jsx)(re,{state:i,pool:t,poolData:a,rewardToken:u,stakingToken:m,stakingTokenPrice:h,rewardTokenPrice:p,userStakingInfo:c,StakingAndClaim:(0,w.jsx)(ge,{userStakingInfo:c,onStakingSuccess:()=>{null!==t&&void 0!==t&&t.canisterId&&x()},pool:t,state:i})})]}),(0,w.jsx)(J,{pool:t,state:i,poolData:a,rewardToken:u,stakingToken:m,stakingTokenPrice:h,rewardTokenPrice:p})]})}var ke=t(67909),fe=t(87892);const be=t.p+"static/media/2.0c6cdd5bbe79e6f091ec.png";var we=t(41606),Se=t(66354);const Ie=(0,se.A)((()=>({item:{height:"145px",background:"rgba(80, 95, 186, 0.34)",border:"1px solid rgba(255, 255, 255, 0.04)",borderRadius:"12px",padding:"29px 25px","&.tvl":{background:"url(".concat(fe,") no-repeat center / cover")},"&.transactions":{background:"url(".concat(be,") no-repeat center / cover")},"&.reward":{background:"url(".concat(we,") no-repeat center / cover")}},itemTitle:{paddingBottom:"18px"}})));function Te(){var e,n;const t=(0,D.bt)(),o=Ie(),[s,c]=(0,F.CZ)();return(0,r.useEffect)((()=>{let e=window.setInterval((()=>{c()}),5e3);return()=>{null!==e&&clearInterval(e),e=void 0}}),[]),(0,w.jsx)(l.A,{children:(0,w.jsxs)(a.Ay,{container:!0,spacing:ke.i,children:[(0,w.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,w.jsxs)(a.Ay,{container:!0,className:"tvl ".concat(o.item),direction:"column",justifyContent:"center",children:[(0,w.jsx)(a.Ay,{item:!0,className:o.itemTitle,children:(0,w.jsx)(a.Ay,{container:!0,children:(0,w.jsx)(d.A,{color:"text.primary",fontSize:"14px",children:(0,w.jsx)(i.x6,{id:"FHKsZF"})})})}),(0,w.jsx)(a.Ay,{item:!0,children:(0,w.jsx)(d.A,{color:"text.primary",fontSize:"24px",children:(0,Se.o)(new G.A(null!==(e=null===s||void 0===s?void 0:s.stakingAmount)&&void 0!==e?e:0).times(null!==t&&void 0!==t?t:0).toNumber())})})]})}),(0,w.jsx)(a.Ay,{item:!0,xs:12,md:6,children:(0,w.jsxs)(a.Ay,{container:!0,className:"".concat(o.item," reward"),direction:"column",justifyContent:"center",children:[(0,w.jsx)(a.Ay,{item:!0,className:o.itemTitle,children:(0,w.jsx)(a.Ay,{container:!0,children:(0,w.jsx)(d.A,{color:"text.primary",fontSize:"14px",sx:{display:"inline-block"},children:(0,w.jsx)(i.x6,{id:"yjgCmG"})})})}),(0,w.jsx)(a.Ay,{item:!0,children:(0,w.jsx)(d.A,{color:"text.primary",fontSize:"24px",children:(0,Se.o)(new G.A(null!==(n=null===s||void 0===s?void 0:s.rewardAmount)&&void 0!==n?n:0).times(null!==t&&void 0!==t?t:0).toNumber())})})]})})]})})}const Ce=[{key:p.LIVE,name:o.Ru._({id:"dF6vP6"})},{key:p.UPCOMING,name:o.Ru._({id:"sxqNNh"})},{key:p.FINISHED,name:o.Ru._({id:"4dQFvz"})}],Ne=e=>{switch(e){case p.LIVE:return BigInt(2);case p.UPCOMING:return BigInt(1);case p.FINISHED:return BigInt(3);default:return}};function Be(){const{poolId:e}=(0,u.e)(),{result:n}=(0,m.V3)(e),t=function(e){if(!e)return p.LIVE;const n=BigInt((new Date).getTime()),t=e.bonusEndTime*BigInt(1e3);return n<e.startTime*BigInt(1e3)?p.UPCOMING:n>t?p.FINISHED:p.LIVE}(n);return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(c.Am,{children:(0,w.jsx)(l.A,{sx:{position:"relative",minHeight:"440px"},children:(0,w.jsx)(l.A,{sx:{display:"grid",justifyContent:"center"},children:(0,w.jsx)(ye,{stakedOnly:!1,pool:n,state:t})})})})})}function Fe(){const e=(0,s.W6)(),{filter:n}=(0,u.e)(),t=(0,r.useMemo)((()=>null!==n&&void 0!==n?n:p.LIVE),[n]),o=(0,r.useMemo)((()=>Ne(null!==t&&void 0!==t?t:p.LIVE)),[t]),{result:h,loading:j}=(0,m.X5)(o,0,100),g=(0,r.useMemo)((()=>{if(null!==h&&void 0!==h&&h.content)return t&&t===p.FINISHED?null===h||void 0===h?void 0:h.content.sort(((e,n)=>e.stakingTokenSymbol<n.stakingTokenSymbol?-1:e.stakingTokenSymbol>n.stakingTokenSymbol?1:0)):null===h||void 0===h?void 0:h.content}),[h,t]),[v,A]=r.useState(!1),[y,k]=r.useState(!1),[f,b]=(0,r.useState)(!1);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(c.Am,{children:[(0,w.jsxs)(a.Ay,{container:!0,direction:"row",children:[(0,w.jsx)(a.Ay,{item:!0,children:(0,w.jsx)(l.A,{sx:{display:"flex",gap:"0 20px"},children:Ce.map((n=>(0,w.jsx)(d.A,{variant:"h3",color:t===n.key?"textPrimary":"textTertiary",sx:{cursor:"pointer",textTransform:"capitalize","@media (max-width:640px)":{fontSize:"16px"}},onClick:()=>{return t=n,void e.push("/staking-token?filter=".concat(t.key));var t},children:n.name},n.key)))})}),(0,w.jsx)(a.Ay,{item:!0,alignItems:"center",style:{marginLeft:"auto"},children:(0,w.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",gap:"0 10px"},children:[(0,w.jsx)(c.QW,{onClick:()=>{b(!0)},children:(0,w.jsx)(i.x6,{id:"JB77+l"})}),(0,w.jsx)(d.A,{component:"span",children:(0,w.jsx)(i.x6,{id:"ekrRCK"})}),(0,w.jsx)(x.A,{checked:v,onChange:e=>(e=>{if(A(e),e){const e=document.querySelectorAll(".staking-token-pool-item");let n=!0;setTimeout((()=>{e.forEach((e=>{-1!==e.classList.toString().indexOf("block")&&(n=!1)})),k(n)}),50)}else null!==g&&void 0!==g&&g.length?k(!1):k(!0)})(e.target.checked)})]})})]}),(0,w.jsxs)(l.A,{sx:{position:"relative",minHeight:"440px",margin:"20px 0 0 0"},children:[j?null:(0,w.jsx)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:"24px 24px",justifyContent:"center"},children:null===g||void 0===g?void 0:g.map(((e,n)=>(0,w.jsx)(ye,{stakedOnly:v,pool:e,state:t},"".concat(e.canisterId,"-").concat(n))))}),(y||!(null!==g&&void 0!==g&&g.length))&&!j&&(0,w.jsx)(c.YQ,{}),j?(0,w.jsx)(c.DN,{loading:!0}):null]})]}),f?(0,w.jsx)(P,{open:f,onClose:()=>b(!1)}):null]})}function ze(){const{poolId:e}=(0,u.e)();return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(Te,{}),(0,w.jsx)(l.A,{mt:"16px",children:e?(0,w.jsx)(Be,{}):(0,w.jsx)(Fe,{})})]})}},53922:(e,n,t)=>{t.d(n,{St:()=>s,sZ:()=>l,yG:()=>r});var i=t(94570),o=t.n(i);function r(e){return Number(BigInt(e)/BigInt(1e6))}function s(e){return Number(BigInt(e)*BigInt(1e6))}function l(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";if(!e)return"";const t=Number(String(e).substr(0,13));return o()(t).format(n)}},87892:(e,n,t)=>{e.exports=t.p+"static/media/1.28c4a546daaba6b79f81.png"},41606:(e,n,t)=>{e.exports=t.p+"static/media/3.559ea8cfedc425025a4f.png"}}]);
//# sourceMappingURL=3663.b3c92461.chunk.js.map