"use strict";(self.webpackChunkwaste2earn_home=self.webpackChunkwaste2earn_home||[]).push([[1879],{65790:(n,t,e)=>{e.d(t,{YG:()=>r});var i=e(72296),o=e(34947),a=e(78361);function r(){const n=(0,o.DA)();return(0,i.useCallback)((async(t,e)=>{if(!(0,o.bJ)(e)){const i=await(0,a.no)(t,e);n({canisterId:e,standard:i})}}),[])}},28918:(n,t,e)=>{e.d(t,{Q2:()=>c,S:()=>u,Xc:()=>s});var i=e(32895),o=e(27442),a=e(72296),r=e(75918);let u=function(n){return n.LOADING="LOADING",n.NOT_EXISTS="NOT_EXISTS",n.EXISTS="EXISTS",n.INVALID="INVALID",n}({});function l(n,t){const[e,l]=(0,a.useState)([]),[c,s]=(0,a.useState)(!1),d=(0,a.useMemo)((()=>n.map((n=>{let[t,e,i]=n;if(!t||!e||!i)return null;const o=null===t||void 0===t?void 0:t.wrapped,a=null===e||void 0===e?void 0:e.wrapped;if(!o||!a||o.equals(a))return null;const[r,u]=o.sortsBefore(a)?[o,a]:[a,o];return"".concat(r.address,"_").concat(u.address,"_").concat(i)}))),[n]);return(0,a.useEffect)((()=>{d&&d.length&&!d.includes(null)&&(s(!0),Promise.all(d.map((async n=>{if(!n)return;let e="";e="v1"===t?await(await(0,r.h2)()).getPool(n):await(await(0,r.qy)()).getPool(n);let i=null;return e&&(i=await(await(0,r.WY)(e)).infoWithNoBalance()),{address:e,info:i,ticks:[]}}))).then((n=>{l(n.filter((n=>!!n))),s(!1)})))}),[d]),(0,a.useMemo)((()=>d.map(((t,a)=>{if(!t)return[u.INVALID,null];if(c)return[u.LOADING,null];const r=e[a],{info:l,address:s}=null!==r&&void 0!==r?r:{};if(!l||null===l||void 0===l||!l.token0||null===l||void 0===l||!l.token1||null===l||void 0===l||!l.fee)return[u.NOT_EXISTS,null];try{const{fee:t,sqrtRatioX96:e,liquidity:r,tickCurrent:c}=l,[d,f]=n[a];return d&&f?[u.EXISTS,new i.b(s,d.wrapped,f.wrapped,Number(t),(0,o.u)(e),(0,o.u)(r),Number(c))]:[u.NOT_EXISTS,null]}catch(d){return console.error("Error when constructing the pool",d),[u.NOT_EXISTS,null]}}))),[e,c,n,d])}function c(n,t,e){return l((0,a.useMemo)((()=>[[n,t,e]]),[n,t,e]))[0]}function s(n,t,e){return l((0,a.useMemo)((()=>[[n,t,e]]),[n,t,e]),"v1")[0]}},78361:(n,t,e)=>{e.d(t,{A3:()=>k,D$:()=>_,EV:()=>y,F6:()=>w,Jl:()=>f,MA:()=>d,PC:()=>R,PI:()=>v,Ul:()=>g,Xx:()=>m,lF:()=>C,mX:()=>b,no:()=>c,od:()=>p});var i=e(72296),o=e(75918),a=e(20361),r=e(59155),u=e(67126),l=e(12852);async function c(n,t){return await(await(0,o.WY)(n)).getStandard(t)}function s(){const n=(0,i.useCallback)((async()=>await async function(){return await(await(0,o.qy)()).getPoolIds()}()),[]);return(0,u.Q)(n,"usePoolIds",!0,!1,!0)}function d(){const{result:n,loading:t}=s(),[e,a]=(0,i.useState)([]),[r,u]=(0,i.useState)(!0);return(0,i.useEffect)((()=>{const t=[];let e=0;const i=async i=>{const r=await async function(n){return await(await(0,o.WY)(n)).infoWithNoBalance()}(i).catch((n=>(console.error(n),null)));r?t.push(r):e++,n&&t.length===n.length-e&&(a(t),u(!1))};if(n&&n.length>0){u(!0);for(let t=0;t<n.length;t++)i(n[t])}}),[n]),(0,i.useMemo)((()=>({loading:t||r,pools:e})),[r,e])}function f(n,t){return(0,r.Pz)((0,i.useCallback)((async()=>{let e;return e=t?(0,a.Pk)(await(await(0,o.iq)()).invalidPositions(BigInt(n))).data:(0,a.Pk)(await(await(0,o.iq)()).positions(BigInt(n))).data,e}),[n]))}async function R(n,t){return(0,a.Pk)(await(await(0,o.iq)(n)).increaseLiquidity(t))}async function v(n,t){return(0,a.Pk)(await(await(0,o.iq)(n)).decreaseLiquidity(t))}async function m(n,t,e,i,r,u,l,c,s,d,f,R){return(0,a.Pk)(await(await(0,o.iq)(n)).mint({token0:t,token1:e,fee:i,tickLower:r,tickUpper:u,amount0Desired:l,amount1Desired:c,amount0Min:s,amount1Min:d,recipient:f,deadline:R}))}function _(){const n=(0,l.F7)();return(0,r.Pz)((0,i.useCallback)((async()=>n?(0,a.Pk)(await(await(0,o.iq)()).ownerTokens(n)).data:[]),[n]))}function p(){const n=(0,l.F7)();return(0,r.Pz)((0,i.useCallback)((async()=>n?(0,a.Pk)(await(await(0,o.Rm)()).ownerTokens(n)).data:[]),[n]))}function C(n){return(0,i.useCallback)((async(t,e)=>n?(0,a.Pk)(await(await(0,o.iq)(t)).collectInInvalidPosition(e)):(0,a.Pk)(await(await(0,o.iq)(t)).collect(e))),[n])}function b(n,t,e){return(0,r.Pz)((0,i.useCallback)((async()=>{if(!n)return;let e;return e=t?(0,a.Pk)(await(await(0,o.iq)()).refreshInvalidIncome(BigInt(n))).data:(0,a.Pk)(await(await(0,o.iq)()).refreshIncome(BigInt(n))).data,e}),[n,t]),e)}async function w(n){const t=(0,a.Pk)(await(await(0,o.iq)()).tokenURI(BigInt(n))).data,e=JSON.parse(null!==t&&void 0!==t?t:'""');return e?e.image:""}function k(){return(0,r.Pz)((0,i.useCallback)((async()=>(0,a.Pk)(await(await(0,o.K)()).getAllPools([])).data),[]))}async function y(n,t){return(0,a.Pk)(await(await(0,o.iq)(n)).decreaseLiquidityInInvalidPosition(t))}async function g(n,t){return(0,a.Pk)(await(await(0,o.Rm)(n)).decreaseLiquidity(t))}},31879:(n,t,e)=>{e.d(t,{R8:()=>M,Gm:()=>Y,Vs:()=>B,XV:()=>A,xh:()=>O,Wk:()=>T,Lx:()=>L,si:()=>h});var i=e(54711),o=e(72296),a=e(60816),r=e(29277),u=e(20361),l=e(43561),c=e(28916),s=e(89362),d=e(91669),f=e(32895),R=e(16457),v=e(91577),m=e(87916),_=e(86473),p=e(69831),C=e(70536),b=e(97704),w=e(64173),k=e(28918),y=e(86100),g=e(78361),E=e(75918),P=e(78192),U=e(49682),I=e(16443),N=e(65790);const S=["ew2hr-oaaaa-aaaan-qcycq-cai","m4mib-siaaa-aaaan-qaucq-cai","4ch4l-viaaa-aaaan-qa3bq-cai","uldch-7yaaa-aaaan-qa2wq-cai","2d2yc-biaaa-aaaan-qa4ka-cai"];var q=e(19806);function h(){const[n,t]=(0,o.useState)(!0),e=(0,N.YG)(),{result:i}=(0,g.od)(),[a,r]=(0,o.useState)([]);return(0,o.useEffect)((()=>{if(t(!0),i&&i.length>0){const n=[];let o=0;function a(){if(o===(null===i||void 0===i?void 0:i.length)){const e=[];n.forEach(((n,t)=>{n&&e.push({...n,id:i[t]})})),r(e),t(!1)}}i.forEach((async(t,i)=>{(await(0,E.Rm)()).positions(t).then((async t=>{const r=(0,u.Pk)(t).data;if(r){const n=await(await(0,E.h2)()).getPool("".concat(null===r||void 0===r?void 0:r.token0,"_").concat(null===r||void 0===r?void 0:r.token1,"_").concat(String(null===r||void 0===r?void 0:r.fee)));await e(n,r.token0),await e(n,r.token1)}n[i]=r,o++,a()})).catch((t=>{o++,a(),n[i]=void 0,console.error(t)}))}))}else t(!1),r([])}),[i,t]),(0,o.useMemo)((()=>({loading:n,result:a})),[n,a])}function A(){const n=(0,a.jL)(),[t,e]=(0,o.useState)(!0),i=(0,N.YG)(),{result:r}=(0,g.D$)();return(0,o.useEffect)((()=>{if(e(!0),r&&r.length>0){const t=[];let o=0;function a(){if(o===(null===r||void 0===r?void 0:r.length)){const i=[];t.forEach(((n,t)=>{n&&i.push({...n,id:r[t]})})),n((0,q.Lx)(i)),e(!1)}}r.forEach((async(n,e)=>{(await(0,E.iq)()).positions(n).then((async n=>{const r=(0,u.Pk)(n).data;if(r){const n=await(await(0,E.qy)()).getPool("".concat(null===r||void 0===r?void 0:r.token0,"_").concat(null===r||void 0===r?void 0:r.token1,"_").concat(String(null===r||void 0===r?void 0:r.fee)));await i(n,r.token0),await i(n,r.token1)}t[e]=r,o++,a()})).catch((n=>{o++,a(),t[e]=void 0,console.error(n)}))}))}else e(!1),n((0,q.Lx)([]))}),[n,r,e]),t}function L(){return(0,a.GV)((n=>n.swapV2Liquidity.userPositions))}function B(){return(0,a.GV)((n=>n.swapV2Liquidity))}function T(){const n=(0,a.jL)();return(0,o.useCallback)((()=>{n((0,q.JE)())}),[n])}function Y(n,t,e,a,u,p){var g,E,N;const{independentField:q,typedValue:h,leftRangeValue:A,rightRangeValue:L,startPrice:T}=B(),Y=q===r.b_.CURRENCY_A?r.b_.CURRENCY_B:r.b_.CURRENCY_A,[M,O,D]=(0,o.useMemo)((()=>[null===n||void 0===n?void 0:n.wrapped,null===t||void 0===t?void 0:t.wrapped,null===a||void 0===a?void 0:a.wrapped]),[n,t,a]),z=(0,o.useMemo)((()=>({[r.b_.CURRENCY_A]:n,[r.b_.CURRENCY_B]:t})),[n,t]),[V,W]=(0,o.useMemo)((()=>M&&O?M.sortsBefore(O)?[M,O]:[O,M]:[void 0,void 0]),[M,O]),X=(0,I.Le)(),{result:F}=(0,P.rL)(X,M),{result:G}=(0,P.rL)(X,O),x={[r.b_.CURRENCY_A]:F,[r.b_.CURRENCY_B]:G},[Q,K]=(0,k.Q2)(z[r.b_.CURRENCY_A],z[r.b_.CURRENCY_B],e),j=Q===k.S.NOT_EXISTS,J=Q===k.S.LOADING,$=Boolean(D&&V&&!D.equals(V)),H=(0,o.useMemo)((()=>{if(!j)return K&&V?K.priceOf(V):void 0;{const t=(0,b.lI)(T||"0.1",$?V:W);if(t&&V&&W){var n;const e=(0,b.lI)("1",$?W:V),i=e&&t?new l.g(e.currency,t.currency,e.quotient,t.quotient):void 0;return null!==(n=$?null===i||void 0===i?void 0:i.invert():i)&&void 0!==n?n:void 0}}}),[j,T,$,W,V,K]),Z=(0,o.useMemo)((()=>{const n=H?(0,c.r)(H.numerator,H.denominator):void 0;return H&&n&&!(y.xB.greaterThanOrEqual(n,s.g.MIN_SQRT_RATIO)&&y.xB.lessThan(n,s.g.MAX_SQRT_RATIO))}),[H]),nn=(0,o.useMemo)((()=>{if(M&&O&&e&&H&&!Z){const n=(0,d.d)(H),t=s.g.getSqrtRatioAtTick(n);return new f.b("",M,O,e,t,y.xB.BigInt(0),n,[])}}),[e,Z,H,M,O]),tn=null!==K&&void 0!==K?K:nn,en=(0,o.useMemo)((()=>({[r.zm.LOWER]:e?(0,R.Y)(s.g.MIN_TICK,v.D6[e]):void 0,[r.zm.UPPER]:e?(0,R.Y)(s.g.MAX_TICK,v.D6[e]):void 0})),[e]),on=(0,o.useMemo)((()=>({[r.zm.LOWER]:"number"===typeof(null===u||void 0===u?void 0:u.tickLower)?u.tickLower:$&&"boolean"===typeof L||!$&&"boolean"===typeof A?en[r.zm.LOWER]:$?(0,C.W)(W,V,e,L.toString()):(0,C.W)(V,W,e,A.toString()),[r.zm.UPPER]:"number"===typeof(null===u||void 0===u?void 0:u.tickUpper)?u.tickUpper:!$&&"boolean"===typeof L||$&&"boolean"===typeof A?en[r.zm.UPPER]:$?(0,C.W)(W,V,e,A.toString()):(0,C.W)(V,W,e,L.toString())})),[u,e,$,A,L,V,W,en]),{[r.zm.LOWER]:an,[r.zm.UPPER]:rn}=on||{},un=(0,o.useMemo)((()=>({[r.zm.LOWER]:e&&an===en.LOWER,[r.zm.UPPER]:e&&rn===en.UPPER})),[en,an,rn,e]),ln=(0,o.useMemo)((()=>p?{[r.zm.LOWER]:!!un[r.zm.UPPER]||void 0,[r.zm.UPPER]:!!un[r.zm.LOWER]||void 0}:un),[un,p]),cn=Boolean("number"===typeof an&&"number"===typeof rn&&an>=rn),sn=(0,o.useMemo)((()=>({[r.zm.LOWER]:(0,w.M)(V,W,on[r.zm.LOWER]),[r.zm.UPPER]:(0,w.M)(V,W,on[r.zm.UPPER])})),[V,W,on]),{[r.zm.LOWER]:dn,[r.zm.UPPER]:fn}=sn,Rn=Boolean(!cn&&H&&dn&&fn&&(H.lessThan(dn)||H.greaterThan(fn))),vn=(0,b.lI)(h,z[q]),mn=(0,o.useMemo)((()=>{const e=null===vn||void 0===vn?void 0:vn.wrapped,i=Y===r.b_.CURRENCY_B?t:n;if(vn&&e&&"number"===typeof an&&"number"===typeof rn&&tn){if(Rn||cn)return;const n=e.currency.equals(tn.token0)?m.y.fromAmount0({pool:tn,tickLower:an,tickUpper:rn,amount0:vn.quotient,useFullPrecision:!0}):m.y.fromAmount1({pool:tn,tickLower:an,tickUpper:rn,amount1:vn.quotient}),t=e.currency.equals(tn.token0)?n.amount1:n.amount0;return i&&_.e.fromRawAmount(i,t.quotient)}}),[vn,Rn,Y,t,n,an,rn,tn,cn]),_n=(0,o.useMemo)((()=>({[r.b_.CURRENCY_A]:q===r.b_.CURRENCY_A?vn:mn,[r.b_.CURRENCY_B]:q===r.b_.CURRENCY_A?mn:vn})),[mn,vn,q]),pn=Boolean("number"===typeof rn&&tn&&tn.tickCurrent>=rn),Cn=Boolean("number"===typeof an&&tn&&tn.tickCurrent<=an),bn=cn||Boolean(pn&&tn&&M&&tn.token0.equals(M)||Cn&&tn&&M&&tn.token1.equals(M)),wn=cn||Boolean(pn&&tn&&O&&tn.token0.equals(O)||Cn&&tn&&O&&tn.token1.equals(O)),kn=(0,o.useMemo)((()=>{var n,t;if(!tn||!M||!O||"number"!==typeof an||"number"!==typeof rn||cn)return;const e=pn?r.CL:null===_n||void 0===_n||null===(n=_n[M.equals(tn.token0)?r.b_.CURRENCY_A:r.b_.CURRENCY_B])||void 0===n?void 0:n.quotient,i=Cn?r.CL:null===_n||void 0===_n||null===(t=_n[M.equals(tn.token0)?r.b_.CURRENCY_B:r.b_.CURRENCY_A])||void 0===t?void 0:t.quotient;return void 0!==e&&void 0!==i?m.y.fromAmounts({pool:tn,tickLower:an,tickUpper:rn,amount0:e,amount1:i,useFullPrecision:!0}):void 0}),[_n,tn,M,O,pn,Cn,cn,an,rn]),yn=[r.b_.CURRENCY_A,r.b_.CURRENCY_B].reduce(((n,t)=>({...n,[t]:(0,U.r)(x[t])})),{}),gn=[r.b_.CURRENCY_A,r.b_.CURRENCY_B].reduce(((n,t)=>{var e,i;return{...n,[t]:null===(e=yn[t])||void 0===e?void 0:e.equalTo(null!==(i=_n[t])&&void 0!==i?i:"0")}}),{});let En;var Pn,Un,In,Nn;Q===k.S.INVALID&&(En=null!==(Pn=En)&&void 0!==Pn?Pn:i.Ru._({id:"R7D79P"}));(j&&(En=i.Ru._({id:"eud8y4"})),Z)&&(En=null!==(Un=En)&&void 0!==Un?Un:i.Ru._({id:"HXBqgG"}));cn&&(En=null!==(In=En)&&void 0!==In?In:i.Ru._({id:"4fr6Aw"}));(_n[r.b_.CURRENCY_A]||bn)&&(_n[r.b_.CURRENCY_B]||wn)||(En=null!==(Nn=En)&&void 0!==Nn?Nn:i.Ru._({id:"iPMIoT"}));const{[r.b_.CURRENCY_A]:Sn,[r.b_.CURRENCY_B]:qn}=_n;var hn,An;Sn&&null!==x&&void 0!==x&&null!==(g=x[r.b_.CURRENCY_A])&&void 0!==g&&g.lessThan(Sn)&&(En="Insufficient ".concat(null===(hn=z[r.b_.CURRENCY_A])||void 0===hn?void 0:hn.symbol," balance"));qn&&null!==x&&void 0!==x&&null!==(E=x[r.b_.CURRENCY_B])&&void 0!==E&&E.lessThan(qn)&&(En="Insufficient ".concat(null===(An=z[r.b_.CURRENCY_B])||void 0===An?void 0:An.symbol," balance"));return S.includes(null!==(N=null===K||void 0===K?void 0:K.id)&&void 0!==N?N:"")&&(En=i.Ru._({id:"eud8y4"})),{ticks:on,pricesAtTicks:sn,invalidRange:cn,outOfRange:Rn,invalidPrice:Z,parsedAmounts:_n,dependentField:Y,depositADisabled:bn,depositBDisabled:wn,ticksAtLimit:ln,errorMessage:En,position:kn,price:H,invertPrice:$,pool:K,noLiquidity:j,currencyBalances:x,atMaxAmounts:gn,maxAmounts:yn,poolLoading:J}}function M(n){const t=(0,a.jL)();return{onFieldAInput:(0,o.useCallback)((n=>{t((0,q._B)({field:r.b_.CURRENCY_A,typedValue:n}))}),[t,n]),onFieldBInput:(0,o.useCallback)((n=>{t((0,q._B)({field:r.b_.CURRENCY_B,typedValue:n}))}),[t,n]),onLeftRangeInput:(0,o.useCallback)((n=>{t((0,q.i1)(n))}),[t]),onRightRangeInput:(0,o.useCallback)((n=>{t((0,q.ZT)(n))}),[t]),onStartPriceInput:(0,o.useCallback)((n=>{t((0,q.bv)(n))}),[t])}}function O(n,t,e,i,r,u){const l=(0,a.jL)(),c=(0,o.useMemo)((()=>null===n||void 0===n?void 0:n.wrapped),[n]),s=(0,o.useMemo)((()=>null===t||void 0===t?void 0:t.wrapped),[t]);return{getDecrementLower:(0,o.useCallback)((()=>{if(c&&s&&"number"===typeof i&&e){return(0,d.y)(c,s,i-v.D6[e]).toSignificant(5,void 0,p.VS.ROUND_UP)}if("number"!==typeof i&&c&&s&&e&&u){return(0,d.y)(c,s,u.tickCurrent-v.D6[e]).toSignificant(5,void 0,p.VS.ROUND_UP)}return""}),[c,s,i,e,u]),getIncrementLower:(0,o.useCallback)((()=>{if(c&&s&&"number"===typeof i&&e){return(0,d.y)(c,s,i+v.D6[e]).toSignificant(5,void 0,p.VS.ROUND_UP)}if("number"!==typeof i&&c&&s&&e&&u){return(0,d.y)(c,s,u.tickCurrent+v.D6[e]).toSignificant(5,void 0,p.VS.ROUND_UP)}return""}),[c,s,i,e,u]),getDecrementUpper:(0,o.useCallback)((()=>{if(c&&s&&"number"===typeof r&&e){return(0,d.y)(c,s,r-v.D6[e]).toSignificant(5,void 0,p.VS.ROUND_UP)}if("number"!==typeof r&&c&&s&&e&&u){return(0,d.y)(c,s,u.tickCurrent-v.D6[e]).toSignificant(5,void 0,p.VS.ROUND_UP)}return""}),[c,s,r,e,u]),getIncrementUpper:(0,o.useCallback)((()=>{if(c&&s&&"number"===typeof r&&e){return(0,d.y)(c,s,r+v.D6[e]).toSignificant(5,void 0,p.VS.ROUND_UP)}if("number"!==typeof r&&c&&s&&e&&u){return(0,d.y)(c,s,u.tickCurrent+v.D6[e]).toSignificant(5,void 0,p.VS.ROUND_UP)}return""}),[c,s,r,e,u]),getSetFullRange:(0,o.useCallback)((()=>{l((0,q.mb)())}),[l])}}},64173:(n,t,e)=>{e.d(t,{M:()=>o});var i=e(91669);function o(n,t,e){if(n&&t&&"number"===typeof e)return(0,i.y)(n,t,e)}},49682:(n,t,e)=>{e.d(t,{r:()=>o});var i=e(86473);function o(n){if(!n)return;return n.subtract(i.e.fromRawAmount(n.currency,2*n.currency.transFee))}},70536:(n,t,e)=>{e.d(t,{W:()=>d});var i=e(43561),o=e(28916),a=e(89362),r=e(91669),u=e(16457),l=e(91577),c=e(12183),s=e.n(c);function d(n,t,e,c){if(!n||!t||!e||!c)return;const d=function(n,t,e){var o;if(!n||!t||!e)return;if(!e.match(/^\d*\.?\d+$/))return;const[a,r]=e.split("."),u=null!==(o=null===r||void 0===r?void 0:r.length)&&void 0!==o?o:0,l=s().BigInt((null!==a&&void 0!==a?a:"")+(null!==r&&void 0!==r?r:""));return new i.g(n,t,s().multiply(s().BigInt(10**u),s().BigInt(10**n.decimals)),s().multiply(l,s().BigInt(10**t.decimals)))}(n,t,c);if(!d)return;let f;const R=(0,o.r)(d.numerator,d.denominator);return f=s().greaterThanOrEqual(R,a.g.MAX_SQRT_RATIO)?a.g.MAX_TICK:s().lessThanOrEqual(R,a.g.MIN_SQRT_RATIO)?a.g.MIN_TICK:(0,r.d)(d),(0,u.Y)(f,l.D6[e])}}}]);
//# sourceMappingURL=1879.d923adc9.chunk.js.map