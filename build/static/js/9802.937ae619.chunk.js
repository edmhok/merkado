"use strict";(self.webpackChunkwaste2earn_home=self.webpackChunkwaste2earn_home||[]).push([[9802],{9802:(e,n,s)=>{s.r(n),s.d(n,{BalanceItem:()=>S,BalancesItem:()=>R,default:()=>B});var t=s(3481),r=s(72296),a=s(33441),i=s(29160),o=s(77500),d=s(1054),c=s(4102),l=s(92213),x=s(69770),u=s(11871),m=s(85066),p=s(12288),h=s(65490),f=s(97070),j=s(62474),g=s(55484),A=s(2281),b=s(22631),v=s(42402),k=s(2777),y=s(20361),I=s(16443),w=s(32880);var C=s(37012);function S(e){let{token:n,symbol:s,balance:r,name:u,pool:h,data:f,onClaimSuccess:A}=e;const b=(0,x.A)(),[v,I]=(0,g.cO)();return(0,C.jsxs)(a.Ay,{container:!0,alignItems:"center",sx:{padding:"24px",borderRadius:"12px",background:b.palette.background.level1,margin:"16px 0 0 0"},children:[(0,C.jsx)(i.A,{src:n.logo,sx:{width:"32px",height:"32px",margin:"0 12px 0 0"},children:"\xa0"}),(0,C.jsxs)(o.A,{sx:{display:"flex",flex:1,alignItems:"center",justifyContent:"space-between"},children:[(0,C.jsxs)(o.A,{children:[(0,C.jsxs)(d.A,{color:"text.primary",sx:{fontSize:"24px",fontWeight:600},children:[(0,m.t)(r,n.decimals).toFormat()," ",n.symbol]}),(0,C.jsx)(d.A,{sx:{margin:"4px 0 0 0"},children:u})]}),(0,C.jsx)(o.A,{children:(0,C.jsx)(j.A,{onSubmit:async(e,t)=>{let{loading:a}=t;if(a)return;const i=v("Reclaim your ".concat((0,m.t)(r,n.decimals).toFormat()," ").concat(n.symbol),g.lA.loading);if(f){const e=await async function(e,n,s){return(0,y.Pk)(await(await(0,k.WY)(e,!0)).withdrawMistransferBalance({address:n,standard:s}))}(h,n.canisterId,"ICRC1");var o;if(e.status===p.i.OK)v("Retrieve ".concat(u," ").concat(null===n||void 0===n?void 0:n.symbol," successfully"),g.lA.success),A&&A(s);else v(null!==(o=e.message)&&void 0!==o?o:"Failed to retrieve ".concat(u," ").concat(n.symbol),g.lA.error)}I(i)},children:e=>{let{submit:n,loading:s}=e;return(0,C.jsx)(c.A,{variant:"contained",fullWidth:!0,size:"medium",disabled:s,onClick:n,startIcon:s?(0,C.jsx)(l.A,{size:24,color:"inherit"}):null,children:(0,C.jsx)(t.x6,{id:"5oNa/n"})})}})})]})]})}function R(e){let{balance:n}=e;const{result:s}=(0,f.Vs)(n.tokenAddress),{result:t}=(0,f.Vs)(n.token0Address),{result:a}=(0,f.Vs)(n.token1Address),i=t&&a?"".concat(t.symbol,"/").concat(a.symbol):"--",[o,d]=(0,r.useState)([]),c="".concat(n.poolId,"_").concat(n.tokenAddress);return s&&!o.includes(c)?(0,C.jsx)(S,{pool:n.poolId,token:s,name:i,balance:n.balance,data:n,onClaimSuccess:e=>{d([...new Set([...o,e])])},symbol:c}):null}function B(){const[e,n]=(0,r.useState)(A.Nj.address),{result:s,loading:a}=function(e){let{tokenId:n}=e;const[s,t]=(0,r.useState)(!0),[a,i]=(0,r.useState)([]),{result:o}=(0,b.Q6)(),d=(0,I.Le)();return(0,r.useEffect)((()=>{!async function(){if(n&&d&&o&&o.length>0){t(!0);const e=await Promise.all(o.map((async e=>{const s=w.sd.fromPrincipal(d).toUint8Array();return await(0,v.k)({canisterId:n,address:e.canisterId.toString(),sub:s})})));i(e.map(((e,s)=>{const t=o[s];return{poolId:t.canisterId.toString(),balance:null!==e&&void 0!==e?e:BigInt(0),tokenAddress:n,token0Address:t.token0.address,token1Address:t.token1.address}}))),t(!1)}}()}),[o,n,d]),(0,r.useMemo)((()=>({loading:s,result:a})),[s,a])}({tokenId:e}),i=(0,r.useMemo)((()=>s?s.filter((e=>e.balance!==BigInt(0))).filter((e=>e.tokenAddress!==e.token0Address&&e.tokenAddress!==e.token1Address)):[]),[s]);return(0,C.jsxs)(u.mO,{children:[(0,C.jsx)(o.A,{sx:{margin:"10px 0 0 0"},children:(0,C.jsx)(u.BI,{prevLink:"/swap",prevLabel:(0,C.jsx)(t.x6,{id:"vH2C/2"}),currentLabel:(0,C.jsx)(t.x6,{id:"/4kgrn"})})}),(0,C.jsx)(o.A,{sx:{display:"flex",justifyContent:"center",margin:"40px 0 0 0"},children:(0,C.jsxs)(o.A,{sx:{width:"800px"},children:[(0,C.jsx)(d.A,{sx:{fontSize:"24px",fontWeight:500},color:"text.primary",children:(0,C.jsx)(t.x6,{id:"/4kgrn"})}),(0,C.jsx)(d.A,{sx:{margin:"10px 0 0 0"},children:(0,C.jsx)(t.x6,{id:"xhtbhu"})}),(0,C.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:"0 10px",margin:"32px 0 0 0"},children:[(0,C.jsx)(d.A,{color:"text.primary",children:(0,C.jsx)(t.x6,{id:"WKj93T"})}),(0,C.jsx)(o.A,{sx:{minWidth:"106px"},children:(0,C.jsx)(u.OH,{value:e,border:!0,onTokenChange:e=>{n(e)},filter:e=>e.standard!==h.i.ICRC1&&e.standard!==h.i.ICRC2})})]}),(0,C.jsx)(o.A,{sx:{margin:"20px 0 0 0"},children:a?(0,C.jsxs)(u.FO,{children:[(0,C.jsx)("div",{}),(0,C.jsx)("div",{}),(0,C.jsx)("div",{}),(0,C.jsx)("div",{}),(0,C.jsx)("div",{}),(0,C.jsx)("div",{}),(0,C.jsx)("div",{}),(0,C.jsx)("div",{})]}):i.length>0?(0,C.jsx)(o.A,{sx:{overflow:"auto",margin:"-16px 0 0 0"},children:i.map(((e,n)=>(0,C.jsx)(R,{balance:e,end:n===i.length-1},n)))}):(0,C.jsx)(u.YQ,{})})]})})]})}},42402:(e,n,s)=>{s.d(n,{k:()=>x,n:()=>u});var t=s(72296),r=s(1261),a=s(86307),i=s(72279),o=s(65324),d=s(27895),c=s(59155);const l=function(e,n,s,t){return new(s||(s=Promise))((function(r,a){function i(e){try{d(t.next(e))}catch(n){a(n)}}function o(e){try{d(t.throw(e))}catch(n){a(n)}}function d(e){var n;e.done?r(e.value):(n=e.value,n instanceof s?n:new s((function(e){e(n)}))).then(i,o)}d((t=t.apply(e,n||[])).next())}))};function x(e){return l(this,arguments,void 0,(function(e){let{canisterId:n,address:s,sub:t}=e;return function*(){return(yield i.v9.balance({canisterId:n,params:{user:(0,r.H)(s)?{principal:s}:(0,a.R)(s)?{principal:o.p.fromText(s)}:{address:s},token:"",subaccount:t?[...t]:void 0}})).data}()}))}function u(e){let{canisterId:n,address:s,sub:r,reload:a}=e;return(0,c.$4)((0,t.useCallback)((()=>l(this,void 0,void 0,(function*(){if(!s||!n)return;const e=yield x({canisterId:n,sub:r,address:s});return void 0===e?void 0:new d.A(e.toString())}))),[s,n,r]),a)}}}]);
//# sourceMappingURL=9802.937ae619.chunk.js.map