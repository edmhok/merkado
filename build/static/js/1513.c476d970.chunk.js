"use strict";(self.webpackChunkmerkado=self.webpackChunkmerkado||[]).push([[1513],{6511:(e,n,i)=>{i.d(n,{qK:()=>d,uj:()=>r});var t=i(72296),o=i(60816),a=i(37140);function r(){return(0,o.GV)((e=>e.swapV2Cache.userTransactionsDeadline))}function d(e){const n=(0,o.jL)();return[(0,o.GV)((e=>e.swapV2Cache.userSlippage))[e],(0,t.useCallback)((i=>{n((0,a.S)({type:e,value:i}))}),[n])]}},1513:(e,n,i)=>{i.r(n),i.d(n,{default:()=>K});var t=i(3481),o=i(54711),a=i(72296),r=i(27312),d=i(40853),s=i(52634),c=i(7745),l=i(40682),u=i(4786),p=i(20761),v=i(18938),x=i(84052),m=i(45265),g=i(77042),h=i(31879),y=i(6511),A=i(93321),j=i(29277),C=i(41738),R=i(78361),w=i(12852),b=i(55484),k=i(86100),I=i(2281),f=i(68703),B=i(62474),q=i(16443),L=i(84076),U=i(46426),_=i(37012);const E={opacity:.2,pointerEvents:"none"},S="@media(max-width: 959px)",N=(0,l.A)((e=>({container:{width:"920px",backgroundColor:(0,k.g4)(e)?e.palette.background.level1:e.colors.lightGray50,borderRadius:e.radius,padding:"24px",[S]:{width:"460px"},[e.breakpoints.down("sm")]:{padding:"12px"}},topHeader:{paddingBottom:"12px",borderBottom:(0,k.g4)(e)?"1px solid #212946":"1px solid ".concat(e.colors.lightGray200BorderColor)},outerBox:{paddingTop:"24px",display:"grid",gap:"24px 48px",gridTemplateRows:"max-content",gridTemplateColumns:"1fr 1fr",gridAutoFlow:"row",[S]:{gridTemplateColumns:"1fr"}},priceRange:{gridArea:"1 / 2 / 3 / auto",height:"fit-content",[S]:{gridArea:"2 / 1 / 3 / auto"}}}))),K=(0,a.memo)((()=>{var e,n;const i=N(),l=(0,r.W6)(),k=(0,q.Le)();let{currencyIdA:K,currencyIdB:P,feeAmount:F}=(0,r.g)();K||(K=I.KJ);const[J,D]=(0,a.useState)(!1),z=(0,y.uj)(),[Y]=(0,y.qK)("mint"),G=F?Number(F):j.dq,[T,M]=(0,A.rd)(K),[V,O]=(0,A.rd)(P),W=M&&O&&M.wrapped.equals(O.wrapped)?void 0:O,{independentField:X,typedValue:H,startPrice:Z}=(0,h.Vs)(),{ticks:Q,pricesAtTicks:$,invalidRange:ee,dependentField:ne,parsedAmounts:ie,depositADisabled:te,depositBDisabled:oe,ticksAtLimit:ae,errorMessage:re,position:de,invertPrice:se,price:ce,pool:le,noLiquidity:ue,currencyBalances:pe,atMaxAmounts:ve,maxAmounts:xe,poolLoading:me}=(0,h.Gm)(null!==M&&void 0!==M?M:void 0,null!==W&&void 0!==W?W:void 0,G,null!==M&&void 0!==M?M:void 0),ge=!re&&!ee,{[j.zm.LOWER]:he,[j.zm.UPPER]:ye}=Q,{[j.zm.LOWER]:Ae,[j.zm.UPPER]:je}=$,Ce={[X]:H,[ne]:null!==(e=null===(n=ie[ne])||void 0===n?void 0:n.toExact())&&void 0!==e?e:""},{onFieldAInput:Re,onFieldBInput:we,onLeftRangeInput:be,onRightRangeInput:ke,onStartPriceInput:Ie}=(0,h.R8)(ue),fe=(0,h.Wk)(),Be=(0,a.useCallback)((()=>{fe(),l.push("/swap/v2/liquidity")}),[l,fe]),qe=e=>{const n=e.canisterId.toString();P?P===I.KJ?P!==n?l.push("/swap/v2/liquidity/add/".concat(n,"/").concat(P)):l.push("/swap/v2/liquidity/add/".concat(n)):n!==I.KJ?l.push("/swap/v2/liquidity/add/".concat(n,"/").concat(I.KJ)):l.push("/swap/v2/liquidity/add/".concat(I.KJ,"/").concat(n)):n===I.KJ?l.push("/swap/v2/liquidity/add/".concat(n)):l.push("/swap/v2/liquidity/add/".concat(I.KJ,"/").concat(n))},Le=e=>{const n=e.canisterId.toString();K?K===I.KJ?K!==n?l.push("/swap/v2/liquidity/add/".concat(K,"/").concat(n)):l.push("/swap/v2/liquidity/add/".concat(n)):K!==n&&n!==I.KJ?l.push("/swap/v2/liquidity/add/".concat(I.KJ,"/").concat(n)):l.push("/swap/v2/liquidity/add/".concat(n,"/").concat(I.KJ)):n===I.KJ?l.push("/swap/v2/liquidity/add/".concat(n)):l.push("/swap/v2/liquidity/add/".concat(n,"/").concat(I.KJ))},Ue=(0,a.useCallback)((e=>{K&&P&&l.push("/swap/v2/liquidity/add/".concat(K,"/").concat(P,"/").concat(e))}),[K,P]),_e=(0,a.useCallback)((()=>{Re(""),we(""),be(""),ke(""),l.push("/swap/v2/liquidity/add")}),[l,Re,we,be,ke]),{getDecrementLower:Ee,getIncrementLower:Se,getDecrementUpper:Ne,getIncrementUpper:Ke,getSetFullRange:Pe}=(0,h.xh)(null!==M&&void 0!==M?M:void 0,null!==W&&void 0!==W?W:void 0,G,he,ye,le),Fe=K&&P&&K!==P,Je=(0,a.useCallback)((()=>{D(!0)}),[]),De=(0,w.F7)(),[ze]=(0,b.I5)(),[Ye]=(0,b.dX)(),[Ge,Te]=(0,b.VS)(),Me=(0,f.z)(),Ve=(0,a.useCallback)((async(e,n)=>{let{loading:i}=n;if(!e||i||!de||!k)return;const t=Ge(o.Ru._({id:"askRar",values:{0:null===M||void 0===M?void 0:M.symbol,1:null===W||void 0===W?void 0:W.symbol}}));D(!1);const a=de.mintAmounts.amount0.toString(),r=de.mintAmounts.amount1.toString();if("0"!==a){const{status:e}=await Me({canisterId:de.pool.token0.address,spender:de.pool.id,value:a,account:k});if("err"===e)return Ye("Failed to approve ".concat(de.pool.token0.symbol)),void Te(t)}if("0"!==r){const{status:e}=await Me({canisterId:de.pool.token1.address,spender:de.pool.id,value:r,account:k});if("err"===e)return Te(t),void Ye("Failed to approve ".concat(de.pool.token1.symbol))}const{status:d,message:s}=await(0,R.Xx)(e,de.pool.token0.address,de.pool.token1.address,BigInt(de.pool.fee),BigInt(de.tickLower),BigInt(de.tickUpper),a,r,"0","0",k,BigInt(z));if(Te(t),"ok"===d)ze(o.Ru._({id:"LZeZGf"})),Be();else if("err"===d){var c;Ye(null!==(c=(0,L.If)(s))&&void 0!==c?c:o.Ru._({id:"6XI1Dg"}))}}),[de,z,Y,De]),Oe=(0,a.useCallback)((()=>{D(!1)}),[]),We=(0,a.useMemo)((()=>ee||void 0===he||void 0===ye||ue&&!Z||me),[ee,he,ye,Z,ue,me]),Xe=()=>{var e,n,i,t,o;ae[j.zm.LOWER]||ae[j.zm.UPPER]||(be(null!==(e=null===(n=se?Ae:null===je||void 0===je?void 0:je.invert())||void 0===n?void 0:n.toSignificant(6))&&void 0!==e?e:""),ke(null!==(i=null===(t=se?je:null===Ae||void 0===Ae?void 0:Ae.invert())||void 0===t?void 0:t.toSignificant(6))&&void 0!==i?i:""),Re(null!==(o=Ce[j.b_.CURRENCY_B])&&void 0!==o?o:""));l.push("/swap/v2/liquidity/add/".concat(P,"/").concat(K).concat(G?"/".concat(G):""))};return(0,_.jsx)(B.A,{onSubmit:Ve,children:e=>{let{submit:n,loading:o}=e;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(m.b,{children:(0,_.jsx)(d.Ay,{container:!0,justifyContent:"center",children:(0,_.jsxs)(d.Ay,{item:!0,className:i.container,children:[(0,_.jsxs)(d.Ay,{container:!0,className:i.topHeader,children:[(0,_.jsx)(d.Ay,{item:!0,xs:3,container:!0,alignItems:"center",children:(0,_.jsx)(u.A,{sx:{cursor:"pointer"},onClick:Be})}),(0,_.jsx)(d.Ay,{item:!0,xs:6,container:!0,justifyContent:"center",alignItems:"center",children:(0,_.jsx)(s.A,{variant:"h3",color:"textPrimary",align:"center",children:(0,_.jsx)(t.x6,{id:"OBdohg"})})}),(0,_.jsx)(d.Ay,{item:!0,container:!0,alignItems:"center",xs:3,sx:{position:"relative"},children:(0,_.jsx)(d.Ay,{item:!0,xs:!0,children:(0,_.jsx)(d.Ay,{container:!0,justifyContent:"flex-end",children:(0,_.jsx)(s.A,{sx:{cursor:"pointer"},color:"secondary",component:"span",onClick:_e,children:(0,_.jsx)(t.x6,{id:"LBPvuL"})})})})})]}),(0,_.jsxs)(c.A,{className:i.outerBox,children:[(0,_.jsxs)(c.A,{children:[(0,_.jsx)(s.A,{variant:"h4",color:"textPrimary",children:(0,_.jsx)(t.x6,{id:"/n/B7U"})}),(0,_.jsxs)(d.Ay,{container:!0,mt:2,spacing:"12px",children:[(0,_.jsx)(d.Ay,{item:!0,xs:6,children:(0,_.jsx)(v.A,{currencyId:K,onChange:qe,loading:T===A.s5.LOADING,disabledCurrency:[...M?[M]:[]],version:"v2"})}),(0,_.jsx)(d.Ay,{item:!0,xs:6,children:(0,_.jsx)(v.A,{currencyId:P,onChange:Le,loading:V===A.s5.LOADING,disabledCurrency:[...W?[W]:[]],version:"v2"})})]}),(0,_.jsx)(c.A,{mt:2,sx:Fe?{}:E,children:(0,_.jsx)(p.Ay,{defaultActiveFee:G,onSelect:Ue,currencyA:M,currencyB:W})})]}),(0,_.jsxs)(c.A,{sx:We?E:{},children:[(0,_.jsx)(s.A,{variant:"h4",color:"textPrimary",children:(0,_.jsx)(t.x6,{id:"Dqb0Bx"})}),(0,_.jsxs)(c.A,{mt:2,children:[(0,_.jsx)(c.A,{children:(0,_.jsx)(x.A,{currency:M,value:Ce[j.b_.CURRENCY_A],onUserInput:Re,locked:te,currencyBalance:null===pe||void 0===pe?void 0:pe[j.b_.CURRENCY_A],showMaxButton:!ve[j.b_.CURRENCY_A],onMax:()=>{var e,n;return Re(null!==(e=null===(n=xe[j.b_.CURRENCY_A])||void 0===n?void 0:n.toExact())&&void 0!==e?e:"")}})}),(0,_.jsx)(c.A,{mt:2,children:(0,_.jsx)(x.A,{currency:W,value:Ce[j.b_.CURRENCY_B],onUserInput:we,locked:oe,currencyBalance:null===pe||void 0===pe?void 0:pe[j.b_.CURRENCY_B],showMaxButton:!ve[j.b_.CURRENCY_B],onMax:()=>{var e,n;return we(null!==(e=null===(n=xe[j.b_.CURRENCY_B])||void 0===n?void 0:n.toExact())&&void 0!==e?e:"")}})})]}),(0,_.jsx)(c.A,{mt:2,sx:{[S]:{display:"block"},"@media(min-width: 960px)":{display:"none"}},children:(0,_.jsx)(U.A,{size:"large",disabled:!ge,error:re,onClick:Je})})]}),(0,_.jsxs)(c.A,{className:i.priceRange,sx:Fe?{}:E,children:[(0,_.jsx)(g.A,{poolLoading:me,startPrice:Z,noLiquidity:ue,onStartPriceInput:Ie,onLeftRangeInput:be,onRightRangeInput:ke,getDecrementLower:Ee,getIncrementLower:Se,getDecrementUpper:Ne,getIncrementUpper:Ke,getSetFullRange:Pe,handleTokenToggle:Xe,baseCurrency:M,quoteCurrency:W,ticksAtLimit:ae,feeAmount:G,priceLower:Ae,priceUpper:je,price:ce?parseFloat((se?ce.invert():ce).toSignificant(8)):void 0}),(0,_.jsx)(c.A,{mt:2,sx:{[S]:{display:"none"}},children:(0,_.jsx)(U.A,{size:"large",disabled:!ge||o,error:re,onClick:Je})})]})]})]})})}),J&&!!de&&(0,_.jsx)(C.A,{onConfirm:n,onCancel:Oe,open:J,position:de})]})}})}))}}]);
//# sourceMappingURL=1513.c476d970.chunk.js.map