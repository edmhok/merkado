{"version":3,"file":"static/js/3379.93cb8524.chunk.js","mappings":"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","sources":["components/upload/index.tsx","views/voting/create-project.tsx","../node_modules/.pnpm/@mui+icons-material@5.5.0_@mui+material@5.15.20_@types+react@17.0.2_react@17.0.2/node_modules/@mui/icons-material/CloudUpload.js","../packages/hooks/src/voting/index.ts"],"sourcesContent":["/* eslint-disable no-param-reassign */\nimport { useState, useEffect } from \"react\";\nimport { TextField, Grid, Typography } from \"@mui/material\";\nimport { makeStyles } from \"@mui/styles\";\nimport CloudUploadIcon from \"@mui/icons-material/CloudUpload\";\n\nconst useStyles = makeStyles(() => {\n  return {\n    box: {\n      width: \"100%\",\n      height: \"100%\",\n      position: \"relative\",\n      border: \"1px dashed #4f5a84\",\n      borderRadius: \"8px\",\n    },\n    input: {\n      position: \"absolute\",\n      width: \"100%\",\n      height: \"100%\",\n      zIndex: \"10\",\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      display: \"block\",\n      \"& *\": {\n        background: \"none\",\n      },\n      \"& fieldset\": {\n        border: \"none\",\n      },\n      \"& .MuiInputBase-root\": {\n        height: \"100%\",\n      },\n      \"& input\": {\n        padding: \"0\",\n        opacity: \"0\",\n        height: \"100%\",\n        cursor: \"pointer\",\n      },\n      \"& label\": {\n        opacity: \"0\",\n      },\n    },\n    logo: {\n      width: \"80px\",\n      height: \"80px\",\n      margin: \"16px 0\",\n    },\n  };\n});\n\nexport type UploadType = {\n  status: boolean;\n  result: number;\n  message: string;\n};\n\nexport default function Upload({\n  onChange,\n  defaultValue,\n  ...props\n}: {\n  onChange: (values: any) => void;\n  defaultValue: string;\n  fullWidth?: boolean;\n}) {\n  const classes = useStyles();\n  const [imagePreview, setImagePreview] = useState<string>(\"\");\n\n  const textFiledProps = {\n    ...props,\n    defaultValue: undefined,\n  };\n\n  useEffect(() => {\n    if (defaultValue) setImagePreview(defaultValue);\n  }, [defaultValue]);\n\n  const _handleReaderLoaded = (binaryString: string, type: string) => {\n    const _base64 = btoa(binaryString);\n    if (onChange) onChange(type + _base64);\n  };\n\n  const photoUpload = (e: any) => {\n    e.preventDefault();\n    const reader = new FileReader();\n    const file = e.target.files[0];\n\n    if (file && file.size / 1024 > 100) {\n      if (onChange) {\n        onChange({\n          status: false,\n          result: 10400,\n          message: \"no more than 100K\",\n        });\n      }\n\n      // reset input value\n      e.target.value = null;\n      return;\n    }\n\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (readerEvt: any) => {\n        _handleReaderLoaded(readerEvt.target.result, `data:${file.type};base64,`);\n      };\n      reader.readAsBinaryString(file);\n    }\n\n    if (reader !== undefined && file !== undefined) {\n      reader.onloadend = () => {\n        setImagePreview(reader.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  return (\n    <Grid container flexDirection=\"column\" justifyContent=\"center\" alignItems=\"center\" className={classes.box}>\n      {imagePreview === \"\" ? (\n        <CloudUploadIcon sx={{ fontSize: \"84px\" }} />\n      ) : (\n        <img className={classes.logo} src={imagePreview} alt=\"\" />\n      )}\n      <TextField\n        className={classes.input}\n        fullWidth\n        {...textFiledProps}\n        type=\"file\"\n        inputProps={{\n          accept: \".jpeg, .png, .jpg, .gif\",\n        }}\n        title=\"\"\n        onChange={photoUpload}\n      />\n      {imagePreview === \"\" ? <Typography mb={2}>Drop your logo here(less than 100K)</Typography> : null}\n    </Grid>\n  );\n}\n","import { useState } from \"react\";\nimport { Grid, Button, Typography, Box, CircularProgress } from \"@mui/material\";\nimport { Wrapper, MainCard, FilledTextField } from \"components/index\";\nimport Identity, { CallbackProps, SubmitLoadingProps } from \"components/Identity\";\nimport { Identity as CallIdentity } from \"types/global\";\nimport { Trans, t } from \"@lingui/macro\";\nimport Upload from \"components/upload/index\";\nimport { useSuccessTip, useErrorTip } from \"hooks/useTips\";\nimport { createVotingCanister } from \"@w2e/hooks\";\nimport { Principal } from \"@dfinity/principal\";\nimport { isValidPrincipal } from \"@w2e/utils\";\nimport { TOKEN_STANDARD } from \"constants/tokens\";\n// import { standardCheck } from \"utils/token/standardCheck\";\n\nexport type Values = {\n  name: string;\n  logo: string;\n  manager: string;\n  tokenId: string;\n  standard: string;\n};\n\nexport const TokenStandards = [\n  { label: \"EXT\", value: TOKEN_STANDARD.EXT },\n  { label: \"DIP20\", value: TOKEN_STANDARD.DIP20 },\n];\n\nexport default function CreateVotingProject() {\n  const [openSuccessTip] = useSuccessTip();\n  const [openErrorTip] = useErrorTip();\n\n  const [values, setValues] = useState<Values>({\n    name: \"\",\n    logo: \"\",\n    manager: \"\",\n    tokenId: \"\",\n    standard: \"\",\n  });\n\n  const onFiledChange = (value: any, field: string) => {\n    setValues({\n      ...values,\n      [field]: value,\n    });\n  };\n\n  const handleCreateProject = async (identity: CallIdentity, { loading }: SubmitLoadingProps) => {\n    if (loading) return;\n\n    // const { valid } = await standardCheck(values.tokenId, values.standard as TOKEN_STANDARD);\n\n    // if (valid === false) {\n    //   openErrorTip(t`This token id did not match the token standard ${values.standard}`);\n    //   return;\n    // }\n\n    const { status, message } = await createVotingCanister(identity, {\n      logo: values.logo,\n      name: values.name,\n      managerAddress: { principal: Principal.fromText(values.manager) },\n      tokenCid: values.tokenId,\n      projectCid: \"\",\n      tokenStand: values.standard,\n    });\n\n    if (status === \"ok\") {\n      openSuccessTip(t`Created successfully`);\n    } else {\n      openErrorTip(message);\n    }\n  };\n\n  let errorMessage = \"\";\n\n  if (!values.name) errorMessage = t`Enter the name`;\n  if (!values.logo) errorMessage = t`Enter the logo`;\n  if (!values.standard) errorMessage = t`Select the token standard`;\n  if (!values.manager) errorMessage = t`Enter the manager principal`;\n  if (values.manager && !isValidPrincipal(values.manager)) errorMessage = t`Invalid principal`;\n  if (!values.tokenId) errorMessage = t`Enter the token id`;\n\n  return (\n    <Wrapper>\n      <MainCard>\n        <Grid container justifyContent=\"center\">\n          <Box sx={{ width: \"100%\", maxWidth: \"570px\" }}>\n            <Box mt=\"20px\">\n              <Box mt=\"20px\">\n                <FilledTextField\n                  label={<Trans>Token Canister Id</Trans>}\n                  onChange={(value) => onFiledChange(value, \"tokenId\")}\n                />\n              </Box>\n\n              <Box mt=\"20px\">\n                <FilledTextField\n                  label={<Trans>Token Standard</Trans>}\n                  select\n                  menus={TokenStandards}\n                  placeholder={t`Select the token standard`}\n                  onChange={(value) => onFiledChange(value, \"standard\")}\n                  value={values.standard}\n                />\n              </Box>\n\n              <Box mt=\"20px\">\n                <FilledTextField label={<Trans>Name</Trans>} onChange={(value) => onFiledChange(value, \"name\")} />\n              </Box>\n\n              <Box mt=\"20px\">\n                <Typography color=\"text.secondary\">\n                  <Trans>Logo</Trans>\n                </Typography>\n\n                <Box mt=\"20px\">\n                  <Box\n                    sx={{\n                      height: \"160px\",\n                    }}\n                  >\n                    <Upload\n                      defaultValue={values.logo}\n                      onChange={(result) => {\n                        if ((typeof result).toLowerCase() === \"string\") {\n                          onFiledChange(result, \"logo\");\n                        } else if (!result.status && result.message) {\n                          openErrorTip(result.message);\n                        }\n                      }}\n                      fullWidth\n                    />\n                  </Box>\n                  <Box mt={1}>\n                    <Typography>\n                      <Trans>Support : png / jpg / gif; Size: â‰¤1M</Trans>\n                    </Typography>\n                  </Box>\n                  <Box mt=\"10px\">\n                    <FilledTextField\n                      label={<Trans>Or</Trans>}\n                      value={values.logo}\n                      onChange={(value: string) => onFiledChange(value, \"logo\")}\n                      fullWidth\n                    />\n                  </Box>\n                </Box>\n              </Box>\n\n              <Box mt=\"20px\">\n                <FilledTextField\n                  label={<Trans>Manager Principal</Trans>}\n                  onChange={(value) => onFiledChange(value, \"manager\")}\n                />\n              </Box>\n\n              <Box mt=\"20px\">\n                <Identity onSubmit={handleCreateProject}>\n                  {({ submit, loading }: CallbackProps) => (\n                    <Button\n                      onClick={submit}\n                      disabled={loading || !!errorMessage}\n                      fullWidth\n                      variant=\"contained\"\n                      size=\"large\"\n                      startIcon={loading ? <CircularProgress size={22} color=\"inherit\" /> : null}\n                    >\n                      {errorMessage || t`Create voting project`}\n                    </Button>\n                  )}\n                </Identity>\n              </Box>\n            </Box>\n          </Box>\n        </Grid>\n      </MainCard>\n    </Wrapper>\n  );\n}\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z\"\n}), 'CloudUpload');\n\nexports.default = _default;","import { useCallback } from \"react\";\nimport { isAvailablePageArgs, availableArgsNull, resultFormat } from \"@w2e/utils\";\nimport { votingCanister, votingController, votingFile } from \"@w2e/actor\";\nimport type {\n  ActorIdentity,\n  PaginationResult,\n  ProjectInfo,\n  ProposalInfo,\n  UserVotePowersInfo,\n  UserVoteRecord,\n  VotingFileChunk,\n  CommitBatchArgs,\n  ProposalCreateInfo,\n} from \"@w2e/types\";\nimport { Principal } from \"@dfinity/principal\";\nimport { useCallsData } from \"../useCallData\";\n\nexport async function createVotingCanister(identity: ActorIdentity, args: ProjectInfo) {\n  return resultFormat<boolean>(await (await votingController(identity)).create(args));\n}\n\nexport async function getVotingProjects(offset: number, limit: number) {\n  return resultFormat<PaginationResult<ProjectInfo>>(\n    await (await votingController()).findProjectPage(BigInt(offset), BigInt(limit)),\n  ).data;\n}\n\nexport function useVotingProjects(offset: number, limit: number) {\n  return useCallsData(\n    useCallback(async () => {\n      if (!isAvailablePageArgs(offset, limit)) return undefined;\n      return await getVotingProjects(offset, limit);\n    }, [offset, limit]),\n  );\n}\n\nexport async function getVotingProjectDetails(canisterId: string) {\n  return resultFormat<ProjectInfo>(await (await votingCanister(canisterId)).getProject()).data;\n}\n\nexport function useVotingProjectDetails(canisterId: string | undefined) {\n  return useCallsData(\n    useCallback(async () => {\n      if (!canisterId) return undefined;\n      return await getVotingProjectDetails(canisterId);\n    }, [canisterId]),\n  );\n}\n\nexport async function createVotingProposal(identity: ActorIdentity, canisterId: string, args: ProposalCreateInfo) {\n  return resultFormat<string>(await (await votingCanister(canisterId, identity)).create(args));\n}\n\nexport async function deleteVotingProposal(identity: ActorIdentity, canisterId: string, proposalId: string) {\n  return resultFormat<boolean>(await (await votingCanister(canisterId, identity)).deleteProposal(proposalId));\n}\n\nexport async function getVotingProposal(canisterId: string, proposalId: string) {\n  return resultFormat<ProposalInfo>(await (await votingCanister(canisterId)).getProposal(proposalId)).data;\n}\n\nexport function useVotingProposal(canisterId: string | undefined, proposalId: string | undefined, reload?: boolean) {\n  return useCallsData(\n    useCallback(async () => {\n      if (!canisterId || !proposalId) return undefined;\n      return await getVotingProposal(canisterId, proposalId);\n    }, [proposalId, canisterId]),\n    reload,\n  );\n}\n\nexport async function getVotingProposals(\n  canisterId: string,\n  address: string | undefined,\n  state: number | undefined,\n  offset: number,\n  limit: number,\n) {\n  return resultFormat<PaginationResult<ProposalInfo>>(\n    await (\n      await votingCanister(canisterId)\n    ).findPage(\n      availableArgsNull<string>(address),\n      availableArgsNull<bigint>(!!state || state === 0 ? BigInt(state) : undefined),\n      BigInt(offset),\n      BigInt(limit),\n    ),\n  ).data;\n}\n\nexport function useVotingProposals(\n  canisterId: string | undefined,\n  address: string | undefined,\n  state: number | undefined,\n  offset: number,\n  limit: number,\n) {\n  return useCallsData(\n    useCallback(async () => {\n      if (!canisterId || !isAvailablePageArgs(offset, limit)) return undefined;\n\n      return await getVotingProposals(canisterId, address, state, offset, limit);\n    }, [canisterId, address, state, offset, limit]),\n  );\n}\n\nexport async function setVotingProposalState(\n  identity: ActorIdentity,\n  canisterId: string,\n  proposalId: string,\n  state: number,\n) {\n  return resultFormat<boolean>(await (await votingCanister(canisterId, identity)).setState(proposalId, BigInt(state)));\n}\n\nexport async function setVotingProposalPowers(\n  identity: ActorIdentity,\n  canisterId: string,\n  proposalId: string,\n  powers: UserVotePowersInfo[],\n) {\n  return resultFormat<boolean>(await (await votingCanister(canisterId, identity)).setVotePower(proposalId, powers));\n}\n\nexport async function voting(\n  identity: ActorIdentity,\n  canisterId: string,\n  proposalId: string,\n  value: string,\n  powers: number,\n) {\n  return resultFormat<boolean>(\n    await (await votingCanister(canisterId, identity)).vote(proposalId, value, BigInt(powers)),\n  );\n}\n\nexport async function getVotingTransactions(canisterId: string, proposalId: string, offset: number, limit: number) {\n  return resultFormat<PaginationResult<UserVoteRecord>>(\n    await (await votingCanister(canisterId)).findRecordPage(proposalId, BigInt(offset), BigInt(limit)),\n  ).data;\n}\n\nexport function useVotingTransactions(\n  canisterId: string | undefined,\n  proposalId: string | undefined,\n  offset: number,\n  limit: number,\n) {\n  return useCallsData(\n    useCallback(async () => {\n      if (!isAvailablePageArgs(offset, limit) || !canisterId || !proposalId) return undefined;\n\n      return await getVotingTransactions(canisterId!, proposalId!, offset, limit);\n    }, [offset, limit, proposalId, canisterId]),\n  );\n}\n\nexport async function getUserVotingPowers(\n  canisterId: string,\n  proposalId: string | undefined,\n  address: string | undefined,\n  offset: number,\n  limit: number,\n) {\n  return resultFormat<PaginationResult<UserVotePowersInfo>>(\n    await (\n      await votingCanister(canisterId)\n    ).findVotePower(\n      availableArgsNull<string>(proposalId),\n      availableArgsNull<string>(address),\n      BigInt(offset),\n      BigInt(limit),\n    ),\n  ).data;\n}\n\nexport function useUserVotingPowers(\n  canisterId: string | undefined,\n  proposalId: string | undefined,\n  address: string | undefined,\n  offset: number,\n  limit: number,\n  reload?: boolean,\n) {\n  return useCallsData(\n    useCallback(async () => {\n      if (!canisterId || !isAvailablePageArgs(offset, limit)) return undefined;\n\n      return await getUserVotingPowers(canisterId!, proposalId, address, offset, limit);\n    }, [canisterId, address, proposalId, offset, limit]),\n    reload,\n  );\n}\n\nexport async function addVotingAuthorityUsers(identity: ActorIdentity, canisterId: string, user: Principal) {\n  return resultFormat<boolean>(await (await votingCanister(canisterId, identity)).addAdmin(user));\n}\n\nexport async function deleteVotingAuthorityUsers(identity: ActorIdentity, canisterId: string, user: Principal) {\n  return resultFormat<boolean>(await (await votingCanister(canisterId, identity)).deleteAdmin(user));\n}\n\nexport async function getVotingAuthorityUsers(canisterId: string, offset: number, limit: number) {\n  return resultFormat<PaginationResult<Principal>>(\n    await (await votingCanister(canisterId)).getAdminList(BigInt(offset), BigInt(limit)),\n  ).data;\n}\n\nexport function useVotingAuthorityUsers(\n  canisterId: string | undefined,\n  offset: number,\n  limit: number,\n  reload?: boolean,\n) {\n  return useCallsData(\n    useCallback(async () => {\n      if (!canisterId || !isAvailablePageArgs(offset, limit)) return undefined;\n      return await getVotingAuthorityUsers(canisterId!, offset, limit);\n    }, [canisterId, offset, limit]),\n    reload,\n  );\n}\n\n// -------------- Voting file --------------\n\nexport async function createVotingBatch(identity: ActorIdentity, canisterId: string, projectId: string) {\n  return resultFormat<{\n    batch_id: bigint;\n  }>(await (await votingFile(canisterId, identity)).create_batch(projectId));\n}\n\nexport async function createVotingChunk(\n  identity: ActorIdentity,\n  canisterId: string,\n  chunk: VotingFileChunk,\n  projectId: string,\n) {\n  return resultFormat<{\n    chunk_id: bigint;\n  }>(await (await votingFile(canisterId, identity)).create_chunk(chunk, projectId));\n}\n\nexport async function commitVotingChunk(\n  identity: ActorIdentity,\n  canisterId: string,\n  args: CommitBatchArgs,\n  projectId: string,\n) {\n  const result = await (await votingFile(canisterId, identity)).commit_batch(args, projectId);\n\n  return resultFormat<boolean>(result === undefined);\n}\n\n// -------------- Voting file --------------\n"],"names":["useStyles","makeStyles","box","width","height","position","border","borderRadius","input","zIndex","top","left","right","bottom","display","background","padding","opacity","cursor","logo","margin","Upload","_ref","onChange","defaultValue","props","classes","imagePreview","setImagePreview","useState","textFiledProps","undefined","useEffect","_jsxs","Grid","container","flexDirection","justifyContent","alignItems","className","children","_jsx","CloudUploadIcon","sx","fontSize","src","alt","TextField","fullWidth","type","inputProps","accept","title","e","preventDefault","reader","FileReader","file","target","files","size","status","result","message","value","onload","readerEvt","_handleReaderLoaded","binaryString","_base64","btoa","concat","readAsBinaryString","onloadend","readAsDataURL","Typography","mb","TokenStandards","label","TOKEN_STANDARD","EXT","DIP20","CreateVotingProject","openSuccessTip","useSuccessTip","openErrorTip","useErrorTip","values","setValues","name","manager","tokenId","standard","onFiledChange","field","errorMessage","i18n","_","id","isValidPrincipal","Wrapper","MainCard","Box","maxWidth","mt","FilledTextField","Trans","select","menus","placeholder","color","toLowerCase","Identity","onSubmit","async","identity","loading","createVotingCanister","managerAddress","principal","Principal","fromText","tokenCid","projectCid","tokenStand","_ref2","submit","Button","onClick","disabled","variant","startIcon","CircularProgress","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d","args","resultFormat","votingController","create","useVotingProjects","offset","limit","useCallsData","useCallback","__awaiter","isAvailablePageArgs","findProjectPage","BigInt","data","getVotingProjects","useVotingProjectDetails","canisterId","votingCanister","getProject","getVotingProjectDetails","createVotingProposal","deleteVotingProposal","proposalId","deleteProposal","useVotingProposal","reload","getProposal","getVotingProposal","useVotingProposals","address","state","findPage","availableArgsNull","getVotingProposals","setVotingProposalPowers","powers","setVotePower","voting","vote","getVotingTransactions","findRecordPage","getUserVotingPowers","findVotePower","useUserVotingPowers","addVotingAuthorityUsers","user","addAdmin","deleteVotingAuthorityUsers","deleteAdmin","useVotingAuthorityUsers","getAdminList","getVotingAuthorityUsers","createVotingBatch","projectId","votingFile","create_batch","createVotingChunk","chunk","create_chunk","commitVotingChunk","commit_batch"],"sourceRoot":""}