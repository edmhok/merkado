"use strict";(self.webpackChunkmerkado=self.webpackChunkmerkado||[]).push([[8185],{8185:(e,n,o)=>{o.d(n,{Gm:()=>S,R8:()=>Y,Vs:()=>I,Wk:()=>L,xh:()=>w});var t=o(54711),i=o(72296),r=o(60816),u=o(29277),l=o(65490),d=o(43561),a=o(28916),R=o(89362),s=o(91669),v=o(32895),c=o(16457),m=o(91577),_=o(87916),p=o(86473),f=o(69831),C=o(70536),b=o(97704),U=o(64173),E=o(81891),y=o(86100),g=o(78192),A=o(49682),N=o(16443),k=o(22061),P=o(34947),B=o(52878);function I(){return(0,r.GV)((e=>e.swapLiquidity))}function L(){const e=(0,r.jL)();return(0,i.useCallback)((()=>{e((0,B.JE)())}),[e])}const M=[l.i.ICRC1,l.i.ICRC2];function S(e,n,o,r,l,f){var B,L,S,Y;const w=(0,N.Le)(),{independentField:O,typedValue:T,leftRangeValue:D,rightRangeValue:q,startPrice:z}=I(),h=O===u.b_.CURRENCY_A?u.b_.CURRENCY_B:u.b_.CURRENCY_A,[V,W,F]=(0,i.useMemo)((()=>[null===e||void 0===e?void 0:e.wrapped,null===n||void 0===n?void 0:n.wrapped,null===r||void 0===r?void 0:r.wrapped]),[e,n,r]),x=(0,i.useMemo)((()=>({[u.b_.CURRENCY_A]:e,[u.b_.CURRENCY_B]:n})),[e,n]),[K,G]=(0,i.useMemo)((()=>V&&W?V.sortsBefore(W)?[V,W]:[W,V]:[void 0,void 0]),[V,W]),X=(0,i.useMemo)((()=>V&&W?[V.address,W.address]:void 0),[V,W]),Q=(0,E.Yx)(X),{result:j}=(0,g.rL)(w,V),{result:H}=(0,g.rL)(w,W),J={[u.b_.CURRENCY_A]:j,[u.b_.CURRENCY_B]:H},[Z,$]=(0,E.Q2)(e,n,o),ee=Z===E.S.NOT_EXISTS,ne=Z===E.S.LOADING,oe=Boolean(F&&K&&!F.equals(K)),te=(0,k.w7)(null===$||void 0===$?void 0:$.id),ie=(0,i.useMemo)((()=>{if(!ee)return $&&K?$.priceOf(K):void 0;{const n=(0,b.lI)(z||"0.1",oe?K:G);if(n&&K&&G){var e;const o=(0,b.lI)("1",oe?G:K),t=o&&n?new d.g(o.currency,n.currency,o.quotient,n.quotient):void 0;return null!==(e=oe?null===t||void 0===t?void 0:t.invert():t)&&void 0!==e?e:void 0}}}),[ee,z,oe,G,K,$]),re=(0,i.useMemo)((()=>{const e=ie?(0,a.r)(ie.numerator,ie.denominator):void 0;return ie&&e&&!(y.xB.greaterThanOrEqual(e,R.g.MIN_SQRT_RATIO)&&y.xB.lessThan(e,R.g.MAX_SQRT_RATIO))}),[ie]),ue=(0,i.useMemo)((()=>{if(V&&W&&o&&ie&&!re){const e=(0,s.d)(ie),n=R.g.getSqrtRatioAtTick(e);return new v.b("",V,W,o,n,y.xB.BigInt(0),e,[])}}),[o,re,ie,V,W]),le=null!==$&&void 0!==$?$:ue,de=(0,i.useMemo)((()=>({[u.zm.LOWER]:o?(0,c.Y)(R.g.MIN_TICK,m.D6[o]):void 0,[u.zm.UPPER]:o?(0,c.Y)(R.g.MAX_TICK,m.D6[o]):void 0})),[o]),ae=(0,i.useMemo)((()=>({[u.zm.LOWER]:"number"===typeof(null===l||void 0===l?void 0:l.tickLower)?l.tickLower:oe&&"boolean"===typeof q||!oe&&"boolean"===typeof D||ee&&(oe&&""===q||!oe&&""===D)?de[u.zm.LOWER]:oe?(0,C.W)(G,K,o,q.toString()):(0,C.W)(K,G,o,D.toString()),[u.zm.UPPER]:"number"===typeof(null===l||void 0===l?void 0:l.tickUpper)?l.tickUpper:!oe&&"boolean"===typeof q||oe&&"boolean"===typeof D||ee&&(!oe&&""===q||oe&&""===D)?de[u.zm.UPPER]:oe?(0,C.W)(G,K,o,D.toString()):(0,C.W)(K,G,o,q.toString())})),[l,o,oe,D,q,K,G,de,ee]),{[u.zm.LOWER]:Re,[u.zm.UPPER]:se}=ae||{},ve=(0,i.useMemo)((()=>({[u.zm.LOWER]:o&&Re===de.LOWER,[u.zm.UPPER]:o&&se===de.UPPER})),[de,Re,se,o]),ce=(0,i.useMemo)((()=>f?{[u.zm.LOWER]:!!ve[u.zm.UPPER]||void 0,[u.zm.UPPER]:!!ve[u.zm.LOWER]||void 0}:ve),[ve,f]),me=Boolean("number"===typeof Re&&"number"===typeof se&&Re>=se),_e=(0,i.useMemo)((()=>({[u.zm.LOWER]:(0,U.M)(K,G,ae[u.zm.LOWER]),[u.zm.UPPER]:(0,U.M)(K,G,ae[u.zm.UPPER])})),[K,G,ae]),{[u.zm.LOWER]:pe,[u.zm.UPPER]:fe}=_e,Ce=Boolean(!me&&ie&&pe&&fe&&(ie.lessThan(pe)||ie.greaterThan(fe))),be=(0,b.lI)(T,x[O]),Ue=(0,i.useMemo)((()=>{const o=null===be||void 0===be?void 0:be.wrapped,t=h===u.b_.CURRENCY_B?n:e;if(be&&o&&"number"===typeof Re&&"number"===typeof se&&le){if(Ce||me)return;const e=o.currency.equals(le.token0)?_.y.fromAmount0({pool:le,tickLower:Re,tickUpper:se,amount0:be.quotient,useFullPrecision:!0}):_.y.fromAmount1({pool:le,tickLower:Re,tickUpper:se,amount1:be.quotient}),n=o.currency.equals(le.token0)?e.amount1:e.amount0;return t&&p.e.fromRawAmount(t,n.quotient)}}),[be,Ce,h,n,e,Re,se,le,me]),Ee=(0,i.useMemo)((()=>({[u.b_.CURRENCY_A]:O===u.b_.CURRENCY_A?be:Ue,[u.b_.CURRENCY_B]:O===u.b_.CURRENCY_A?Ue:be})),[Ue,be,O]),ye=Boolean("number"===typeof se&&le&&le.tickCurrent>=se),ge=Boolean("number"===typeof Re&&le&&le.tickCurrent<=Re),Ae=me||Boolean(ye&&le&&V&&le.token0.equals(V)||ge&&le&&V&&le.token1.equals(V)),Ne=me||Boolean(ye&&le&&W&&le.token0.equals(W)||ge&&le&&W&&le.token1.equals(W)),ke=(0,i.useMemo)((()=>{var e,n;if(!le||!V||!W||"number"!==typeof Re||"number"!==typeof se||me)return;const o=ye?u.CL:null===Ee||void 0===Ee||null===(e=Ee[V.equals(le.token0)?u.b_.CURRENCY_A:u.b_.CURRENCY_B])||void 0===e?void 0:e.quotient,t=ge?u.CL:null===Ee||void 0===Ee||null===(n=Ee[V.equals(le.token0)?u.b_.CURRENCY_B:u.b_.CURRENCY_A])||void 0===n?void 0:n.quotient;return void 0!==o&&void 0!==t?_.y.fromAmounts({pool:le,tickLower:Re,tickUpper:se,amount0:o,amount1:t,useFullPrecision:!0}):void 0}),[Ee,le,V,W,ye,ge,me,Re,se]),Pe=[u.b_.CURRENCY_A,u.b_.CURRENCY_B].reduce(((e,n)=>({...e,[n]:(0,A.r)(J[n])})),{}),Be=[u.b_.CURRENCY_A,u.b_.CURRENCY_B].reduce(((e,n)=>{var o,t;return{...e,[n]:null===(o=Pe[n])||void 0===o?void 0:o.equalTo(null!==(t=Ee[n])&&void 0!==t?t:"0")}}),{});let Ie;var Le,Me,Se,Ye,we,Oe;(!0!==Q&&(Ie=null!==(B=Ie)&&void 0!==B?B:t.Ru._({id:"TvJYeZ"})),!1===(0,b.a1)(T)&&(Ie=null!==(L=Ie)&&void 0!==L?L:t.Ru._({id:"H2biBM"})),Z===E.S.INVALID)&&(Ie=null!==(Le=Ie)&&void 0!==Le?Le:t.Ru._({id:"R7D79P"}));re&&(Ie=null!==(Me=Ie)&&void 0!==Me?Me:t.Ru._({id:"HXBqgG"}));me&&(Ie=null!==(Se=Ie)&&void 0!==Se?Se:t.Ru._({id:"4fr6Aw"}));(Ee[u.b_.CURRENCY_A]||Ae)&&(Ee[u.b_.CURRENCY_B]||Ne)||(Ie=null!==(Ye=Ie)&&void 0!==Ye?Ye:t.Ru._({id:"iPMIoT"}));"boolean"!==typeof te||te||(Ie=null!==(we=Ie)&&void 0!==we?we:t.Ru._({id:"RPGdHy"}));Z===E.S.NOT_CHECK&&(Ie=null!==(Oe=Ie)&&void 0!==Oe?Oe:t.Ru._({id:"GA1vVr"}));const{[u.b_.CURRENCY_A]:Te,[u.b_.CURRENCY_B]:De}=Ee;var qe,ze,he,Ve,We;e&&Te&&null!==J&&void 0!==J&&null!==(S=J[u.b_.CURRENCY_A])&&void 0!==S&&S.lessThan(Te.add(p.e.fromRawAmount(e.wrapped,e.transFee)))&&(Ie=null!==(qe=Ie)&&void 0!==qe?qe:"Insufficient ".concat(null===e||void 0===e?void 0:e.symbol," balance"));n&&De&&null!==J&&void 0!==J&&null!==(Y=J[u.b_.CURRENCY_B])&&void 0!==Y&&Y.lessThan(De.add(p.e.fromRawAmount(n.wrapped,n.transFee)))&&(Ie=null!==(ze=Ie)&&void 0!==ze?ze:"Insufficient ".concat(null===n||void 0===n?void 0:n.symbol," balance"));e&&Te&&!Ae&&!Te.greaterThan(p.e.fromRawAmount(e.wrapped,e.transFee))&&(Ie=null!==(he=Ie)&&void 0!==he?he:t.Ru._({id:"7a5nnK",values:{0:null===e||void 0===e?void 0:e.symbol}}));n&&De&&!Ne&&!De.greaterThan(p.e.fromRawAmount(n.wrapped,n.transFee))&&(Ie=null!==(Ve=Ie)&&void 0!==Ve?Ve:t.Ru._({id:"7a5nnK",values:{0:null===n||void 0===n?void 0:n.symbol}}));M.includes((0,P.bJ)(null===n||void 0===n?void 0:n.address))&&M.includes((0,P.bJ)(null===e||void 0===e?void 0:e.address))||!ee||(Ie=null!==(We=Ie)&&void 0!==We?We:t.Ru._({id:"b/CjoM"}));return{ticks:ae,pricesAtTicks:_e,invalidRange:me,outOfRange:Ce,invalidPrice:re,parsedAmounts:Ee,dependentField:h,depositADisabled:Ae,depositBDisabled:Ne,ticksAtLimit:ce,errorMessage:Ie,position:ke,price:ie,invertPrice:oe,pool:$,noLiquidity:ee,currencyBalances:J,atMaxAmounts:Be,maxAmounts:Pe,poolLoading:ne}}function Y(){const e=(0,r.jL)();return{onFieldAInput:n=>{e((0,B._B)({field:u.b_.CURRENCY_A,typedValue:n}))},onFieldBInput:n=>{e((0,B._B)({field:u.b_.CURRENCY_B,typedValue:n}))},onLeftRangeInput:n=>{e((0,B.i1)(n))},onRightRangeInput:n=>{e((0,B.ZT)(n))},onStartPriceInput:n=>{e((0,B.bv)(n))}}}function w(e,n,o,t,u,l){const d=(0,r.jL)(),a=(0,i.useMemo)((()=>null===e||void 0===e?void 0:e.wrapped),[e]),R=(0,i.useMemo)((()=>null===n||void 0===n?void 0:n.wrapped),[n]);return{getDecrementLower:(0,i.useCallback)((()=>{if(a&&R&&"number"===typeof t&&o){return(0,s.y)(a,R,t-m.D6[o]).toSignificant(5,void 0,f.VS.ROUND_UP)}if("number"!==typeof t&&a&&R&&o&&l){return(0,s.y)(a,R,l.tickCurrent-m.D6[o]).toSignificant(5,void 0,f.VS.ROUND_UP)}return""}),[a,R,t,o,l]),getIncrementLower:(0,i.useCallback)((()=>{if(a&&R&&"number"===typeof t&&o){return(0,s.y)(a,R,t+m.D6[o]).toSignificant(5,void 0,f.VS.ROUND_UP)}if("number"!==typeof t&&a&&R&&o&&l){return(0,s.y)(a,R,l.tickCurrent+m.D6[o]).toSignificant(5,void 0,f.VS.ROUND_UP)}return""}),[a,R,t,o,l]),getDecrementUpper:(0,i.useCallback)((()=>{if(a&&R&&"number"===typeof u&&o){return(0,s.y)(a,R,u-m.D6[o]).toSignificant(5,void 0,f.VS.ROUND_UP)}if("number"!==typeof u&&a&&R&&o&&l){return(0,s.y)(a,R,l.tickCurrent-m.D6[o]).toSignificant(5,void 0,f.VS.ROUND_UP)}return""}),[a,R,u,o,l]),getIncrementUpper:(0,i.useCallback)((()=>{if(a&&R&&"number"===typeof u&&o){return(0,s.y)(a,R,u+m.D6[o]).toSignificant(5,void 0,f.VS.ROUND_UP)}if("number"!==typeof u&&a&&R&&o&&l){return(0,s.y)(a,R,l.tickCurrent+m.D6[o]).toSignificant(5,void 0,f.VS.ROUND_UP)}return""}),[a,R,u,o,l]),getSetFullRange:(0,i.useCallback)((()=>{d((0,B.mb)())}),[d])}}},64173:(e,n,o)=>{o.d(n,{M:()=>i});var t=o(91669);function i(e,n,o){if(e&&n&&"number"===typeof o)return(0,t.y)(e,n,o)}},49682:(e,n,o)=>{o.d(n,{r:()=>i});var t=o(86473);function i(e){if(!e)return;return e.subtract(t.e.fromRawAmount(e.currency,2*e.currency.transFee))}},70536:(e,n,o)=>{o.d(n,{W:()=>s});var t=o(43561),i=o(28916),r=o(89362),u=o(91669),l=o(16457),d=o(91577),a=o(12183),R=o.n(a);function s(e,n,o,a){if(!e||!n||!o||!a)return;const s=function(e,n,o){var i;if(!e||!n||!o)return;if(!o.match(/^\d*\.?\d+$/))return;const[r,u]=o.split("."),l=null!==(i=null===u||void 0===u?void 0:u.length)&&void 0!==i?i:0,d=R().BigInt((null!==r&&void 0!==r?r:"")+(null!==u&&void 0!==u?u:""));return new t.g(e,n,R().multiply(R().BigInt(10**l),R().BigInt(10**e.decimals)),R().multiply(d,R().BigInt(10**n.decimals)))}(e,n,a);if(!s)return;let v;const c=(0,i.r)(s.numerator,s.denominator);return v=R().greaterThanOrEqual(c,r.g.MAX_SQRT_RATIO)?r.g.MAX_TICK:R().lessThanOrEqual(c,r.g.MIN_SQRT_RATIO)?r.g.MIN_TICK:(0,u.d)(s),(0,l.Y)(v,d.D6[o])}}}]);
//# sourceMappingURL=8185.5719daba.chunk.js.map