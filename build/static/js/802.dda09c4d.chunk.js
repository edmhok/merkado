"use strict";(self.webpackChunkmerkado=self.webpackChunkmerkado||[]).push([[802],{9802:(e,n,s)=>{s.r(n),s.d(n,{BalanceItem:()=>S,BalancesItem:()=>R,default:()=>B});var t=s(3481),r=s(72296),i=s(40853),a=s(50620),d=s(7745),o=s(52634),c=s(29650),l=s(56577),x=s(69770),u=s(29090),m=s(85066),p=s(12288),f=s(65490),h=s(97070),j=s(62474),g=s(55484),A=s(2281),b=s(22631),k=s(42402),v=s(85355),y=s(20361),I=s(80073),w=s(4154);var C=s(37012);function S(e){let{token:n,symbol:s,balance:r,name:u,pool:f,data:h,onClaimSuccess:A}=e;const b=(0,x.A)(),[k,I]=(0,g.cO)();return(0,C.jsxs)(i.Ay,{container:!0,alignItems:"center",sx:{padding:"24px",borderRadius:"12px",background:b.palette.background.level1,margin:"16px 0 0 0"},children:[(0,C.jsx)(a.A,{src:n.logo,sx:{width:"32px",height:"32px",margin:"0 12px 0 0"},children:"\xa0"}),(0,C.jsxs)(d.A,{sx:{display:"flex",flex:1,alignItems:"center",justifyContent:"space-between"},children:[(0,C.jsxs)(d.A,{children:[(0,C.jsxs)(o.A,{color:"text.primary",sx:{fontSize:"24px",fontWeight:600},children:[(0,m.t)(r,n.decimals).toFormat()," ",n.symbol]}),(0,C.jsx)(o.A,{sx:{margin:"4px 0 0 0"},children:u})]}),(0,C.jsx)(d.A,{children:(0,C.jsx)(j.A,{onSubmit:async(e,t)=>{let{loading:i}=t;if(i)return;const a=k("Reclaim your ".concat((0,m.t)(r,n.decimals).toFormat()," ").concat(n.symbol),g.lA.loading);if(h){const e=await async function(e,n,s){return(0,y.Pk)(await(await(0,v.WY)(e,!0)).withdrawMistransferBalance({address:n,standard:s}))}(f,n.canisterId,"ICRC1");var d;if(e.status===p.i.OK)k("Retrieve ".concat(u," ").concat(null===n||void 0===n?void 0:n.symbol," successfully"),g.lA.success),A&&A(s);else k(null!==(d=e.message)&&void 0!==d?d:"Failed to retrieve ".concat(u," ").concat(n.symbol),g.lA.error)}I(a)},children:e=>{let{submit:n,loading:s}=e;return(0,C.jsx)(c.A,{variant:"contained",fullWidth:!0,size:"medium",disabled:s,onClick:n,startIcon:s?(0,C.jsx)(l.A,{size:24,color:"inherit"}):null,children:(0,C.jsx)(t.x6,{id:"5oNa/n"})})}})})]})]})}function R(e){let{balance:n}=e;const{result:s}=(0,h.Vs)(n.tokenAddress),{result:t}=(0,h.Vs)(n.token0Address),{result:i}=(0,h.Vs)(n.token1Address),a=t&&i?"".concat(t.symbol,"/").concat(i.symbol):"--",[d,o]=(0,r.useState)([]),c="".concat(n.poolId,"_").concat(n.tokenAddress);return s&&!d.includes(c)?(0,C.jsx)(S,{pool:n.poolId,token:s,name:a,balance:n.balance,data:n,onClaimSuccess:e=>{o([...new Set([...d,e])])},symbol:c}):null}function B(){const[e,n]=(0,r.useState)(A.Nj.address),{result:s,loading:i}=function(e){let{tokenId:n}=e;const[s,t]=(0,r.useState)(!0),[i,a]=(0,r.useState)([]),{result:d}=(0,b.Q6)(),o=(0,I.Le)();return(0,r.useEffect)((()=>{!async function(){if(n&&o&&d&&d.length>0){t(!0);const e=await Promise.all(d.map((async e=>{const s=w.sd.fromPrincipal(o).toUint8Array();return await(0,k.k)({canisterId:n,address:e.canisterId.toString(),sub:s})})));a(e.map(((e,s)=>{const t=d[s];return{poolId:t.canisterId.toString(),balance:null!==e&&void 0!==e?e:BigInt(0),tokenAddress:n,token0Address:t.token0.address,token1Address:t.token1.address}}))),t(!1)}}()}),[d,n,o]),(0,r.useMemo)((()=>({loading:s,result:i})),[s,i])}({tokenId:e}),a=(0,r.useMemo)((()=>s?s.filter((e=>e.balance!==BigInt(0))).filter((e=>e.tokenAddress!==e.token0Address&&e.tokenAddress!==e.token1Address)):[]),[s]);return(0,C.jsxs)(u.mO,{children:[(0,C.jsx)(d.A,{sx:{margin:"10px 0 0 0"},children:(0,C.jsx)(u.BI,{prevLink:"/swap",prevLabel:(0,C.jsx)(t.x6,{id:"vH2C/2"}),currentLabel:(0,C.jsx)(t.x6,{id:"/4kgrn"})})}),(0,C.jsx)(d.A,{sx:{display:"flex",justifyContent:"center",margin:"40px 0 0 0"},children:(0,C.jsxs)(d.A,{sx:{width:"800px"},children:[(0,C.jsx)(o.A,{sx:{fontSize:"24px",fontWeight:500},color:"text.primary",children:(0,C.jsx)(t.x6,{id:"/4kgrn"})}),(0,C.jsx)(o.A,{sx:{margin:"10px 0 0 0"},children:(0,C.jsx)(t.x6,{id:"xhtbhu"})}),(0,C.jsxs)(d.A,{sx:{display:"flex",alignItems:"center",gap:"0 10px",margin:"32px 0 0 0"},children:[(0,C.jsx)(o.A,{color:"text.primary",children:(0,C.jsx)(t.x6,{id:"WKj93T"})}),(0,C.jsx)(d.A,{sx:{minWidth:"106px"},children:(0,C.jsx)(u.OH,{value:e,border:!0,onTokenChange:e=>{n(e)},filter:e=>e.standard!==f.i.ICRC1&&e.standard!==f.i.ICRC2})})]}),(0,C.jsx)(d.A,{sx:{margin:"20px 0 0 0"},children:i?(0,C.jsxs)(u.FO,{children:[(0,C.jsx)("div",{}),(0,C.jsx)("div",{}),(0,C.jsx)("div",{}),(0,C.jsx)("div",{}),(0,C.jsx)("div",{}),(0,C.jsx)("div",{}),(0,C.jsx)("div",{}),(0,C.jsx)("div",{})]}):a.length>0?(0,C.jsx)(d.A,{sx:{overflow:"auto",margin:"-16px 0 0 0"},children:a.map(((e,n)=>(0,C.jsx)(R,{balance:e,end:n===a.length-1},n)))}):(0,C.jsx)(u.YQ,{})})]})})]})}},42402:(e,n,s)=>{s.d(n,{k:()=>x,n:()=>u});var t=s(72296),r=s(1261),i=s(86307),a=s(72279),d=s(65324),o=s(27895),c=s(59155);const l=function(e,n,s,t){return new(s||(s=Promise))((function(r,i){function a(e){try{o(t.next(e))}catch(n){i(n)}}function d(e){try{o(t.throw(e))}catch(n){i(n)}}function o(e){var n;e.done?r(e.value):(n=e.value,n instanceof s?n:new s((function(e){e(n)}))).then(a,d)}o((t=t.apply(e,n||[])).next())}))};function x(e){return l(this,arguments,void 0,(function(e){let{canisterId:n,address:s,sub:t}=e;return function*(){return(yield a.v9.balance({canisterId:n,params:{user:(0,r.H)(s)?{principal:s}:(0,i.R)(s)?{principal:d.p.fromText(s)}:{address:s},token:"",subaccount:t?[...t]:void 0}})).data}()}))}function u(e){let{canisterId:n,address:s,sub:r,reload:i}=e;return(0,c.$4)((0,t.useCallback)((()=>l(this,void 0,void 0,(function*(){if(!s||!n)return;const e=yield x({canisterId:n,sub:r,address:s});return void 0===e?void 0:new o.A(e.toString())}))),[s,n,r]),i)}}}]);
//# sourceMappingURL=802.dda09c4d.chunk.js.map