"use strict";(self.webpackChunkwaste2earn_home=self.webpackChunkwaste2earn_home||[]).push([[3003],{11326:(e,n,t)=>{t.d(n,{N:()=>o});var s=t(60816),i=t(72296),a=t(75689);function o(){const e=(0,s.jL)(),n=(0,s.GV)((e=>e.customization.hideUnavailableClaim)),t=(0,i.useCallback)((n=>{e((0,a.gu)(n))}),[e]);return(0,i.useMemo)((()=>({hideUnavailableClaim:n,updateHideUnavailableClaim:t})),[t,n])}},93003:(e,n,t)=>{t.r(n),t.d(n,{BalanceItem:()=>F,BalancesItem:()=>U,default:()=>W});var s=t(3481),i=t(72296),a=t(33441),o=t(29160),l=t(77500),c=t(1054),r=t(4102),d=t(92213),u=t(71484),x=t(69770),p=t(11871),m=t(85066),h=t(12288),f=t(32880),g=t(65324),b=t(22631),v=t(42402),y=function(e,n,t,s){return new(t||(t=Promise))((function(i,a){function o(e){try{c(s.next(e))}catch(n){a(n)}}function l(e){try{c(s.throw(e))}catch(n){a(n)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,l)}c((s=s.apply(e,n||[])).next())}))};const j=20;let I=-1;let k=-1;function w(e,n,t){const{result:s}=(0,b.Q6)(),{loading:a,balances:o}=function(e,n,t,s){const[a,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)([]),r=(0,i.useMemo)((()=>t?null===n||void 0===n?void 0:n.filter((e=>e.token0.address===t||e.token1.address===t)):n),[n,t]);(0,i.useEffect)((()=>{I++}),[t]);const d=(n,t)=>y(this,void 0,void 0,(function*(){var s,i;if(!e)return;const a=f.sd.fromPrincipal(g.p.fromText(e)).toUint8Array(),o=e=>y(this,void 0,void 0,(function*(){let s;try{t!==I?console.log("abort"):s=e.standard.includes("DIP20")?BigInt(0):yield(0,v.k)({canisterId:e.address,address:n.canisterId,sub:a})}catch(i){console.error(i)}return s})),l=yield Promise.all([o(n.token0),o(n.token1)]);return Object.assign(Object.assign({},n),{type:"unDeposit",balance0:null!==(s=l[0])&&void 0!==s?s:BigInt(0),balance1:null!==(i=l[1])&&void 0!==i?i:BigInt(0)})}));return(0,i.useEffect)((()=>{const n=e=>y(this,void 0,void 0,(function*(){if(!r)return;const n=[[]];for(let s=0;s<r.length;s++){s%j===0&&0!==s&&n.push([]);const t=r[s];n[n.length-1].push((()=>y(this,void 0,void 0,(function*(){return yield d(t,e)}))))}let t=[];for(let e=0;e<n.length;e++){const s=n[e].map((e=>y(this,void 0,void 0,(function*(){return yield e()})))),i=yield Promise.all(s);t=t.concat(i)}e===I&&(c(t),o(!1))}));if(r&&e){const e=I;c([]),o(!0),n(e)}}),[r,s,e]),(0,i.useMemo)((()=>{const e=t?l.filter((e=>!!e)).map((e=>Object.assign(Object.assign({},e),{balance0:e.token0.address===t?e.balance0:BigInt(0),balance1:e.token1.address===t?e.balance1:BigInt(0)}))):l;return{loading:a,balances:e}}),[a,l,t])}(e,s,n,t),{loading:l,balances:c}=function(e,n,t,s){const[a,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)([]),r=(0,i.useMemo)((()=>t?null===n||void 0===n?void 0:n.filter((e=>e.token0.address===t||e.token1.address===t)):n),[n,t]),d=(0,i.useMemo)((()=>null===r||void 0===r?void 0:r.map((e=>e.canisterId.toString()))),[r]);(0,i.useEffect)((()=>{k++}),[t]);const u=(n,t)=>y(this,void 0,void 0,(function*(){if(e)try{if(t!==k)return void console.log("abort");const s=yield(0,b.m$)(n,g.p.fromText(e));if(!s)return;const i=null===r||void 0===r?void 0:r.filter((e=>e.canisterId.toString()===n))[0];if(!i)return;return Object.assign(Object.assign(Object.assign({},i),{type:"unUsed"}),s)}catch(s){console.error(s)}}));return(0,i.useEffect)((()=>{const n=e=>y(this,void 0,void 0,(function*(){if(!d)return;const n=[[]];for(let s=0;s<d.length;s++){s%j===0&&0!==s&&n.push([]);const t=d[s];n[n.length-1].push((()=>y(this,void 0,void 0,(function*(){return yield u(t,e)}))))}let t=[];for(let e=0;e<n.length;e++){const s=n[e].map((e=>y(this,void 0,void 0,(function*(){return yield e()})))),i=yield Promise.all(s);t=t.concat(i)}e===k&&(c(t),o(!1))}));if(d&&e){const e=k;c([]),o(!0),n(e)}}),[d,s,e]),(0,i.useMemo)((()=>{const e=t?l.filter((e=>!!e)).map((e=>Object.assign(Object.assign({},e),{balance0:e.token0.address===t?e.balance0:BigInt(0),balance1:e.token1.address===t?e.balance1:BigInt(0)}))):l;return{loading:a,balances:e}}),[a,l,t])}(e,s,n,t);return(0,i.useMemo)((()=>({loading:l||a,pools:s,balances:c.concat(o).filter((e=>!!e))})),[s,l,c,a,o])}var A=t(97070),C=t(55484),K=t(22061),B=t(11326),S=t(16443),O=t(94926),M=t(37012);function F(e){let{token:n,balance:t,name:u,poolId:f,type:g,updateUnavailableKeys:b,updateClaimedKey:v,claimedKey:y,claimedKeys:j}=e;const I=(0,x.A)(),{hideUnavailableClaim:k}=(0,B.N)(),[w,A]=(0,C.cO)(),[S,O]=(0,i.useState)(!1),F="unDeposit"===g?t<n.transFee*BigInt(2):t<n.transFee,U=(0,i.useMemo)((()=>j.includes(y)),[j,y]);(0,i.useEffect)((()=>{!0===F&&b(y)}),[F,y]);return(0,M.jsxs)(a.Ay,{container:!0,alignItems:"center",sx:{padding:"24px",borderRadius:"12px",background:I.palette.background.level1,margin:"16px 0 0 0",...k&&F||U?{display:"none"}:{},"@media(max-width: 640px)":{padding:"12px"}},children:[(0,M.jsx)(o.A,{src:n.logo,sx:{width:"32px",height:"32px",margin:"0 12px 0 0","@media(max-width: 640px)":{width:"24px",height:"24px"}},children:"\xa0"}),(0,M.jsxs)(l.A,{sx:{display:"flex",flex:1,alignItems:"center",justifyContent:"space-between"},children:[(0,M.jsxs)(l.A,{children:[(0,M.jsxs)(c.A,{color:"text.primary",sx:{fontSize:"24px",fontWeight:600,"@media(max-width: 640px)":{fontSize:"16px"}},children:[(0,m.t)(t,n.decimals).toFormat()," ",n.symbol]}),(0,M.jsx)(c.A,{sx:{margin:"4px 0 0 0"},children:u}),(0,M.jsx)(c.A,{sx:{margin:"4px 0 0 0"},children:f})]}),(0,M.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",gap:"0 10px"},children:[F?(0,M.jsx)(p.tI,{tips:"Claim amount is below the transaction fee, making it unclaimable.",iconSize:"24px"}):null,(0,M.jsx)(r.A,{variant:"contained",fullWidth:!0,size:"medium",disabled:S||F,onClick:async()=>{if(S||F)return;O(!0);const e=w("Reclaim your ".concat((0,m.t)(t,n.decimals).toFormat()," ").concat(n.symbol),C.lA.loading),s=t;if(s!==BigInt(0))if("unDeposit"===g){const e=await(0,K.zz)(!0,f,n.canisterId,s,n.transFee);if(e.status===h.i.OK){const e=await(0,K.ne)(!0,f,n.canisterId,n.transFee,s-n.transFee);e.status===h.i.OK?(w("Withdrew ".concat(u," ").concat(n.symbol," successfully"),C.lA.success),v(y)):w("Failed to Withdraw ".concat(u," ").concat(n.symbol,": ").concat(e.message),C.lA.error)}else{var i;w("Failed to Withdraw: ".concat(null!==(i=e.message)&&void 0!==i?i:""),C.lA.error)}}else{const e=await(0,K.ne)(!0,f,n.canisterId,n.transFee,s);e.status===h.i.OK?(w("Withdrew ".concat(u," ").concat(null===n||void 0===n?void 0:n.symbol," successfully"),C.lA.success),v(y)):w(e.message?e.message:"Failed to Withdraw ".concat(u," ").concat(n.symbol),C.lA.error)}A(e),O(!1)},startIcon:S?(0,M.jsx)(d.A,{size:24,color:"inherit"}):null,children:(0,M.jsx)(s.x6,{id:"CkKHX6"})})]})]})]})}function U(e){let{balance:n,updateUnavailableKeys:t,updateClaimedKey:s,claimedKey:a,claimedKeys:o}=e;const{result:l}=(0,A.Vs)(n.token0),{result:c}=(0,A.Vs)(n.token1),r=(0,i.useMemo)((()=>{if(l&&c)return n.token===l.canisterId?l:c}),[l,c,n]),d=l&&c?"".concat(l.symbol,"/").concat(c.symbol):"--";return r?(0,M.jsx)(F,{claimedKey:a,poolId:n.poolId,token:r,name:d,balance:n.balance,type:n.type,updateUnavailableKeys:t,updateClaimedKey:s,claimedKeys:o}):null}function W(){const e=(0,S.WT)(),[n,t]=(0,i.useState)(O.Nj.address),{pools:a,loading:o,balances:r}=w(e,n),[d,x]=(0,i.useState)([]),[m,h]=(0,i.useState)([]),f=(0,i.useMemo)((()=>r?r.filter((e=>e.balance0!==BigInt(0)||e.balance1!==BigInt(0))).reduce(((e,n)=>{const t=[...e],s=n.canisterId.toString();return n.balance0!==BigInt(0)&&t.push({token:n.token0.address,balance:n.balance0,poolId:s,type:n.type,token0:n.token0.address,token1:n.token1.address}),n.balance1!==BigInt(0)&&t.push({token:n.token1.address,balance:n.balance1,poolId:s,type:n.type,token0:n.token0.address,token1:n.token1.address}),t}),[]):[]),[a,r]),g=(0,i.useMemo)((()=>f.length),[f]),{hideUnavailableClaim:b,updateHideUnavailableClaim:v}=(0,B.N)(),y=e=>{x((n=>[...new Set([...n,e])]))},j=e=>{h((n=>[...n,e]))},I=(0,i.useMemo)((()=>d.length),[d]),k=(0,i.useMemo)((()=>0===g||(I===g?b:0===I?m.length===g:I+m.length===g&&b)),[m,I,g,b]);return(0,M.jsxs)(p.mO,{children:[(0,M.jsx)(l.A,{sx:{margin:"10px 0 0 0"},children:(0,M.jsx)(p.BI,{prevLink:"/swap",prevLabel:(0,M.jsx)(s.x6,{id:"vH2C/2"}),currentLabel:(0,M.jsx)(s.x6,{id:"2wsBrG"})})}),(0,M.jsx)(l.A,{sx:{display:"flex",justifyContent:"center",margin:"40px 0 0 0"},children:(0,M.jsxs)(l.A,{sx:{width:"800px"},children:[(0,M.jsx)(c.A,{sx:{fontSize:"24px",fontWeight:500},color:"text.primary",children:(0,M.jsx)(s.x6,{id:"2wsBrG"})}),(0,M.jsx)(c.A,{sx:{margin:"10px 0 0 0"},children:(0,M.jsx)(s.x6,{id:"6aGdq+"})}),(0,M.jsx)(c.A,{sx:{margin:"20px 0 0 0"},children:(0,M.jsx)(s.x6,{id:"NWTRAq"})}),(0,M.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",margin:"32px 0 0 0",alignItems:"center","@media(max-width: 640px)":{flexDirection:"column",gap:"20px 0",alignItems:"flex-start"}},children:[(0,M.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",gap:"0 10px","@media(max-width: 640px)":{alignItems:"center"}},children:[(0,M.jsx)(c.A,{color:"text.primary",children:(0,M.jsx)(s.x6,{id:"WKj93T"})}),(0,M.jsx)(l.A,{sx:{minWidth:"200px"},children:(0,M.jsx)(p.OH,{search:!0,value:n,border:!0,onTokenChange:e=>{t(e)}})})]}),(0,M.jsx)(l.A,{sx:{display:"flex",alignItems:"center","@media(max-width: 640px)":{justifyContent:"flex-end",width:"100%"}},children:(0,M.jsxs)(l.A,{sx:{display:"flex",gap:"0 5px",alignItems:"center",cursor:"pointer",width:"fit-content"},onClick:()=>{v(!b)},children:[(0,M.jsx)(u.A,{checked:b,onChange:(e,n)=>{v(n)}}),(0,M.jsx)(c.A,{sx:{userSelect:"none"},children:(0,M.jsx)(s.x6,{id:"gI6Qhn"})})]})})]}),n===O.Nj.address?(0,M.jsx)(l.A,{sx:{margin:"10px 0 0 0",display:"flex",gap:"0 5px",alignItems:"center"},children:(0,M.jsx)(c.A,{children:(0,M.jsx)(s.x6,{id:"hVvilu"})})}):null,(0,M.jsx)(l.A,{sx:{margin:"20px 0 0 0"},children:o?(0,M.jsxs)(p.FO,{children:[(0,M.jsx)("div",{}),(0,M.jsx)("div",{}),(0,M.jsx)("div",{}),(0,M.jsx)("div",{}),(0,M.jsx)("div",{}),(0,M.jsx)("div",{}),(0,M.jsx)("div",{}),(0,M.jsx)("div",{})]}):k?(0,M.jsx)(p.YQ,{}):(0,M.jsx)(l.A,{sx:{overflow:"auto",margin:"-16px 0 0 0"},children:f.map(((e,n)=>(0,M.jsx)(U,{balance:e,claimedKey:n,updateUnavailableKeys:y,updateClaimedKey:j,claimedKeys:m},n)))})})]})})]})}},42402:(e,n,t)=>{t.d(n,{k:()=>u,n:()=>x});var s=t(72296),i=t(1261),a=t(86307),o=t(72279),l=t(65324),c=t(27895),r=t(59155);const d=function(e,n,t,s){return new(t||(t=Promise))((function(i,a){function o(e){try{c(s.next(e))}catch(n){a(n)}}function l(e){try{c(s.throw(e))}catch(n){a(n)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,l)}c((s=s.apply(e,n||[])).next())}))};function u(e){return d(this,arguments,void 0,(function(e){let{canisterId:n,address:t,sub:s}=e;return function*(){return(yield o.v9.balance({canisterId:n,params:{user:(0,i.H)(t)?{principal:t}:(0,a.R)(t)?{principal:l.p.fromText(t)}:{address:t},token:"",subaccount:s?[...s]:void 0}})).data}()}))}function x(e){let{canisterId:n,address:t,sub:i,reload:a}=e;return(0,r.$4)((0,s.useCallback)((()=>d(this,void 0,void 0,(function*(){if(!t||!n)return;const e=yield u({canisterId:n,sub:i,address:t});return void 0===e?void 0:new c.A(e.toString())}))),[t,n,i]),a)}}}]);
//# sourceMappingURL=3003.60feb75b.chunk.js.map