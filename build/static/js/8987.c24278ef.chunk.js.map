{"version":3,"file":"static/js/8987.c24278ef.chunk.js","mappings":"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","sources":["components/CurrenciesAvatar/index.tsx","components/CurrencyAvatar/index.tsx","components/swap/LiquidityPoolIntro.tsx","components/swap/PoolCard.tsx","components/swap/PositionRangeState.tsx","components/swap/SwapUIWrapper.tsx","hooks/swap/usePosition.ts","hooks/swap/usePositionFees.ts","components/swap/CollectFeeSteps.tsx","hooks/swap/useClaimFees.ts","components/swap/CollectFeesModal.tsx","components/swap/PositionContext.ts","components/swap/TransferPosition.tsx","components/swap/PositionItem.tsx","views/swap-liquidity-v3/liquidity/Positions.tsx","hooks/swap/useUserAllPositions.ts","../packages/hooks/src/info/global.ts","views/swap-liquidity-v3/liquidity/PoolList.tsx","views/swap-liquidity-v3/liquidity/index.tsx","../node_modules/.pnpm/@mui+icons-material@5.5.0_@mui+material@5.15.20_@emotion+react@11.11.4_@types+react@17.0.2_re_y34dkmz43sjsezmk4faklzfb6e/node_modules/@mui/icons-material/esm/KeyboardArrowDown.js","../node_modules/.pnpm/@mui+icons-material@5.5.0_@mui+material@5.15.20_@emotion+react@11.11.4_@types+react@17.0.2_re_y34dkmz43sjsezmk4faklzfb6e/node_modules/@mui/icons-material/esm/KeyboardArrowUp.js","../node_modules/.pnpm/@mui+icons-material@5.5.0_@mui+material@5.15.20_@emotion+react@11.11.4_@types+react@17.0.2_re_y34dkmz43sjsezmk4faklzfb6e/node_modules/@mui/icons-material/esm/SyncAlt.js","../packages/swap-sdk/src/utils/getPriceOrderingFromPositionForUI.ts","../packages/swap-sdk/src/utils/invert.ts"],"sourcesContent":["import { Box } from \"@mui/material\";\nimport { makeStyles } from \"@mui/styles\";\nimport CurrencyAvatar from \"components/CurrencyAvatar\";\nimport { Token } from \"@w2e/swap-sdk\";\n\nconst useStyles = makeStyles(() => {\n  return {\n    floatLeft: {\n      float: \"left\",\n    },\n    avatarBox: {\n      clear: \"both\",\n      overflow: \"hidden\",\n      \"& .currencyB\": {\n        marginLeft: \"-8px\",\n        float: \"left\",\n      },\n      \"& .currencyA \": {\n        float: \"left\",\n      },\n    },\n  };\n});\n\nexport interface CurrenciesAvatarProps {\n  currencyA: Token | undefined;\n  currencyB: Token | undefined;\n  borderColor: string;\n  bgColor: string;\n  className?: any;\n  size?: string;\n}\n\nexport default function CurrenciesAvatar({\n  currencyA,\n  currencyB,\n  borderColor = \"#ffffff\",\n  bgColor = \"#97a4ef\",\n  size,\n}: CurrenciesAvatarProps) {\n  const classes = useStyles();\n\n  return (\n    <Box className={classes.avatarBox}>\n      <CurrencyAvatar\n        className=\"currencyA\"\n        borderColor={borderColor}\n        bgColor={bgColor}\n        currency={currencyA}\n        size={size}\n      />\n      <CurrencyAvatar\n        className=\"currencyB\"\n        borderColor={borderColor}\n        bgColor={bgColor}\n        currency={currencyB}\n        size={size}\n      />\n    </Box>\n  );\n}\n","import { Avatar } from \"@mui/material\";\nimport { makeStyles } from \"@mui/styles\";\nimport { Token } from \"@w2e/swap-sdk\";\n\nconst useStyles = ({ borderColor, size }: { borderColor: string; size?: string | undefined }) =>\n  makeStyles(() => {\n    return {\n      avatar: {\n        width: size || \"24px\",\n        height: size || \"24px\",\n        border: `1px solid ${borderColor}`,\n      },\n    };\n  });\n\nexport interface CurrencyAvatarProps {\n  currency: Token | undefined | null;\n  borderColor?: string;\n  bgColor?: string;\n  className?: string;\n  size?: string;\n}\n\nexport default function CurrencyAvatar({\n  currency,\n  borderColor = \"#ffffff\",\n  bgColor = \"#97a4ef\",\n  className,\n  size,\n}: CurrencyAvatarProps) {\n  const classes = useStyles({ borderColor, size })();\n\n  return (\n    <Avatar className={`${classes.avatar} ${className || \"\"}`} sx={{ bgcolor: bgColor }} src={currency?.logo}>\n      &nbsp;\n    </Avatar>\n  );\n}\n","import { useCallback } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Box, Button, Grid, Typography } from \"@mui/material\";\nimport { makeStyles } from \"@mui/styles\";\nimport { Trans } from \"@lingui/macro\";\nimport { MainCard } from \"components/index\";\n\nconst useStyle = makeStyles(() => {\n  return {\n    button: {\n      width: \"230px\",\n      height: \"48px\",\n    },\n  };\n});\n\nexport default function LiquidityPoolIntro({ version }: { version?: \"v2\" | \"v3\" }) {\n  const classes = useStyle();\n  const history = useHistory();\n\n  const loadAddLiquidity = useCallback(() => {\n    if (version === \"v2\") {\n      history.push(\"/swap/v2/liquidity/add\");\n    } else {\n      history.push(\"/swap/liquidity/add\");\n    }\n  }, [history]);\n\n  return (\n    <MainCard level={1} sx={{ height: \"244px\" }} className=\"lightGray200\">\n      <Typography variant=\"h3\" align=\"center\" color=\"text.primary\">\n        <Trans>Liquidity Pool</Trans>\n      </Typography>\n      <Box mt={2}>\n        <Typography fontSize={16} align=\"center\">\n          <Trans>\n            80% of the trading fees are rewarded to the liquidity providers, and the remaining 20% of the trading fees\n            are put into the ICS Repurchase-and-Burn Pool.\n          </Trans>\n        </Typography>\n      </Box>\n      <Grid container mt={4} justifyContent=\"center\">\n        <Grid item>\n          <Button className={classes.button} variant=\"contained\" onClick={loadAddLiquidity}>\n            <Trans>Add Liquidity</Trans>\n          </Button>\n        </Grid>\n      </Grid>\n    </MainCard>\n  );\n}\n","import { useCallback } from \"react\";\nimport { Box, Grid, Typography } from \"@mui/material\";\nimport { makeStyles } from \"@mui/styles\";\nimport CurrenciesAvatar from \"components/CurrenciesAvatar\";\nimport { useToken } from \"hooks/useCurrency\";\nimport { feeAmountToPercentage } from \"utils/swap/index\";\nimport { useHistory } from \"react-router-dom\";\nimport { Trans } from \"@lingui/macro\";\nimport { Theme } from \"@mui/material/styles\";\nimport { formatDollarAmount } from \"@w2e/utils\";\n\nconst useStyles = makeStyles((theme: Theme) => {\n  return {\n    topBox: {\n      clear: \"both\",\n      overflow: \"hidden\",\n    },\n    floatLeft: {\n      float: \"left\",\n    },\n    listItem: {\n      height: \"140px\",\n      padding: \"18px\",\n      borderRadius: `${theme.radius}px`,\n      cursor: \"pointer\",\n    },\n    poolName: {\n      margin: \"0 8px\",\n      \"& .MuiTypography-root\": {\n        color: \"#fff\",\n        fontWeight: 700,\n      },\n    },\n    feeAmount: {\n      padding: \"2px 4px\",\n      borderRadius: \"4px\",\n      \"& .MuiTypography-root\": {\n        color: \"#fff\",\n      },\n    },\n    poolData: {\n      marginTop: \"28px\",\n    },\n  };\n});\n\nexport interface PoolCardProps {\n  token0: string;\n  token1: string;\n  fee: bigint;\n  tvlUSD: string | number;\n  totalVolumeUSD: string | number;\n  version?: \"v2\" | \"v3\";\n  token0Symbol?: string;\n  token1Symbol?: string;\n}\n\nexport default function PoolCard({\n  token0,\n  token1,\n  fee,\n  totalVolumeUSD,\n  tvlUSD,\n  token0Symbol,\n  token1Symbol,\n  version,\n}: PoolCardProps) {\n  const history = useHistory();\n  const classes = useStyles();\n\n  const [, currency0] = useToken(token0);\n  const [, currency1] = useToken(token1);\n\n  const handlePoolClick = useCallback(() => {\n    if (version === \"v2\") {\n      history.push(`/swap/v2/liquidity/add/${token0}/${token1}/${Number(fee)}`);\n    } else {\n      history.push(`/swap/liquidity/add/${token0}/${token1}/${Number(fee)}`);\n    }\n  }, [history]);\n\n  return (\n    <Box className={`${classes.listItem} list-item`} onClick={handlePoolClick}>\n      <Box className=\"list-item-color-box\" />\n      <Grid container alignItems=\"center\" className={`${classes.topBox}`}>\n        <CurrenciesAvatar\n          className={classes.floatLeft}\n          currencyA={currency0}\n          currencyB={currency1}\n          borderColor=\"transparent\"\n          bgColor=\"transparent\"\n        />\n        <Box className={`${classes.poolName} ${classes.floatLeft}`}>\n          <Typography>{`${token0Symbol ?? currency0?.symbol ?? \"--\"}/${token1Symbol ?? currency1?.symbol ?? \"--\"\n            }`}</Typography>\n        </Box>\n        <Box className={`${classes.feeAmount} feeAmount ${classes.floatLeft}`}>\n          <Typography>{feeAmountToPercentage(Number(fee))}</Typography>\n        </Box>\n      </Grid>\n      <Grid container className={classes.poolData}>\n        <Grid container flexDirection=\"column\" item xs={6}>\n          <Grid item container justifyContent=\"flex-start\">\n            <Typography className=\"title\">\n              <Trans>TVL</Trans>\n            </Typography>\n          </Grid>\n          <Grid item mt={1} container justifyContent=\"flex-start\">\n            <Typography className=\"value\" color=\"#ffffff\" fontWeight={700} fontSize={16}>\n              {formatDollarAmount(tvlUSD)}\n            </Typography>\n          </Grid>\n        </Grid>\n        <Grid container item xs={6} flexDirection=\"column\" justifyContent=\"flex-end\">\n          <Grid item container justifyContent=\"flex-end\">\n            <Typography className=\"title\">\n              <Trans>Total Volume</Trans>\n            </Typography>\n          </Grid>\n          <Grid mt={1} item container justifyContent=\"flex-end\">\n            <Typography className=\"value\" color=\"#ffffff\" fontWeight={700} fontSize={16}>\n              {formatDollarAmount(totalVolumeUSD)}\n            </Typography>\n          </Grid>\n        </Grid>\n      </Grid>\n    </Box>\n  );\n}\n","import { Box, Typography, SvgIcon } from \"@mui/material\";\nimport { makeStyles } from \"@mui/styles\";\nimport { Trans } from \"@lingui/macro\";\nimport { Theme } from \"@mui/material/styles\";\n\nconst useStyle = makeStyles((theme: Theme) => {\n  return {\n    wrapper: {\n      display: \"flex\",\n      alignItems: \"center\",\n      height: \"24px\",\n      padding: \"0 9px\",\n      borderRadius: \"8px\",\n\n      \"& .MuiTypography-root\": {\n        fontSize: \"12px\",\n        fontWeight: 500,\n      },\n\n      \"&.inRange\": {\n        background: theme.colors.darkPrimary400,\n      },\n\n      \"&.closed\": {\n        background: theme.colors.darkPrimary400,\n      },\n\n      \"&.outOfRange\": {\n        background: \"#FFC107\",\n        \"& .MuiTypography-root\": {\n          color: theme.colors.darkLevel1,\n          marginLeft: \"3px\",\n        },\n      },\n    },\n  };\n});\n\nfunction Marker(props: any) {\n  return (\n    <SvgIcon width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" {...props}>\n      <path\n        d=\"M5.5 3.5H6.5V4.5H5.5V3.5ZM5.5 5.5H6.5V8.5H5.5V5.5ZM6 1C3.24 1 1 3.24 1 6C1 8.76 3.24 11 6 11C8.76 11 11 8.76 11 6C11 3.24 8.76 1 6 1ZM6 10C3.795 10 2 8.205 2 6C2 3.795 3.795 2 6 2C8.205 2 10 3.795 10 6C10 8.205 8.205 10 6 10Z\"\n        fill={props.color ? props.color : \"#111936\"}\n      />\n    </SvgIcon>\n  );\n}\n\nfunction Closed() {\n  const classes = useStyle();\n\n  return (\n    <Box component=\"span\" className={`${classes.wrapper} closed`}>\n      <Marker fontSize=\"12px\" color=\"#fff\" />\n\n      <Typography color=\"#ffffff\" sx={{ marginLeft: \"3px\" }}>\n        <Trans>Closed</Trans>\n      </Typography>\n    </Box>\n  );\n}\n\nfunction OutOfRange() {\n  const classes = useStyle();\n\n  return (\n    <Box className={`${classes.wrapper} outOfRange`}>\n      <Marker fontSize=\"12px\" />\n\n      <Typography>\n        <Trans>Out of range</Trans>\n      </Typography>\n    </Box>\n  );\n}\n\nfunction InRange() {\n  const classes = useStyle();\n\n  return (\n    <Box className={`${classes.wrapper} inRange`}>\n      <Box\n        component=\"span\"\n        sx={{ background: \"#54C081\", width: \"8px\", height: \"8px\", borderRadius: \"50%\", marginRight: \"8px\" }}\n      />\n      <Typography color=\"#ffffff\">\n        <Trans>In range</Trans>\n      </Typography>\n    </Box>\n  );\n}\n\nexport interface PositionRangeStateProps {\n  outOfRange?: boolean | undefined;\n  closed?: boolean | undefined;\n}\n\nexport default function PositionRangeState({ outOfRange, closed }: PositionRangeStateProps) {\n  return closed ? <Closed /> : outOfRange ? <OutOfRange /> : <InRange />;\n}\n","import { Box, Typography, Grid } from \"@mui/material\";\nimport { t } from \"@lingui/macro\";\nimport { Wrapper, TabPanel } from \"components/index\";\nimport React from \"react\";\n// import { INFO_URL } from \"constants/index\";\n\nfunction LinkIcon() {\n  return (\n    <svg width=\"6\" height=\"7\" viewBox=\"0 0 6 7\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M4.09619 1.5H0.303301V0.5H5.3033H5.8033V1V6H4.8033V2.20711L0.707107 6.3033L0 5.59619L4.09619 1.5Z\"\n        fill=\"#4F5A84\"\n      />\n    </svg>\n  );\n}\n\ntype Button = {\n  id: number | string;\n  value: React.ReactNode;\n  path?: string;\n  key: string;\n};\n\nfunction SwapWrapper({ children, buttons }: { children: React.ReactNode; buttons: Button[] }) {\n  return (\n    <Wrapper>\n      <TabPanel tabs={buttons} />\n      <Box mt={4}>{children}</Box>\n    </Wrapper>\n  );\n}\n\nexport function SwapV2Wrapper({ children }: { children: React.ReactNode }) {\n  const buttons = [\n    { id: 3, value: t`Wrap`, path: \"/swap/v2/wrap\", key: \"/wrap\" },\n    {\n      id: 2,\n      key: \"/swap/v2/liquidity\",\n      value: t`Liquidity V2`,\n      path: \"/swap/v2/liquidity\",\n    },\n    {\n      id: 4,\n      key: \"swap-v3\",\n      value: (\n        <Grid container>\n          <Typography\n            sx={{\n              fontWeight: 600,\n              \"@media (max-width: 640px)\": {\n                fontSize: \"12px\",\n              },\n            }}\n          >\n            Exchange\n          </Typography>\n          <Box sx={{ margin: \"0 0 0 3px\", position: \"relative\", top: \"-4px\" }}>\n            <LinkIcon />\n          </Box>\n        </Grid>\n      ),\n      path: \"/swap\",\n    },\n  ];\n\n  return <SwapWrapper buttons={buttons}>{children}</SwapWrapper>;\n}\n\nexport default function _SwapWrapper({ children }: { children: React.ReactNode }) {\n  const buttons = [\n    { id: 1, value: t`Swap V3`, path: \"/swap\", key: \"/swap\" },\n    {\n      id: 2,\n      key: \"/swap/liquidity\",\n      value: t`Liquidity`,\n      path: \"/swap/liquidity\",\n    },\n    // {\n    //   id: 3,\n    //   key: \"info\",\n    //   value: (\n    //     <Grid container>\n    //       <Typography>Info</Typography>\n    //       <Box sx={{ margin: \"0 0 0 3px\", position: \"relative\", top: \"-4px\" }}>\n    //         <LinkIcon />\n    //       </Box>\n    //     </Grid>\n    //   ),\n    //   link: INFO_URL,\n    // },\n  ];\n\n  return <SwapWrapper buttons={buttons}>{children}</SwapWrapper>;\n}\n","import { useMemo } from \"react\";\nimport { Position, Pool } from \"@w2e/swap-sdk\";\nimport { useSwapPoolMetadata } from \"@w2e/hooks\";\nimport { usePool, PoolState } from \"hooks/swap/usePools\";\nimport { useToken } from \"hooks/useCurrency\";\n\nexport interface usePositionProps {\n  poolId: string | undefined;\n  tickLower: bigint | undefined;\n  tickUpper: bigint | undefined;\n  liquidity: bigint | undefined;\n}\n\nexport function usePosition(userPosition: usePositionProps | undefined) {\n  const { result: poolMetadata } = useSwapPoolMetadata(userPosition?.poolId);\n\n  const [, currency0] = useToken(poolMetadata?.token0.address);\n  const [, currency1] = useToken(poolMetadata?.token1.address);\n\n  const [poolState, pool] = usePool(\n    currency0 ?? undefined,\n    currency1 ?? undefined,\n    poolMetadata?.fee ? Number(poolMetadata.fee) : undefined,\n  );\n\n  let position: Position | undefined;\n\n  if (\n    pool &&\n    poolMetadata &&\n    userPosition &&\n    userPosition.tickLower !== undefined &&\n    userPosition.tickUpper !== undefined &&\n    userPosition.liquidity !== undefined\n  ) {\n    position = new Position({\n      pool,\n      liquidity: userPosition.liquidity.toString(),\n      tickLower: Number(userPosition.tickLower),\n      tickUpper: Number(userPosition.tickUpper),\n    });\n  }\n\n  return {\n    loading: poolState === PoolState.LOADING,\n    checking: poolState === PoolState.NOT_CHECK,\n    position,\n    pool: pool ?? undefined,\n  };\n}\n\nexport interface usePositionWithPoolProps {\n  pool: Pool | null | undefined;\n  liquidity: number | string | undefined;\n  tickLower: number | string | undefined;\n  tickUpper: number | string | undefined;\n}\n\nexport function usePositionWithPool({ tickLower, tickUpper, liquidity, pool }: usePositionWithPoolProps) {\n  let position: Position | undefined;\n\n  if (pool && liquidity && (tickLower || tickLower === 0) && (tickUpper || tickUpper === 0)) {\n    position = new Position({\n      pool,\n      liquidity,\n      tickLower: Number(tickLower),\n      tickUpper: Number(tickUpper),\n    });\n  }\n\n  return useMemo(() => position, [position]);\n}\n","import { useMemo } from \"react\";\nimport { usePositionFee } from \"@w2e/hooks\";\n\nexport function usePositionFees(\n  canisterId: string | undefined,\n  positionId: bigint | undefined,\n  refresh?: number | boolean,\n) {\n  const { result } = usePositionFee(canisterId, positionId, refresh);\n\n  return useMemo(() => {\n    if (!result)\n      return {\n        amount0: undefined,\n        amount1: undefined,\n      };\n\n    return {\n      amount0: result.tokensOwed0,\n      amount1: result.tokensOwed1,\n    };\n  }, [result]);\n}\n","import { Box, Avatar } from \"@mui/material\";\nimport { Token, CurrencyAmount } from \"@w2e/swap-sdk\";\nimport { formatTokenAmount, shorten } from \"@w2e/utils\";\nimport { t, Trans } from \"@lingui/macro\";\nimport { TextButton } from \"components/index\";\nimport { Principal } from \"@dfinity/principal\";\n\nexport interface CollectStepsProps {\n  positionId: bigint;\n  retry?: () => Promise<boolean>;\n  currencyFeeAmount0: CurrencyAmount<Token>;\n  currencyFeeAmount1: CurrencyAmount<Token>;\n  principal: Principal | undefined;\n  handleReclaim: () => void;\n}\n\nfunction TokenAmount({ logo, amount }: { logo: string; amount: string | undefined }) {\n  return (\n    <Box sx={{ display: \"flex\", alignItems: \"center\" }}>\n      <Avatar sx={{ width: \"16px\", height: \"16px\", margin: \"0 4px 0 0\" }} src={logo}>\n        &nbsp;\n      </Avatar>\n      {amount ?? 0}\n    </Box>\n  );\n}\n\nexport function getCollectFeeSteps({\n  positionId,\n  retry,\n  currencyFeeAmount0,\n  currencyFeeAmount1,\n  principal,\n  handleReclaim,\n}: CollectStepsProps) {\n  const principalString = shorten(principal?.toString() ?? \"\", 12);\n\n  const withdrawAmountA = currencyFeeAmount0.toSignificant(12, { groupSeparator: \",\" });\n  const _withdrawAmountA = currencyFeeAmount0.toSignificant(12);\n  const withdrawAmountB = currencyFeeAmount1.toSignificant(12, { groupSeparator: \",\" });\n  const _withdrawAmountB = currencyFeeAmount1.toSignificant(12);\n\n  const tokenA = currencyFeeAmount0.currency.wrapped;\n  const tokenB = currencyFeeAmount1.currency.wrapped;\n\n  const withdrawAmountALessThanZero = formatTokenAmount(_withdrawAmountA, tokenA.decimals)\n    .minus(tokenA.transFee)\n    .isLessThan(0);\n\n  const withdrawAmountBLessThanZero = formatTokenAmount(_withdrawAmountB, tokenB.decimals)\n    .minus(tokenB.transFee)\n    .isLessThan(0);\n\n  return [\n    {\n      title: `Collect ${tokenA.symbol} and ${tokenB.symbol}`,\n      step: 0,\n      children: [\n        { label: t`Position ID`, value: positionId.toString() },\n        {\n          label: t`Token0`,\n          value: <TokenAmount amount={withdrawAmountA} logo={tokenA.logo} />,\n        },\n        {\n          label: t`Token1`,\n          value: <TokenAmount amount={withdrawAmountB} logo={tokenB.logo} />,\n        },\n      ],\n      errorActions: [\n        <TextButton onClick={retry}>\n          <Trans>Retry</Trans>\n        </TextButton>,\n      ],\n    },\n    {\n      title: withdrawAmountALessThanZero ? t`Unable to withdraw ${tokenA.symbol}` : t`Withdraw ${tokenA.symbol}`,\n      step: 1,\n      children: [\n        {\n          label: t`Amount`,\n          value: <TokenAmount amount={withdrawAmountA} logo={tokenA.logo} />,\n        },\n        { label: t`Principal ID`, value: principalString },\n      ],\n      errorActions: [\n        <TextButton onClick={handleReclaim}>\n          <Trans>Reclaim</Trans>\n        </TextButton>,\n        <TextButton onClick={retry}>\n          <Trans>Retry</Trans>\n        </TextButton>,\n      ],\n      errorMessage: t`Please click Reclaim your tokens if they've transferred to the swap pool.`,\n      skipError: withdrawAmountALessThanZero ? t`The amount of withdrawal is less than the transfer fee` : undefined,\n    },\n    {\n      title: withdrawAmountBLessThanZero ? t`Unable to withdraw ${tokenB.symbol}` : t`Withdraw ${tokenB.symbol}`,\n      step: 2,\n      children: [\n        {\n          label: t`Amount`,\n          value: <TokenAmount amount={withdrawAmountB} logo={tokenB.logo} />,\n        },\n        { label: t`Principal ID`, value: principalString },\n      ],\n      errorActions: [\n        <TextButton onClick={handleReclaim}>\n          <Trans>Reclaim</Trans>\n        </TextButton>,\n        <TextButton onClick={retry}>\n          <Trans>Retry</Trans>\n        </TextButton>,\n      ],\n      errorMessage: t`Please click Reclaim your tokens if they've transferred to the swap pool.`,\n      skipError: withdrawAmountBLessThanZero ? t`The amount of withdrawal is less than the transfer fee` : undefined,\n    },\n  ];\n}\n","import { useCallback } from \"react\";\nimport BigNumber from \"bignumber.js\";\nimport { Pool, CurrencyAmount, Token } from \"@w2e/swap-sdk\";\nimport { t } from \"@lingui/macro\";\nimport { getActorIdentity } from \"components/Identity\";\nimport { useAccountPrincipal } from \"store/auth/hooks\";\nimport { getLocaleMessage } from \"locales/services\";\nimport { useStepCalls, newStepKey } from \"hooks/useStepCall\";\nimport { getCollectFeeSteps } from \"components/swap/CollectFeeSteps\";\nimport { useStepContentManager } from \"store/steps/hooks\";\nimport { useSwapWithdraw, useReclaimCallback } from \"hooks/swap/index\";\nimport { useErrorTip } from \"hooks/useTips\";\nimport { collect } from \"hooks/swap/v3Calls\";\nimport { ExternalTipArgs, OpenExternalTip } from \"types/index\";\n\nexport async function collectPositionFee(pool: string, positionId: bigint) {\n  const identity = await getActorIdentity();\n\n  return await collect(pool, identity, {\n    positionId,\n  });\n}\n\ninterface CollectFeeCallsArgs {\n  currencyFeeAmount0: CurrencyAmount<Token>;\n  pool: Pool;\n  positionId: bigint;\n  currencyFeeAmount1: CurrencyAmount<Token>;\n  openExternalTip: OpenExternalTip;\n  stepKey: string;\n}\n\nfunction useCollectFeeCalls() {\n  const principal = useAccountPrincipal();\n  const [openErrorTip] = useErrorTip();\n  const withdraw = useSwapWithdraw();\n\n  return useCallback(\n    ({ pool, positionId, currencyFeeAmount0, currencyFeeAmount1, openExternalTip, stepKey }: CollectFeeCallsArgs) => {\n      const _collect = async () => {\n        if (!positionId || !principal || !pool) return false;\n\n        const { status, message } = await collectPositionFee(pool.id, positionId);\n\n        if (status === \"ok\") {\n          return true;\n        }\n        openErrorTip(getLocaleMessage(message) ?? t`Failed to claim`);\n        return false;\n      };\n\n      const withdrawCurrencyA = async () => {\n        if (!currencyFeeAmount0 || !pool) return false;\n\n        if (\n          !new BigNumber(currencyFeeAmount0.quotient.toString())\n            .minus(currencyFeeAmount0.currency.transFee)\n            .isGreaterThan(0)\n        )\n          return true;\n\n        return await withdraw(\n          currencyFeeAmount0.currency,\n          pool.id,\n          currencyFeeAmount0.quotient.toString(),\n          ({ message }: ExternalTipArgs) => {\n            openExternalTip({ message, tipKey: stepKey });\n          },\n        );\n      };\n\n      const withdrawCurrencyB = async () => {\n        if (!currencyFeeAmount1 || !pool) return false;\n\n        if (\n          !new BigNumber(currencyFeeAmount1.quotient.toString())\n            .minus(currencyFeeAmount1.currency.transFee)\n            .isGreaterThan(0)\n        )\n          return true;\n\n        const result = await withdraw(\n          currencyFeeAmount1.currency,\n          pool.id,\n          currencyFeeAmount1.quotient.toString(),\n          ({ message }: ExternalTipArgs) => {\n            openExternalTip({ message, tipKey: stepKey });\n          },\n        );\n\n        return result;\n      };\n\n      return [_collect, withdrawCurrencyA, withdrawCurrencyB];\n    },\n    [principal],\n  );\n}\n\ninterface AddLiquidityStepsArgs {\n  positionId: bigint;\n  retry: () => Promise<boolean>;\n  currencyFeeAmount0: CurrencyAmount<Token>;\n  currencyFeeAmount1: CurrencyAmount<Token>;\n}\n\nfunction useCollectFeeSteps() {\n  const principal = useAccountPrincipal();\n  const stepContentManage = useStepContentManager();\n\n  const handleReclaim = useReclaimCallback();\n\n  return useCallback(\n    (key: string, { positionId, retry, currencyFeeAmount0, currencyFeeAmount1 }: AddLiquidityStepsArgs) => {\n      const content = getCollectFeeSteps({\n        positionId,\n        retry,\n        currencyFeeAmount1,\n        currencyFeeAmount0,\n        principal,\n        handleReclaim,\n      });\n\n      stepContentManage(String(key), {\n        content,\n        title: t`Claim Fees Details`,\n      });\n    },\n    [principal],\n  );\n}\n\nexport interface ClaimFeeArgs {\n  currencyFeeAmount0: CurrencyAmount<Token>;\n  pool: Pool;\n  positionId: bigint;\n  currencyFeeAmount1: CurrencyAmount<Token>;\n  openExternalTip: OpenExternalTip;\n}\n\nexport function useCollectFeeCallback() {\n  const getCalls = useCollectFeeCalls();\n  const formatCall = useStepCalls();\n  const initialSteps = useCollectFeeSteps();\n\n  return useCallback(\n    ({ pool, positionId, currencyFeeAmount0, currencyFeeAmount1, openExternalTip }: ClaimFeeArgs) => {\n      const key = newStepKey();\n      const calls = getCalls({\n        pool,\n        positionId,\n        currencyFeeAmount0,\n        currencyFeeAmount1,\n        openExternalTip,\n        stepKey: key,\n      });\n      const { call, reset, retry } = formatCall(calls, key);\n\n      initialSteps(key, { positionId, currencyFeeAmount0, currencyFeeAmount1, retry });\n\n      return { call, reset, retry, key };\n    },\n    [getCalls, formatCall, initialSteps],\n  );\n}\n","import { Box, Grid, Typography, CircularProgress } from \"@mui/material\";\nimport { makeStyles } from \"@mui/styles\";\nimport SwapModal from \"components/modal/swap\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { Theme } from \"@mui/material/styles\";\nimport { BigNumber } from \"@w2e/utils\";\nimport { Token, CurrencyAmount, Pool } from \"@w2e/swap-sdk\";\nimport Button from \"components/authentication/ButtonConnector\";\nimport { toFormat } from \"utils/index\";\nimport { TokenImage } from \"components/index\";\nimport { useMemo, useState } from \"react\";\nimport { useCollectFeeCallback } from \"hooks/swap/useClaimFees\";\nimport { ExternalTipArgs } from \"types/index\";\nimport { ReclaimTips } from \"components/ReclaimTips\";\nimport { useSuccessTip, useLoadingTip, useErrorTip } from \"hooks/useTips\";\nimport StepViewButton from \"components/Steps/View\";\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  feeBox: {\n    padding: \"16px 16px\",\n    borderRadius: \"12px\",\n    background: theme.palette.background.level3,\n  },\n}));\n\nexport interface CollectFeeModalProps {\n  open: boolean;\n  onClose: () => void;\n  currencyFeeAmount0: CurrencyAmount<Token> | undefined;\n  currencyFeeAmount1: CurrencyAmount<Token> | undefined;\n  pool: Pool | undefined | null;\n  positionId: number | bigint | undefined | string;\n  onClaimedSuccessfully?: () => void;\n}\n\nexport default function CollectFees({\n  open,\n  onClose,\n  currencyFeeAmount0,\n  currencyFeeAmount1,\n  pool,\n  positionId,\n  onClaimedSuccessfully,\n}: CollectFeeModalProps) {\n  const classes = useStyles();\n  const [openSuccessTip] = useSuccessTip();\n  const [openErrorTip] = useErrorTip();\n  const [openLoadingTip, closeLoadingTip] = useLoadingTip();\n  const [loading, setLoading] = useState(false);\n\n  const { token0, token1 } = useMemo(() => {\n    if (!pool) return { token0: undefined, token1: undefined };\n    return { token0: pool.token0, token1: pool.token1 };\n  }, [pool]);\n\n  const getClaimFeeCall = useCollectFeeCallback();\n\n  const handleCollect = async () => {\n    if (loading || !positionId || !pool || !currencyFeeAmount0 || !currencyFeeAmount1) return;\n\n    setLoading(true);\n    onClose();\n\n    const { call, key } = getClaimFeeCall({\n      pool,\n      positionId: BigInt(positionId),\n      currencyFeeAmount0,\n      currencyFeeAmount1,\n      openExternalTip: ({ message, tipKey }: ExternalTipArgs) => {\n        openErrorTip(<ReclaimTips message={message} tipKey={tipKey} />);\n      },\n    });\n\n    const loadingTipKey = openLoadingTip(\n      `Claim ${currencyFeeAmount0.toSignificant(6, {\n        groupSeparator: \",\",\n      })} ${token0?.symbol} and ${currencyFeeAmount1.toSignificant(6, { groupSeparator: \",\" })} ${token1?.symbol}`,\n      {\n        extraContent: <StepViewButton step={key} />,\n      },\n    );\n\n    const result = await call();\n\n    if (result === true) {\n      openSuccessTip(t`Claimed successfully`);\n      if (onClaimedSuccessfully) onClaimedSuccessfully();\n    }\n\n    closeLoadingTip(loadingTipKey);\n    setLoading(false);\n  };\n\n  return (\n    <SwapModal open={open} onClose={onClose} title={t`Claim fees`}>\n      <>\n        <Box className={classes.feeBox}>\n          <Grid container alignItems=\"center\">\n            <Grid item xs container alignItems=\"center\">\n              <Grid item mr={1}>\n                <TokenImage logo={token0?.logo} tokenId={token0?.address} />\n              </Grid>\n              <Grid item>\n                <Typography color=\"text.primary\">{token0?.symbol}</Typography>\n              </Grid>\n            </Grid>\n            <Grid item xs>\n              <Typography align=\"right\" color=\"text.primary\">\n                {currencyFeeAmount0 ? toFormat(new BigNumber(currencyFeeAmount0.toExact()).toFixed(8)) : \"--\"}\n              </Typography>\n            </Grid>\n          </Grid>\n          <Grid container mt={2} alignItems=\"center\">\n            <Grid item xs container alignItems=\"center\">\n              <Grid item mr={1}>\n                <TokenImage logo={token1?.logo} tokenId={token1?.address} />\n              </Grid>\n              <Grid item>\n                <Typography color=\"text.primary\">{token1?.symbol}</Typography>\n              </Grid>\n            </Grid>\n            <Grid item xs>\n              <Typography align=\"right\" color=\"text.primary\">\n                {currencyFeeAmount1 ? toFormat(new BigNumber(currencyFeeAmount1.toExact()).toFixed(8)) : \"--\"}\n              </Typography>\n            </Grid>\n          </Grid>\n        </Box>\n        <Typography mt={1}>\n          <Trans>You can claim the liquidity incentive reward from the transaction according to your position.</Trans>\n        </Typography>\n        <Button\n          variant=\"contained\"\n          size=\"large\"\n          fullWidth\n          sx={{ marginTop: \"24px\" }}\n          onClick={handleCollect}\n          disabled={loading}\n          startIcon={loading ? <CircularProgress size={24} color=\"inherit\" /> : null}\n        >\n          {t`Claim`}\n        </Button>\n      </>\n    </SwapModal>\n  );\n}\n","import { createContext } from \"react\";\nimport BigNumber from \"bignumber.js\";\n\nexport interface PositionContextProps {\n  allPositionsUSDValue: BigNumber | undefined;\n  setAllPositionsUSDValue: (id: string, totalUSDValue: BigNumber) => void;\n  counter: number;\n  updateCounter: () => void;\n}\n\nexport default createContext<PositionContextProps>({} as PositionContextProps);\n","import React, { useState, useMemo } from \"react\";\nimport { Typography, Grid, Chip, Button, useMediaQuery, Box } from \"@mui/material\";\nimport { makeStyles, useTheme } from \"@mui/styles\";\nimport CurrenciesAvatar from \"components/CurrenciesAvatar\";\nimport { formatTickPrice } from \"utils/swap/formatTickPrice\";\nimport useIsTickAtLimit from \"hooks/swap/useIsTickAtLimit\";\nimport { Bound } from \"constants/swap\";\nimport { DEFAULT_PERCENT_SYMBOL, CurrencyAmountFormatDecimals } from \"constants/index\";\nimport { feeAmountToPercentage } from \"utils/swap/index\";\nimport { usePositionFees } from \"hooks/swap/usePositionFees\";\nimport { useAccountPrincipal } from \"store/auth/hooks\";\nimport {\n  numberToString,\n  BigNumber,\n  resultFormat,\n  formatDollarAmount,\n  isValidPrincipal,\n  toSignificantWithGroupSeparator,\n} from \"@w2e/utils\";\nimport { swapPool } from \"@w2e/actor\";\nimport { ResultStatus } from \"@w2e/types\";\nimport { CurrencyAmount, Position, getPriceOrderingFromPositionForUI, useInverter } from \"@w2e/swap-sdk\";\nimport { isDarkTheme } from \"utils/index\";\nimport { useSuccessTip, useLoadingTip, useErrorTip } from \"hooks/useTips\";\nimport { SyncAlt as SyncAltIcon } from \"@mui/icons-material\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { Theme } from \"@mui/material/styles\";\nimport { FilledTextField, Loading } from \"components/index\";\nimport { useUSDPriceById } from \"hooks/useUSDPrice\";\nimport { isElement } from \"react-is\";\nimport SwapModal from \"components/modal/swap\";\nimport { Principal } from \"@dfinity/principal\";\n\nimport PositionStatus from \"./PositionRangeState\";\n\nconst useStyle = makeStyles((theme: Theme) => ({\n  positionContainer: {\n    position: \"relative\",\n    backgroundColor: theme.palette.background.level3,\n    borderRadius: `${theme.radius}px`,\n    border: theme.palette.border.gray200,\n    padding: \"24px 20px\",\n    marginTop: \"16px\",\n    cursor: \"pointer\",\n    overflow: \"hidden\",\n    \"&:first-child\": {\n      marginTop: \"0\",\n    },\n    [theme.breakpoints.down(\"md\")]: {\n      padding: \"16px 10px\",\n    },\n  },\n  detailContainer: {\n    backgroundColor: theme.palette.background.level3,\n    borderRadius: `${theme.radius}px`,\n    border: theme.palette.border.gray200,\n    padding: \"20px\",\n    [theme.breakpoints.down(\"md\")]: {\n      padding: \"10px\",\n    },\n  },\n}));\n\nexport interface PositionDetailItemProps {\n  label: React.ReactChild;\n  value: React.ReactChild | undefined;\n  convert?: boolean;\n  onConvertClick?: () => void;\n}\n\nexport function PositionDetailItem({ label, value, convert, onConvertClick }: PositionDetailItemProps) {\n  const theme = useTheme() as Theme;\n  const matchDownSM = useMediaQuery(theme.breakpoints.down(\"sm\"));\n\n  return (\n    <Grid container alignItems=\"center\">\n      <Typography {...(matchDownSM ? { fontSize: \"12px\" } : {})}>{label}</Typography>\n      <Grid sx={{ flex: 1 }} container justifyContent=\"flex-end\" alignItems=\"center\">\n        {isElement(value) ? (\n          value\n        ) : (\n          <Typography {...(matchDownSM ? { fontSize: \"12px\" } : {})} color=\"textPrimary\">\n            {value}\n          </Typography>\n        )}\n\n        {convert && (\n          <SyncAltIcon sx={{ fontSize: \"1rem\", marginLeft: \"6px\", cursor: \"pointer\" }} onClick={onConvertClick} />\n        )}\n      </Grid>\n    </Grid>\n  );\n}\n\nexport interface PositionDetailsProps {\n  positionId: bigint;\n  invalid?: boolean;\n  showButtons?: boolean;\n  position: Position | undefined;\n  manuallyInverted: boolean;\n  setManuallyInverted: (manuallyInverted: boolean) => void;\n  show: boolean | undefined;\n  token0USDPrice: number | undefined;\n  token1USDPrice: number | undefined;\n  onPrincipalChange: (principal: string) => void;\n}\n\nexport function PositionDetails({\n  position,\n  positionId,\n  manuallyInverted,\n  setManuallyInverted,\n  show,\n  token0USDPrice,\n  token1USDPrice,\n  onPrincipalChange,\n}: PositionDetailsProps) {\n  const classes = useStyle();\n\n  const { pool, tickLower, tickUpper } = position || {};\n  const { token0, token1, fee: feeAmount } = pool || {};\n\n  const _tickAtLimit = useIsTickAtLimit(feeAmount, tickLower, tickUpper);\n  const pricesFromPosition = getPriceOrderingFromPositionForUI(position);\n\n  // handle manual inversion\n  const { priceLower, priceUpper, base } = useInverter({\n    priceLower: pricesFromPosition?.priceLower,\n    priceUpper: pricesFromPosition?.priceUpper,\n    quote: pricesFromPosition?.quote,\n    base: pricesFromPosition?.base,\n    invert: manuallyInverted,\n  });\n\n  const inverted = token1 ? base?.equals(token1) : undefined;\n\n  const tickAtLimit = useMemo(() => {\n    if (!inverted) return _tickAtLimit;\n\n    return {\n      [Bound.LOWER]: _tickAtLimit[Bound.UPPER] ? true : undefined,\n      [Bound.UPPER]: _tickAtLimit[Bound.LOWER] ? true : undefined,\n    };\n  }, [_tickAtLimit, inverted]);\n\n  const currencyQuote = inverted ? token0 : token1;\n  const currencyBase = inverted ? token1 : token0;\n\n  const pairName = useMemo(() => {\n    return `${currencyQuote?.symbol} per ${currencyBase?.symbol}`;\n  }, [currencyQuote, currencyBase]);\n\n  const { amount0: feeAmount0, amount1: feeAmount1 } = usePositionFees(position?.pool.id, positionId);\n\n  const currencyFeeAmount0 = useMemo(() => {\n    if (!token0 || feeAmount0 === undefined) return undefined;\n    return CurrencyAmount.fromRawAmount(token0, numberToString(new BigNumber(feeAmount0.toString())));\n  }, [feeAmount0, token0]);\n\n  const currencyFeeAmount1 = useMemo(() => {\n    if (!token1 || feeAmount1 === undefined) return undefined;\n    return CurrencyAmount.fromRawAmount(token1, numberToString(new BigNumber(feeAmount1.toString())));\n  }, [feeAmount1, token1]);\n\n  return (\n    <>\n      <Box\n        className={classes.detailContainer}\n        sx={{ display: show ? \"flex\" : \"none\", margin: \"8px 0 0 0\", gap: \"20px 0\", flexDirection: \"column\" }}\n      >\n        <PositionDetailItem label={t`Position ID`} value={positionId.toString()} />\n        <PositionDetailItem\n          label={t`${currencyQuote?.symbol} Amount`}\n          value={\n            !position\n              ? \"--\"\n              : inverted\n                ? toSignificantWithGroupSeparator(\n                  position.amount0.toFixed(CurrencyAmountFormatDecimals(position?.amount0.currency.decimals)),\n                )\n                : toSignificantWithGroupSeparator(\n                  position.amount1.toFixed(CurrencyAmountFormatDecimals(position?.amount1.currency.decimals)),\n                )\n          }\n        />\n        <PositionDetailItem\n          label={t`${currencyBase?.symbol} Amount`}\n          value={\n            !position\n              ? \"--\"\n              : inverted\n                ? toSignificantWithGroupSeparator(\n                  position.amount1.toFixed(CurrencyAmountFormatDecimals(position?.amount1.currency.decimals)),\n                )\n                : toSignificantWithGroupSeparator(\n                  position.amount0.toFixed(CurrencyAmountFormatDecimals(position?.amount0.currency.decimals)),\n                )\n          }\n        />\n        <PositionDetailItem\n          label={t`Current Price`}\n          value={\n            !!token1 && !!token0 && pool\n              ? inverted\n                ? `${pool.priceOf(token1).toSignificant(6, { groupSeparator: \",\" })} ${pairName}`\n                : `${pool.priceOf(token0).toSignificant(6, { groupSeparator: \",\" })} ${pairName}`\n              : \"--\"\n          }\n          convert\n          onConvertClick={() => setManuallyInverted(!manuallyInverted)}\n        />\n        <PositionDetailItem\n          label={t`Price Range`}\n          value={\n            <Box>\n              <Typography\n                color=\"text.primary\"\n                align=\"right\"\n                sx={{\n                  \"@media(max-width: 640px)\": {\n                    fontSize: \"12px\",\n                  },\n                }}\n              >\n                {formatTickPrice(priceLower, tickAtLimit, Bound.LOWER)} -\n                {formatTickPrice(priceUpper, tickAtLimit, Bound.UPPER)}\n              </Typography>\n              <Typography\n                color=\"text.primary\"\n                align=\"right\"\n                sx={{\n                  \"@media(max-width: 640px)\": {\n                    fontSize: \"12px\",\n                  },\n                }}\n              >\n                {pairName}\n              </Typography>\n            </Box>\n          }\n          convert\n          onConvertClick={() => setManuallyInverted(!manuallyInverted)}\n        />\n        <PositionDetailItem\n          label={t`Unclaimed fees`}\n          value={\n            <Box>\n              <Typography\n                color=\"text.primary\"\n                align=\"right\"\n                sx={{\n                  \"@media(max-width: 640px)\": {\n                    fontSize: \"12px\",\n                  },\n                }}\n              >\n                {currencyFeeAmount0 !== undefined || currencyFeeAmount1 !== undefined\n                  ? `${toSignificantWithGroupSeparator(\n                    new BigNumber(currencyFeeAmount0 ? currencyFeeAmount0.toExact() : 0).toString(),\n                  )} ${token0?.symbol}`\n                  : \"--\"}\n              </Typography>\n              <Typography\n                color=\"text.primary\"\n                align=\"right\"\n                sx={{\n                  \"@media(max-width: 640px)\": {\n                    fontSize: \"12px\",\n                  },\n                }}\n              >\n                {currencyFeeAmount0 !== undefined || currencyFeeAmount1 !== undefined\n                  ? `and ${toSignificantWithGroupSeparator(\n                    new BigNumber(currencyFeeAmount1 ? currencyFeeAmount1.toExact() : 0).toString(),\n                  )} ${token1?.symbol}`\n                  : \"--\"}\n              </Typography>\n              <Typography\n                mt=\"5px\"\n                align=\"right\"\n                sx={{\n                  \"@media(max-width: 640px)\": {\n                    fontSize: \"12px\",\n                  },\n                }}\n              >\n                {currencyFeeAmount0 !== undefined &&\n                  currencyFeeAmount1 !== undefined &&\n                  !!token0USDPrice &&\n                  !!token1USDPrice\n                  ? formatDollarAmount(\n                    new BigNumber(currencyFeeAmount0 ? currencyFeeAmount0.toExact() : 0)\n                      .multipliedBy(token0USDPrice)\n                      .plus(\n                        new BigNumber(currencyFeeAmount1 ? currencyFeeAmount1.toExact() : 0).multipliedBy(\n                          token1USDPrice,\n                        ),\n                      )\n                      .toString(),\n                  )\n                  : \"--\"}\n              </Typography>\n            </Box>\n          }\n        />\n\n        <Box>\n          <Typography sx={{ margin: \"0  0 10px 0\" }}>\n            <Trans>Transfer to</Trans>\n          </Typography>\n\n          <FilledTextField multiline placeholder=\"Enter the principal ID\" onChange={onPrincipalChange} />\n        </Box>\n      </Box>\n    </>\n  );\n}\n\nexport interface TransferPositionProps {\n  positionId: bigint;\n  invalid?: boolean;\n  showButtons?: boolean;\n  position: Position | undefined;\n  closed: boolean;\n  open: boolean;\n  onClose: () => void;\n  onTransferSuccess?: () => void;\n}\n\nexport default function TransferPosition({\n  position,\n  showButtons,\n  positionId,\n  invalid = false,\n  closed,\n  open,\n  onClose,\n  onTransferSuccess,\n}: TransferPositionProps) {\n  const classes = useStyle();\n  const theme = useTheme() as Theme;\n\n  const userPrincipal = useAccountPrincipal();\n\n  const [principal, setPrincipal] = useState<undefined | string>(undefined);\n  const [loading, setLoading] = useState<boolean>(false);\n\n  const [openSuccessTip] = useSuccessTip();\n  const [openErrorTip] = useErrorTip();\n  const [openLoadingTip, closeLoadingTip] = useLoadingTip();\n\n  const matchDownMD = useMediaQuery(theme.breakpoints.down(\"md\"));\n\n  const { pool, tickLower, tickUpper } = position || {};\n  const { token0, token1, fee: feeAmount } = pool || {};\n\n  const pricesFromPosition = getPriceOrderingFromPositionForUI(position);\n  const [manuallyInverted, setManuallyInverted] = useState(false);\n\n  // handle manual inversion\n  const { base } = useInverter({\n    priceLower: pricesFromPosition?.priceLower,\n    priceUpper: pricesFromPosition?.priceUpper,\n    quote: pricesFromPosition?.quote,\n    base: pricesFromPosition?.base,\n    invert: manuallyInverted,\n  });\n\n  const inverted = token1 ? base?.equals(token1) : undefined;\n\n  const currencyQuote = inverted ? token0 : token1;\n  const currencyBase = inverted ? token1 : token0;\n\n  const outOfRange =\n    pool && (tickUpper || tickUpper === 0) && (tickLower || tickLower === 0)\n      ? pool.tickCurrent < tickLower || pool.tickCurrent >= tickUpper\n      : false;\n\n  const token0USDPrice = useUSDPriceById(position?.pool.token0.address);\n  const token1USDPrice = useUSDPriceById(position?.pool.token1.address);\n\n  const totalUSDValue = useMemo(() => {\n    if (!position || !token0USDPrice || !token1USDPrice) return undefined;\n\n    const totalUSD = new BigNumber(token0USDPrice)\n      .multipliedBy(position.amount0.toExact())\n      .plus(new BigNumber(token1USDPrice).multipliedBy(position.amount1.toExact()));\n\n    return totalUSD.toString();\n  }, [position, token0USDPrice, token1USDPrice]);\n\n  const handlePrincipalChange = (principal: string) => {\n    setPrincipal(principal);\n  };\n\n  const handleTransfer = async () => {\n    if (!principal || !position || !userPrincipal) return;\n\n    setLoading(true);\n\n    const poolId = position.pool.id;\n\n    const loadingKey = openLoadingTip(t`Transferring your position, ID is ${positionId}`);\n\n    const { status, message } = resultFormat<boolean>(\n      await (\n        await swapPool(poolId, true)\n      ).transferPosition(userPrincipal, Principal.fromText(principal), BigInt(positionId)),\n    );\n\n    if (status === ResultStatus.OK) {\n      openSuccessTip(t`Transfer successfully`);\n      onClose();\n      if (onTransferSuccess) onTransferSuccess();\n    } else {\n      openErrorTip(message ?? t`Failed to transfer`);\n    }\n\n    setLoading(false);\n\n    closeLoadingTip(loadingKey);\n  };\n\n  let error: string | undefined;\n  if (principal && !isValidPrincipal(principal)) error = \"Invalid principal ID\";\n  if (!principal) error = \"Enter the principal ID\";\n\n  return (\n    <SwapModal open={open} title={t`Transfer position`} onClose={onClose}>\n      <Grid className={classes.positionContainer} container>\n        {!position && <Loading loading={!position} circularSize={28} />}\n\n        <Grid item xs>\n          <Grid container alignItems=\"center\">\n            <Grid item>\n              <CurrenciesAvatar\n                currencyA={currencyBase}\n                currencyB={currencyQuote}\n                borderColor={isDarkTheme(theme) ? \"rgba(189, 200, 240, 0.4)\" : \"rgba(255, 255, 255, 0.4)\"}\n                bgColor={isDarkTheme(theme) ? \"#412755\" : \"#DADADA\"}\n                size={matchDownMD ? \"20px\" : \"24px\"}\n              />\n            </Grid>\n            <Grid item mx={1}>\n              <Typography color=\"textPrimary\" fontSize={matchDownMD ? 14 : 16} fontWeight={500}>\n                {currencyBase?.symbol}/{currencyQuote?.symbol}\n              </Typography>\n            </Grid>\n            <Grid item>\n              <Chip\n                label={feeAmount ? feeAmountToPercentage(feeAmount) : DEFAULT_PERCENT_SYMBOL}\n                sx={{\n                  borderRadius: \"8px\",\n                  height: matchDownMD ? \"22px\" : \"24px\",\n                  \"& span\": { padding: matchDownMD ? \"2px\" : \"5px\", fontSize: matchDownMD ? \"12px\" : \"14px\" },\n                  backgroundColor: isDarkTheme(theme) ? \"#4F5A84\" : \"#EFEFFF\",\n                }}\n              />\n            </Grid>\n          </Grid>\n\n          {!closed ? (\n            <Grid container mt=\"10px\">\n              <Typography>\n                <Trans>Value:</Trans>&nbsp;\n              </Typography>\n              <Typography color=\"text.primary\">{totalUSDValue ? formatDollarAmount(totalUSDValue) : \"--\"}</Typography>\n            </Grid>\n          ) : null}\n        </Grid>\n\n        <Grid item>\n          <Grid container>\n            <PositionStatus closed={closed} outOfRange={outOfRange} />\n          </Grid>\n        </Grid>\n      </Grid>\n\n      <PositionDetails\n        position={position}\n        positionId={positionId}\n        invalid={invalid}\n        showButtons={showButtons}\n        manuallyInverted={manuallyInverted}\n        setManuallyInverted={setManuallyInverted}\n        show\n        token0USDPrice={token0USDPrice}\n        token1USDPrice={token1USDPrice}\n        onPrincipalChange={handlePrincipalChange}\n      />\n\n      <Box mt=\"20px\">\n        <Button fullWidth size=\"medium\" variant=\"contained\" disabled={!!error || loading} onClick={handleTransfer}>\n          {error || <Trans>Transfer</Trans>}\n        </Button>\n      </Box>\n    </SwapModal>\n  );\n}\n","import React, { useState, useCallback, useMemo, useEffect, useContext, useRef } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Typography, Grid, Chip, Button, useMediaQuery, Box, Popper } from \"@mui/material\";\nimport { makeStyles, useTheme } from \"@mui/styles\";\nimport CurrenciesAvatar from \"components/CurrenciesAvatar\";\nimport { KeyboardArrowDown, KeyboardArrowUp, SyncAlt as SyncAltIcon } from \"@mui/icons-material\";\nimport { formatTickPrice } from \"utils/swap/formatTickPrice\";\nimport useIsTickAtLimit from \"hooks/swap/useIsTickAtLimit\";\nimport { Bound } from \"constants/swap\";\nimport { DEFAULT_PERCENT_SYMBOL, CurrencyAmountFormatDecimals } from \"constants/index\";\nimport { feeAmountToPercentage } from \"utils/swap/index\";\nimport CollectFeesModal from \"components/swap/CollectFeesModal\";\nimport { usePositionFees } from \"hooks/swap/usePositionFees\";\nimport { numberToString, BigNumber, formatDollarAmount } from \"@w2e/utils\";\nimport { CurrencyAmount, Position, getPriceOrderingFromPositionForUI, useInverter } from \"@w2e/swap-sdk\";\nimport { isDarkTheme, toFormat } from \"utils\";\nimport { Trans, t } from \"@lingui/macro\";\nimport { Theme } from \"@mui/material/styles\";\nimport { Loading } from \"components/index\";\nimport { useUSDPriceById } from \"hooks/useUSDPrice\";\nimport PositionContext from \"components/swap/PositionContext\";\nimport { isElement } from \"react-is\";\nimport { isMobile } from \"react-device-detect\";\nimport { ClickAwayListener } from \"@mui/base\";\n\nimport PositionStatus from \"./PositionRangeState\";\nimport TransferPosition from \"./TransferPosition\";\n\nconst useStyle = makeStyles((theme: Theme) => ({\n  positionContainer: {\n    position: \"relative\",\n    backgroundColor: theme.palette.background.level3,\n    borderRadius: `${theme.radius}px`,\n    border: theme.palette.border.gray200,\n    padding: \"24px 20px\",\n    marginTop: \"16px\",\n    cursor: \"pointer\",\n    overflow: \"hidden\",\n    \"&:first-child\": {\n      marginTop: \"0\",\n    },\n    [theme.breakpoints.down(\"md\")]: {\n      padding: \"16px 10px\",\n    },\n  },\n  detailContainer: {\n    backgroundColor: theme.palette.background.level3,\n    borderRadius: `${theme.radius}px`,\n    border: theme.palette.border.gray200,\n    padding: \"20px\",\n  },\n}));\n\nexport interface PositionDetailItemProps {\n  label: React.ReactChild;\n  value: React.ReactChild | undefined;\n  convert?: boolean;\n  onConvertClick?: () => void;\n}\n\nexport function PositionDetailItem({ label, value, convert, onConvertClick }: PositionDetailItemProps) {\n  const theme = useTheme() as Theme;\n  const matchDownSM = useMediaQuery(theme.breakpoints.down(\"sm\"));\n\n  return (\n    <Grid\n      container\n      sx={{\n        height: \"48px\",\n      }}\n      alignItems=\"center\"\n    >\n      <Grid item xs={4}>\n        <Typography {...(matchDownSM ? { fontSize: \"12px\" } : {})}>{label}</Typography>\n      </Grid>\n      <Grid item xs={8} container justifyContent=\"flex-end\">\n        {isElement(value) ? (\n          value\n        ) : (\n          <Typography {...(matchDownSM ? { fontSize: \"12px\" } : {})} color=\"textPrimary\">\n            {value}\n          </Typography>\n        )}\n\n        {convert && (\n          <SyncAltIcon sx={{ fontSize: \"1rem\", marginLeft: \"6px\", cursor: \"pointer\" }} onClick={onConvertClick} />\n        )}\n      </Grid>\n    </Grid>\n  );\n}\n\nexport interface PositionDetailsProps {\n  positionId: bigint;\n  invalid?: boolean;\n  showButtons?: boolean;\n  position: Position | undefined;\n  manuallyInverted: boolean;\n  setManuallyInverted: (manuallyInverted: boolean) => void;\n  show: boolean | undefined;\n  token0USDPrice: number | undefined;\n  token1USDPrice: number | undefined;\n}\n\nexport function PositionDetails({\n  position,\n  showButtons,\n  positionId,\n  invalid = false,\n  manuallyInverted,\n  setManuallyInverted,\n  show,\n  token0USDPrice,\n  token1USDPrice,\n}: PositionDetailsProps) {\n  const classes = useStyle();\n  const history = useHistory();\n  const moreRef = useRef(null);\n  const theme = useTheme() as Theme;\n\n  const [collectFeesShow, setCollectFeesShow] = useState(false);\n  const [reloadPositionFee, setReloadPositionFee] = useState(false);\n  const [transferPopperShow, setTransferPopperShow] = useState(false);\n  const [transferShow, setTransferShow] = useState(false);\n\n  const { updateCounter } = useContext(PositionContext);\n\n  const noLiquidity = position?.liquidity.toString() === \"0\";\n\n  const { pool, tickLower, tickUpper } = position || {};\n  const { token0, token1, fee: feeAmount } = pool || {};\n\n  const handleLoadRemoveLiquidity = useCallback(() => {\n    if (invalid) {\n      history.push(`/swap/liquidity/decrease/${String(positionId)}?invalid=true`);\n      return;\n    }\n    history.push(`/swap/liquidity/decrease/${String(positionId)}/${position?.pool.id}`);\n  }, [history, invalid, positionId]);\n\n  const handleLoadIncreaseLiquidity = useCallback(() => {\n    history.push(`/swap/liquidity/increase/${String(positionId)}/${position?.pool.id}`);\n  }, [token0, token1]);\n\n  const handleCollectFee = useCallback(() => {\n    setCollectFeesShow(true);\n  }, [setCollectFeesShow]);\n\n  const _tickAtLimit = useIsTickAtLimit(feeAmount, tickLower, tickUpper);\n  const pricesFromPosition = getPriceOrderingFromPositionForUI(position);\n\n  // handle manual inversion\n  const { priceLower, priceUpper, base } = useInverter({\n    priceLower: pricesFromPosition?.priceLower,\n    priceUpper: pricesFromPosition?.priceUpper,\n    quote: pricesFromPosition?.quote,\n    base: pricesFromPosition?.base,\n    invert: manuallyInverted,\n  });\n\n  const inverted = token1 ? base?.equals(token1) : undefined;\n\n  const tickAtLimit = useMemo(() => {\n    if (!inverted) return _tickAtLimit;\n\n    return {\n      [Bound.LOWER]: _tickAtLimit[Bound.UPPER] ? true : undefined,\n      [Bound.UPPER]: _tickAtLimit[Bound.LOWER] ? true : undefined,\n    };\n  }, [_tickAtLimit, inverted]);\n\n  const currencyQuote = inverted ? token0 : token1;\n  const currencyBase = inverted ? token1 : token0;\n\n  const pairName = useMemo(() => {\n    return `${currencyQuote?.symbol} per ${currencyBase?.symbol}`;\n  }, [currencyQuote, currencyBase]);\n\n  const { amount0: feeAmount0, amount1: feeAmount1 } = usePositionFees(\n    position?.pool.id,\n    positionId,\n    reloadPositionFee,\n  );\n\n  const currencyFeeAmount0 = useMemo(() => {\n    if (!token0 || feeAmount0 === undefined) return undefined;\n    return CurrencyAmount.fromRawAmount(token0, numberToString(new BigNumber(feeAmount0.toString())));\n  }, [feeAmount0, token0]);\n\n  const currencyFeeAmount1 = useMemo(() => {\n    if (!token1 || feeAmount1 === undefined) return undefined;\n    return CurrencyAmount.fromRawAmount(token1, numberToString(new BigNumber(feeAmount1.toString())));\n  }, [feeAmount1, token1]);\n\n  const handleClaimedSuccessfully = () => {\n    setReloadPositionFee(!reloadPositionFee);\n  };\n\n  const hasUnclaimedFees = useMemo(() => {\n    if (!feeAmount0 && !feeAmount1) return false;\n    return true;\n  }, [feeAmount0, feeAmount1]);\n\n  const matchDownSM = useMediaQuery(theme.breakpoints.down(\"sm\"));\n\n  const handleTransferSuccess = () => {\n    updateCounter();\n  };\n\n  return (\n    <>\n      <Grid mt={1} className={classes.detailContainer} sx={{ display: show ? \"block\" : \"none\" }}>\n        <PositionDetailItem label={t`Position ID`} value={positionId.toString()} />\n        <PositionDetailItem\n          label={t`${currencyQuote?.symbol} Amount`}\n          value={\n            inverted\n              ? toFormat(position?.amount0.toFixed(CurrencyAmountFormatDecimals(position?.amount0.currency.decimals)))\n              : toFormat(position?.amount1.toFixed(CurrencyAmountFormatDecimals(position?.amount1.currency.decimals)))\n          }\n        />\n        <PositionDetailItem\n          label={t`${currencyBase?.symbol} Amount`}\n          value={\n            inverted\n              ? toFormat(position?.amount1.toFixed(CurrencyAmountFormatDecimals(position?.amount1.currency.decimals)))\n              : toFormat(position?.amount0.toFixed(CurrencyAmountFormatDecimals(position?.amount0.currency.decimals)))\n          }\n        />\n        <PositionDetailItem\n          label={t`Current Price`}\n          value={\n            !!token1 && !!token0\n              ? inverted\n                ? pool?.priceOf(token1)\n                  ? `${toFormat(pool?.priceOf(token1).toSignificant(6))} ${pairName}`\n                  : \"--\"\n                : pool?.priceOf(token0)\n                  ? `${toFormat(pool?.priceOf(token0).toSignificant(6))} ${pairName}`\n                  : \"--\"\n              : \"--\"\n          }\n          convert\n          onConvertClick={() => setManuallyInverted(!manuallyInverted)}\n        />\n        <PositionDetailItem\n          label={t`Price Range`}\n          value={`${formatTickPrice(priceLower, tickAtLimit, Bound.LOWER)} - ${formatTickPrice(\n            priceUpper,\n            tickAtLimit,\n            Bound.UPPER,\n          )} ${pairName}`}\n          convert\n          onConvertClick={() => setManuallyInverted(!manuallyInverted)}\n        />\n        <PositionDetailItem\n          label={t`Unclaimed fees`}\n          value={\n            <Box>\n              <Typography\n                color=\"text.primary\"\n                align=\"right\"\n                sx={{\n                  \"@media(max-width: 640px)\": {\n                    fontSize: \"12px\",\n                  },\n                }}\n              >\n                {currencyFeeAmount0 !== undefined || currencyFeeAmount1 !== undefined\n                  ? `${toFormat(\n                    new BigNumber(currencyFeeAmount0 ? currencyFeeAmount0.toExact() : 0).toFixed(8),\n                  )} ${token0?.symbol} and ${toFormat(\n                    new BigNumber(currencyFeeAmount1 ? currencyFeeAmount1.toExact() : 0).toFixed(8),\n                  )} ${token1?.symbol}`\n                  : \"--\"}\n              </Typography>\n              <Typography\n                mt=\"5px\"\n                align=\"right\"\n                sx={{\n                  \"@media(max-width: 640px)\": {\n                    fontSize: \"12px\",\n                  },\n                }}\n              >\n                {currencyFeeAmount0 !== undefined &&\n                  currencyFeeAmount1 !== undefined &&\n                  !!token0USDPrice &&\n                  !!token1USDPrice\n                  ? formatDollarAmount(\n                    new BigNumber(currencyFeeAmount0 ? currencyFeeAmount0.toExact() : 0)\n                      .multipliedBy(token0USDPrice)\n                      .plus(\n                        new BigNumber(currencyFeeAmount1 ? currencyFeeAmount1.toExact() : 0).multipliedBy(\n                          token1USDPrice,\n                        ),\n                      )\n                      .toString(),\n                  )\n                  : \"--\"}\n              </Typography>\n            </Box>\n          }\n        />\n        {showButtons && (\n          <Box\n            mt={3}\n            sx={{\n              display: \"grid\",\n              gridTemplateColumns: matchDownSM ? \"1fr\" : !hasUnclaimedFees ? \"1fr 1fr 40px\" : \"1fr 1fr 1fr 40px\",\n              gap: matchDownSM ? \"20px 0\" : \"0 20px\",\n            }}\n          >\n            {!noLiquidity ? (\n              <Button\n                fullWidth\n                variant=\"outlined\"\n                size={matchDownSM ? \"medium\" : \"medium\"}\n                onClick={handleLoadRemoveLiquidity}\n              >\n                <Trans>Remove Liquidity</Trans>\n              </Button>\n            ) : (\n              <Box />\n            )}\n            {hasUnclaimedFees ? (\n              <Button fullWidth variant=\"outlined\" size={matchDownSM ? \"medium\" : \"medium\"} onClick={handleCollectFee}>\n                <Trans>Claim fees</Trans>\n              </Button>\n            ) : null}\n            {!invalid ? (\n              <Button\n                fullWidth\n                variant=\"contained\"\n                size={matchDownSM ? \"medium\" : \"medium\"}\n                onClick={handleLoadIncreaseLiquidity}\n              >\n                <Trans>Increase Liquidity</Trans>\n              </Button>\n            ) : (\n              <Box />\n            )}\n\n            {!isMobile ? (\n              <Box\n                ref={moreRef}\n                onMouseEnter={() => setTransferPopperShow(true)}\n                onMouseLeave={() => setTransferPopperShow(false)}\n              >\n                <Box\n                  sx={{\n                    display: \"flex\",\n                    width: \"100%\",\n                    height: \"100%\",\n                    gap: \"0 5px\",\n                    alignItems: \"center\",\n                    cursor: \"pointer\",\n                  }}\n                >\n                  <Box sx={{ width: \"4px\", height: \"4px\", borderRadius: \"50%\", background: \"#4F5A84\" }} />\n                  <Box sx={{ width: \"4px\", height: \"4px\", borderRadius: \"50%\", background: \"#4F5A84\" }} />\n                  <Box sx={{ width: \"4px\", height: \"4px\", borderRadius: \"50%\", background: \"#4F5A84\" }} />\n                </Box>\n\n                <Popper\n                  open={transferPopperShow}\n                  anchorEl={moreRef?.current}\n                  placement=\"top\"\n                  popperOptions={{\n                    modifiers: [\n                      {\n                        name: \"offset\",\n                        options: {\n                          offset: [-30, 0],\n                        },\n                      },\n                    ],\n                  }}\n                >\n                  <ClickAwayListener onClickAway={() => setTransferPopperShow(false)}>\n                    <Box\n                      sx={{\n                        padding: \"16px\",\n                        borderRadius: \"12px\",\n                        background: theme.palette.background.level1,\n                        cursor: \"pointer\",\n                      }}\n                      onClick={() => {\n                        setTransferShow(true);\n                        setTransferPopperShow(false);\n                      }}\n                    >\n                      <Typography color=\"text.primary\">\n                        <Trans>Transfer position</Trans>\n                      </Typography>\n                    </Box>\n                  </ClickAwayListener>\n                </Popper>\n              </Box>\n            ) : null}\n          </Box>\n        )}\n      </Grid>\n\n      <CollectFeesModal\n        pool={pool}\n        positionId={positionId}\n        open={collectFeesShow}\n        currencyFeeAmount0={currencyFeeAmount0}\n        currencyFeeAmount1={currencyFeeAmount1}\n        onClose={() => {\n          setCollectFeesShow(false);\n        }}\n        onClaimedSuccessfully={handleClaimedSuccessfully}\n      />\n\n      {transferShow ? (\n        <TransferPosition\n          closed={closed}\n          open={transferShow}\n          position={position}\n          positionId={positionId}\n          onClose={() => setTransferShow(false)}\n          onTransferSuccess={handleTransferSuccess}\n        />\n      ) : null}\n    </>\n  );\n}\n\nexport interface PositionItemProps {\n  positionId: bigint;\n  invalid?: boolean;\n  showButtons?: boolean;\n  position: Position | undefined;\n  closed: boolean;\n}\n\nexport default function PositionItem({\n  position,\n  showButtons,\n  positionId,\n  invalid = false,\n  closed,\n}: PositionItemProps) {\n  const classes = useStyle();\n  const theme = useTheme() as Theme;\n\n  const matchDownMD = useMediaQuery(theme.breakpoints.down(\"md\"));\n\n  const [detailShow, setDetailShow] = useState<boolean | undefined>(undefined);\n\n  const handleToggleShow = useCallback(() => {\n    if (!position) return;\n    setDetailShow(!detailShow);\n  }, [detailShow, setDetailShow, position]);\n\n  const { pool, tickLower, tickUpper } = position || {};\n  const { token0, token1, fee: feeAmount } = pool || {};\n\n  const pricesFromPosition = getPriceOrderingFromPositionForUI(position);\n  const [manuallyInverted, setManuallyInverted] = useState(false);\n\n  // handle manual inversion\n  const { base } = useInverter({\n    priceLower: pricesFromPosition?.priceLower,\n    priceUpper: pricesFromPosition?.priceUpper,\n    quote: pricesFromPosition?.quote,\n    base: pricesFromPosition?.base,\n    invert: manuallyInverted,\n  });\n\n  const inverted = token1 ? base?.equals(token1) : undefined;\n\n  const currencyQuote = inverted ? token0 : token1;\n  const currencyBase = inverted ? token1 : token0;\n\n  const outOfRange =\n    pool && (tickUpper || tickUpper === 0) && (tickLower || tickLower === 0)\n      ? pool.tickCurrent < tickLower || pool.tickCurrent >= tickUpper\n      : false;\n\n  const token0USDPrice = useUSDPriceById(position?.pool.token0.address);\n  const token1USDPrice = useUSDPriceById(position?.pool.token1.address);\n\n  const totalUSDValue = useMemo(() => {\n    if (!position || !token0USDPrice || !token1USDPrice) return undefined;\n\n    const totalUSD = new BigNumber(token0USDPrice)\n      .multipliedBy(position.amount0.toExact())\n      .plus(new BigNumber(token1USDPrice).multipliedBy(position.amount1.toExact()));\n\n    return totalUSD.toString();\n  }, [position, token0USDPrice, token1USDPrice]);\n\n  const { setAllPositionsUSDValue } = useContext(PositionContext);\n\n  const positionKey = useMemo(() => {\n    if (!position) return undefined;\n    return `${position.pool.id}_${positionId.toString()}`;\n  }, [position, positionId]);\n\n  useEffect(() => {\n    if (!!totalUSDValue && !!positionKey) {\n      setAllPositionsUSDValue(positionKey, new BigNumber(totalUSDValue));\n    }\n  }, [totalUSDValue, positionKey]);\n\n  return (\n    <>\n      <Grid className={classes.positionContainer} container onClick={handleToggleShow}>\n        {!position && <Loading loading={!position} circularSize={28} />}\n\n        <Grid item xs>\n          <Grid container alignItems=\"center\">\n            <Grid item>\n              <CurrenciesAvatar\n                currencyA={currencyBase}\n                currencyB={currencyQuote}\n                borderColor={isDarkTheme(theme) ? \"rgba(189, 200, 240, 0.4)\" : \"rgba(255, 255, 255, 0.4)\"}\n                bgColor={isDarkTheme(theme) ? \"#273155\" : \"#DADADA\"}\n                size={matchDownMD ? \"20px\" : \"24px\"}\n              />\n            </Grid>\n            <Grid item mx={1}>\n              <Typography color=\"textPrimary\" fontSize={matchDownMD ? 14 : 16} fontWeight={500}>\n                {currencyBase?.symbol}/{currencyQuote?.symbol}\n              </Typography>\n            </Grid>\n            <Grid item>\n              <Chip\n                label={feeAmount ? feeAmountToPercentage(feeAmount) : DEFAULT_PERCENT_SYMBOL}\n                sx={{\n                  borderRadius: \"8px\",\n                  height: matchDownMD ? \"22px\" : \"24px\",\n                  \"& span\": { padding: matchDownMD ? \"2px\" : \"5px\", fontSize: matchDownMD ? \"12px\" : \"14px\" },\n                  backgroundColor: isDarkTheme(theme) ? \"#4F5A84\" : \"#EFEFFF\",\n                }}\n              />\n            </Grid>\n          </Grid>\n\n          {!closed ? (\n            <Grid container mt=\"10px\">\n              <Typography>\n                <Trans>Value:</Trans>&nbsp;\n              </Typography>\n              <Typography color=\"text.primary\">{totalUSDValue ? formatDollarAmount(totalUSDValue) : \"--\"}</Typography>\n            </Grid>\n          ) : null}\n        </Grid>\n\n        <Grid item>\n          <Grid container>\n            <PositionStatus closed={closed} outOfRange={outOfRange} />\n            <Grid item ml={matchDownMD ? \"5px\" : \"10px\"}>\n              <Grid container alignItems=\"center\">\n                {detailShow ? <KeyboardArrowUp /> : <KeyboardArrowDown />}\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n      </Grid>\n\n      {typeof detailShow !== \"boolean\" ? null : (\n        <PositionDetails\n          position={position}\n          positionId={positionId}\n          invalid={invalid}\n          showButtons={showButtons}\n          manuallyInverted={manuallyInverted}\n          setManuallyInverted={setManuallyInverted}\n          show={detailShow}\n          token0USDPrice={token0USDPrice}\n          token1USDPrice={token1USDPrice}\n        />\n      )}\n    </>\n  );\n}\n","import { useEffect, useMemo, useState } from \"react\";\nimport { Typography, Box } from \"@mui/material\";\nimport PositionItemComponent from \"components/swap/PositionItem\";\nimport { usePosition } from \"hooks/swap/usePosition\";\nimport { Trans } from \"@lingui/macro\";\nimport { NoData, MainCard, LoadingRow, TextButton, FindPositionsModal } from \"components/index\";\nimport BigNumber from \"bignumber.js\";\nimport { useAccountPrincipalString } from \"store/auth/hooks\";\nimport PositionContext from \"components/swap/PositionContext\";\nimport { useUserAllPositions } from \"hooks/swap/useUserAllPositions\";\nimport { UserPosition } from \"types/swap\";\nimport { useInitialUserPositionPools } from \"store/hooks\";\nimport { formatDollarAmount } from \"@w2e/utils\";\n\nfunction hasLiquidity(position: UserPosition | undefined) {\n  return position?.liquidity?.toString() !== \"0\";\n}\n\ninterface PositionItemProps {\n  position: UserPosition;\n}\n\nfunction PositionItem({ position: positionDetail }: PositionItemProps) {\n  const { position } = usePosition({\n    poolId: positionDetail.id,\n    tickLower: positionDetail.tickLower,\n    tickUpper: positionDetail.tickUpper,\n    liquidity: positionDetail.liquidity,\n  });\n\n  const noLiquidity = !hasLiquidity(positionDetail);\n\n  return noLiquidity ? null : (\n    <PositionItemComponent\n      closed={noLiquidity}\n      position={position}\n      positionId={BigInt(positionDetail.index)}\n      showButtons\n    />\n  );\n}\n\nexport default function Positions() {\n  const principal = useAccountPrincipalString();\n\n  const [findPositionsOpen, setFindPositionsOpen] = useState(false);\n  const [allPositionsUSDKeyValue, setAllPositionsUSDValue] = useState<\n    { [id: string]: BigNumber | undefined } | undefined\n  >({});\n  const [counter, setCounter] = useState<number>(0);\n\n  const { result: positions, loading } = useUserAllPositions(counter);\n\n  const { loading: initialUserPositionPoolsLoading } = useInitialUserPositionPools();\n\n  const hasLiquidityPositions = useMemo(() => {\n    return positions.filter((position) => hasLiquidity(position)).length !== 0;\n  }, [positions]);\n\n  const handleAllPositionsUSDValue = (id: string, usdValue: BigNumber) => {\n    setAllPositionsUSDValue((prevState) => ({\n      ...prevState,\n      [id]: usdValue,\n    }));\n  };\n\n  // reset all positions usd value when account change\n  useEffect(() => {\n    setAllPositionsUSDValue(undefined);\n  }, [principal]);\n\n  const updateCounter = () => {\n    setCounter(counter + 1);\n  };\n\n  const allPositionsUSDValue = useMemo(() => {\n    if (!allPositionsUSDKeyValue) return undefined;\n\n    return Object.values(allPositionsUSDKeyValue).reduce((prev, curr) => {\n      return prev?.plus(curr ?? 0);\n    }, new BigNumber(0));\n  }, [allPositionsUSDKeyValue]);\n\n  return (\n    <PositionContext.Provider\n      value={{ allPositionsUSDValue, setAllPositionsUSDValue: handleAllPositionsUSDValue, counter, updateCounter }}\n    >\n      <MainCard level={1} className=\"lightGray200\">\n        <Typography variant=\"h3\" color=\"textPrimary\">\n          <Trans>Your Positions</Trans>\n        </Typography>\n\n        <Box mt=\"5px\" mb=\"10px\">\n          <Typography component=\"span\">\n            <Trans>Total Value:</Trans>&nbsp;\n          </Typography>\n          <Typography component=\"span\" color=\"text.primary\">\n            {allPositionsUSDValue ? formatDollarAmount(allPositionsUSDValue.toString()) : \"--\"}\n          </Typography>\n        </Box>\n\n        <Box mt=\"5px\" mb=\"10px\">\n          <Typography component=\"span\">\n            <Trans>Don't see a pair you joined?</Trans>&nbsp;\n          </Typography>\n          <TextButton onClick={() => setFindPositionsOpen(true)}>\n            <Trans>Find other positions</Trans>\n          </TextButton>\n        </Box>\n\n        {(loading || initialUserPositionPoolsLoading) && !!principal ? (\n          <LoadingRow>\n            <div />\n            <div />\n            <div />\n            <div />\n            <div />\n            <div />\n            <div />\n            <div />\n          </LoadingRow>\n        ) : (\n          <>\n            {!hasLiquidityPositions || positions?.length === 0 ? (\n              <Box mt={2}>\n                <NoData />\n              </Box>\n            ) : null}\n            <Box>\n              {positions.map((position) => (\n                <PositionItem key={`${position.id}_${position.index}`} position={position} />\n              ))}\n            </Box>\n          </>\n        )}\n      </MainCard>\n\n      <FindPositionsModal open={findPositionsOpen} onClose={() => setFindPositionsOpen(false)} />\n    </PositionContext.Provider>\n  );\n}\n","import { getSwapPosition } from \"@w2e/hooks\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { UserPosition } from \"types/swap\";\nimport { useStoreUserPositionPools } from \"store/hooks\";\nimport { useAccountPrincipal } from \"store/auth/hooks\";\nimport { getUserPositionIds } from \"./useUserPositionIds\";\n\ntype UserPositions = {\n  positions: bigint[];\n  poolId: string;\n};\n\nexport function useUserAllPositions(refresh?: number) {\n  const [loading, setLoading] = useState(true);\n  const [positions, setPositions] = useState<UserPosition[]>([]);\n\n  const principal = useAccountPrincipal();\n\n  const userPositionPools = useStoreUserPositionPools();\n\n  useEffect(() => {\n    async function call() {\n      if (userPositionPools && !!principal) {\n        if (userPositionPools.length === 0) {\n          setLoading(false);\n          setPositions([]);\n        } else {\n          const userPositionsResult = (\n            await Promise.all(\n              userPositionPools.map(async (poolId: string) => {\n                return await getUserPositionIds(poolId, principal.toString());\n              }),\n            )\n          )\n            .map((positions, index) => (positions ? { positions, poolId: userPositionPools[index] } : undefined))\n            .filter((ele) => !!ele) as UserPositions[];\n\n          const positions = await Promise.all(\n            userPositionsResult\n              .reduce((prev, curr) => {\n                return prev.concat(curr.positions.map((index) => [curr.poolId, index]));\n              }, [] as [string, bigint][])\n              .map(async ([canisterId, index]) => {\n                const position = await getSwapPosition(canisterId, index);\n                return { ...position, id: canisterId, index: Number(index) };\n              }),\n          );\n\n          setPositions(positions.filter((position) => !!position) as UserPosition[]);\n          setLoading(false);\n        }\n      } else if (!principal) {\n        setPositions([]);\n      }\n    }\n\n    call();\n  }, [userPositionPools, principal, refresh]);\n\n  return useMemo(() => ({ loading, result: positions }), [positions, loading]);\n}\n\nexport function useUserPoolPositions(poolId: string | undefined, refresh?: number) {\n  const [loading, setLoading] = useState(false);\n  const [positions, setPositions] = useState<UserPosition[]>([]);\n\n  const principal = useAccountPrincipal();\n\n  useEffect(() => {\n    async function call() {\n      if (!!principal && poolId) {\n        setLoading(true);\n\n        const userPositionsResult = await getUserPositionIds(poolId, principal.toString());\n\n        if (userPositionsResult) {\n          const positions = await Promise.all(\n            userPositionsResult.map(async (index) => {\n              const position = await getSwapPosition(poolId, index);\n              return { ...position, id: poolId, index: Number(index) };\n            }),\n          );\n\n          setPositions(positions.filter((position) => !!position) as UserPosition[]);\n        }\n\n        setLoading(false);\n      } else {\n        setPositions([]);\n      }\n    }\n\n    call();\n  }, [principal, refresh, poolId]);\n\n  return useMemo(() => ({ loading, result: positions }), [positions, loading]);\n}\n","import { useCallback } from \"react\";\nimport { resultFormat } from \"@w2e/utils\";\nimport { globalIndex } from \"@w2e/actor\";\nimport { AllPoolsTVL, AllTokensTVL, PoolLatestTVL, PublicProtocolData, TokenLatestTVL } from \"@w2e/types\";\nimport { useCallsData } from \"../useCallData\";\n\n// Global\nexport async function getAllPoolsTVL() {\n  return resultFormat<AllPoolsTVL>(await (await globalIndex()).getAllPoolTvl()).data;\n}\n\nexport function useAllPoolsTVL() {\n  return useCallsData(\n    useCallback(async () => {\n      return await getAllPoolsTVL();\n    }, []),\n  );\n}\n\nexport async function getAllTokensTVL() {\n  return resultFormat<AllTokensTVL>(await (await globalIndex()).getAllTokenTvl()).data;\n}\n\nexport function useAllTokensTVL() {\n  return useCallsData(\n    useCallback(async () => {\n      return await getAllTokensTVL();\n    }, []),\n  );\n}\n\nexport async function getSwapProtocolData() {\n  return resultFormat<PublicProtocolData>(await (await globalIndex()).getProtocolData()).data;\n}\n\nexport function useSwapProtocolData() {\n  return useCallsData(\n    useCallback(async () => {\n      return await getSwapProtocolData();\n    }, []),\n  );\n}\n\nexport async function getPoolLatestTVL(id: string) {\n  return resultFormat<PoolLatestTVL>(await (await globalIndex()).getPoolLastTvl(id)).data;\n}\n\nexport function usePoolLatestTVL(id: string | undefined) {\n  return useCallsData(\n    useCallback(async () => {\n      if (!id) return undefined;\n      return await getPoolLatestTVL(id!);\n    }, [id]),\n  );\n}\n\nexport async function getTokenLatestTVL(id: string) {\n  return resultFormat<TokenLatestTVL>(await (await globalIndex()).getTokenLastTvl(id)).data;\n}\n\nexport function useTokenLatestTVL(id: string | undefined) {\n  return useCallsData(\n    useCallback(async () => {\n      if (!id) return undefined;\n      return await getTokenLatestTVL(id!);\n    }, [id]),\n  );\n}\n\nexport async function getGlobalLatestStorageCanister() {\n  return resultFormat<string>(await (await globalIndex()).globalLastStorageCanister()).data;\n}\n\nexport function useGlobalLatestStorageCanister() {\n  return useCallsData(\n    useCallback(async () => {\n      return await getGlobalLatestStorageCanister();\n    }, []),\n  );\n}\n\nexport async function getGlobalStorageCanister() {\n  return resultFormat<string[]>(await (await globalIndex()).globalStorageCanister()).data;\n}\n\nexport function useGlobalStorageCanister() {\n  return useCallsData(\n    useCallback(async () => {\n      return await getGlobalStorageCanister();\n    }, []),\n  );\n}\n\nexport async function getTvlLatestStorageCanister() {\n  return resultFormat<string>(await (await globalIndex()).tvlLastStorageCanister()).data;\n}\n\nexport function useTvlLatestStorageCanister() {\n  return useCallsData(\n    useCallback(async () => {\n      return await getTvlLatestStorageCanister();\n    }, []),\n  );\n}\n\nexport async function getTvlStorageCanister() {\n  return resultFormat<string[]>(await (await globalIndex()).tvlStorageCanister()).data;\n}\n\nexport function useTvlStorageCanister() {\n  return useCallsData(\n    useCallback(async () => {\n      return await getTvlStorageCanister();\n    }, []),\n  );\n}\n","import { useMemo } from \"react\";\nimport { Box } from \"@mui/material\";\nimport { makeStyles } from \"@mui/styles\";\nimport { isDarkTheme } from \"utils/index\";\nimport { Theme } from \"@mui/material/styles\";\nimport LoadingRow from \"components/Loading/LoadingRow\";\nimport PoolCard from \"components/swap/PoolCard\";\nimport { useAllPoolsTVL, useInfoAllPools } from \"@w2e/hooks\";\n\nconst useStyles = makeStyles((theme: Theme) => {\n  const bgOpacity = isDarkTheme(theme) ? \"0.34\" : \"0.7\";\n\n  return {\n    wrapper: {\n      display: \"grid\",\n      gap: \"0 20px\",\n      gridTemplateColumns: \"repeat(4, 1fr)\",\n      overflow: \"hidden\",\n      width: \"100%\",\n      \"@media (max-width:1140px)\": {\n        gridGap: \"10px 10px\",\n        gridTemplateColumns: \"1fr 1fr\",\n      },\n      \"@media (max-width:640px)\": {\n        gridGap: \"10px 0\",\n        gridTemplateColumns: \"1fr\",\n      },\n      \"& .title\": {\n        color: \"rgba(255, 255, 255, 0.6)\",\n      },\n      \"& .value\": {\n        color: \"#ffffff\",\n      },\n    },\n    listWrapper: {\n      \"& .list-item\": {\n        position: \"relative\",\n        overflow: \"hidden\",\n        border: \"1px solid rgba(255, 255, 255, 0.04)\",\n      },\n      \"& .list-item-color-box\": {\n        position: \"absolute\",\n        left: \"10px\",\n        bottom: \"7px\",\n        width: \"98px\",\n        height: \"98px\",\n        filter: \"blur(34px)\",\n        zIndex: \"-1\",\n      },\n      \"&:first-child\": {\n        \"& .list-item\": {\n          background: `rgba(80, 95, 186, ${bgOpacity})`,\n        },\n        \"& .list-item-color-box\": {\n          background: \"#3644C2\",\n        },\n        \"& .feeAmount\": {\n          background: \"#4D5CA9\",\n        },\n      },\n      \"&:nth-of-type(2)\": {\n        \"& .list-item\": {\n          background: `rgba(101, 80, 186, ${bgOpacity})`,\n        },\n        \"& .list-item-color-box\": {\n          background: \"#5D0A9E\",\n        },\n        \"& .feeAmount\": {\n          background: \"#654DA9\",\n        },\n      },\n      \"&:nth-of-type(3)\": {\n        \"& .list-item\": {\n          background: `rgba(45, 148, 243, ${bgOpacity})`,\n        },\n        \"& .list-item-color-box\": {\n          background: \"#0A609E\",\n        },\n        \"& .feeAmount\": {\n          background: \"#2D94F3\",\n        },\n      },\n      \"&:nth-of-type(4)\": {\n        \"& .list-item\": {\n          background: `rgba(162, 88, 145, ${bgOpacity})`,\n        },\n        \"& .list-item-color-box\": {\n          background: \"#9E0A8F\",\n        },\n        \"& .feeAmount\": {\n          background: \"#833780\",\n        },\n      },\n    },\n  };\n});\n\nexport default function PoolList() {\n  const classes = useStyles();\n\n  const { result: pools, loading } = useInfoAllPools();\n  const { result: allPoolsTVL, loading: tvlLoading } = useAllPoolsTVL();\n\n  const poolList = useMemo(() => {\n    if (!pools || !allPoolsTVL) return [];\n\n    return pools\n      .sort((a, b) => {\n        if (a.totalVolumeUSD > b.totalVolumeUSD) {\n          return -1;\n        }\n        return 1;\n      })\n      .filter((pool) => pool.feeTier === BigInt(3000))\n      .slice(0, 4)\n      .map((pool) => {\n        const tvlUSD = allPoolsTVL.find((poolTVL) => poolTVL[0] === pool.pool);\n        return { ...pool, tvlUSD: tvlUSD ? tvlUSD[1] : 0 };\n      });\n  }, [pools, allPoolsTVL]);\n\n  return loading || tvlLoading ? (\n    <LoadingRow>\n      <div />\n      <div />\n      <div />\n      <div />\n      <div />\n      <div />\n      <div />\n      <div />\n    </LoadingRow>\n  ) : (\n    <Box className={classes.wrapper}>\n      {poolList.map((pool, index) => (\n        <Box className={classes.listWrapper} key={index}>\n          <PoolCard\n            token0={pool.token0Id}\n            token1={pool.token1Id}\n            fee={pool.feeTier}\n            token0Symbol={pool.token0Symbol}\n            token1Symbol={pool.token1Symbol}\n            tvlUSD={pool.tvlUSD}\n            totalVolumeUSD={pool.totalVolumeUSD}\n          />\n        </Box>\n      ))}\n    </Box>\n  );\n}\n","import { useEffect } from \"react\";\nimport { Box } from \"@mui/material\";\nimport SwapWrapper from \"components/swap/SwapUIWrapper\";\nimport { useSwapPools } from \"@w2e/hooks\";\nimport { usePoolStandardManager } from \"store/global/hooks\";\nimport { useUpdateTokenStandard } from \"store/token/cache/hooks\";\nimport { TOKEN_STANDARD } from \"constants/tokens\";\nimport LiquidityPoolIntro from \"components/swap/LiquidityPoolIntro\";\nimport { TextButton, LoadingRow } from \"components/index\";\nimport { Trans } from \"@lingui/macro\";\nimport Positions from \"./Positions\";\nimport PoolList from \"./PoolList\";\n\nexport default function Liquidity() {\n  const [isInitialed, updatePoolStandardInitialed] = usePoolStandardManager();\n\n  const { result: pools } = useSwapPools();\n\n  const updateTokenStandard = useUpdateTokenStandard();\n\n  useEffect(() => {\n    const trigger = (updatedNum: number) => {\n      if (pools && updatedNum === pools.length) {\n        updatePoolStandardInitialed(true);\n      }\n    };\n\n    const call = () => {\n      if (pools && pools.length && !isInitialed) {\n        let updatedNum = 0;\n        for (let i = 0; i < pools.length; i++) {\n          const pool = pools[i];\n          updateTokenStandard({ canisterId: pool.token0.address, standard: pool.token0.standard as TOKEN_STANDARD });\n          updateTokenStandard({ canisterId: pool.token1.address, standard: pool.token1.standard as TOKEN_STANDARD });\n\n          updatedNum++;\n          trigger(updatedNum);\n        }\n      } else if (pools && pools.length === 0) {\n        updatePoolStandardInitialed(true);\n      }\n    };\n\n    call();\n  }, [pools]);\n\n  return (\n    <SwapWrapper>\n      {!isInitialed ? (\n        <LoadingRow>\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n        </LoadingRow>\n      ) : (\n        <>\n          <PoolList />\n          <Box\n            sx={{\n              margin: \"32px 0 0 0\",\n              display: \"flex\",\n              gap: \"0 16px\",\n              \"@media(max-width: 980px)\": {\n                flexDirection: \"column\",\n                gap: \"16px 0\",\n              },\n            }}\n          >\n            <Box sx={{ flex: 1 }}>\n              <LiquidityPoolIntro />\n\n              <Box sx={{ width: \"100%\", display: \"flex\", margin: \"5px 0 0 0\", justifyContent: \"flex-end\" }}>\n                <TextButton to=\"/swap/pcm/reclaim\">\n                  <Trans>Withdraw unused swap pool creation fees</Trans>\n                </TextButton>\n              </Box>\n            </Box>\n\n            <Box sx={{ flex: 1, height: \"100%\" }}>\n              <Positions />\n            </Box>\n          </Box>\n        </>\n      )}\n    </SwapWrapper>\n  );\n}\n","import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z\"\n}), 'KeyboardArrowDown');","import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z\"\n}), 'KeyboardArrowUp');","import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"m18 12 4-4-4-4v3H3v2h15zM6 12l-4 4 4 4v-3h15v-2H6z\"\n}), 'SyncAlt');","import { Position } from \"../entities/position\";\n\nexport function getPriceOrderingFromPositionForUI(position: Position | undefined) {\n  if (!position) return {};\n\n  const token0 = position.amount0.currency;\n  const token1 = position.amount1.currency;\n\n  // if both prices are below 1, invert\n  if (position.token0PriceUpper.lessThan(1)) {\n    return {\n      priceLower: position.token0PriceUpper.invert(),\n      priceUpper: position.token0PriceLower.invert(),\n      quote: token0,\n      base: token1,\n    };\n  }\n\n  // otherwise, just return the default\n  return {\n    priceLower: position.token0PriceLower,\n    priceUpper: position.token0PriceUpper,\n    quote: token1,\n    base: token0,\n  };\n}\n","import { Token } from \"../core/entities/token\";\nimport { Price } from \"../core/entities/fractions/price\";\n\ninterface useInverterProps {\n  priceLower: Price<Token, Token> | undefined;\n  priceUpper: Price<Token, Token> | undefined;\n  quote: Token | undefined;\n  base: Token | undefined;\n  invert: boolean;\n}\n\nexport function useInverter({ priceLower, priceUpper, quote, base, invert }: useInverterProps) {\n  return {\n    priceUpper: invert ? priceLower?.invert() : priceUpper,\n    priceLower: invert ? priceUpper?.invert() : priceLower,\n    quote: invert ? base : quote,\n    base: invert ? quote : base,\n  };\n}\n"],"names":["useStyles","makeStyles","floatLeft","float","avatarBox","clear","overflow","marginLeft","CurrenciesAvatar","_ref","currencyA","currencyB","borderColor","bgColor","size","classes","_jsxs","Box","className","children","_jsx","CurrencyAvatar","currency","avatar","width","height","border","concat","_ref2","Avatar","sx","bgcolor","src","logo","useStyle","button","LiquidityPoolIntro","version","history","useHistory","loadAddLiquidity","useCallback","push","MainCard","level","Typography","variant","align","color","Trans","id","mt","fontSize","Grid","container","justifyContent","item","Button","onClick","theme","topBox","listItem","padding","borderRadius","radius","cursor","poolName","margin","fontWeight","feeAmount","poolData","marginTop","PoolCard","_ref3","token0","token1","fee","totalVolumeUSD","tvlUSD","token0Symbol","token1Symbol","currency0","useToken","currency1","handlePoolClick","Number","alignItems","symbol","feeAmountToPercentage","flexDirection","xs","formatDollarAmount","wrapper","display","background","colors","darkPrimary400","darkLevel1","Marker","props","SvgIcon","viewBox","d","fill","Closed","component","OutOfRange","InRange","marginRight","PositionRangeState","outOfRange","closed","LinkIcon","xmlns","fillRule","clipRule","SwapWrapper","buttons","Wrapper","TabPanel","tabs","SwapV2Wrapper","value","i18n","_","path","key","position","top","_SwapWrapper","usePosition","userPosition","result","poolMetadata","useSwapPoolMetadata","poolId","address","poolState","pool","usePool","undefined","tickLower","tickUpper","liquidity","Position","toString","loading","PoolState","LOADING","checking","NOT_CHECK","usePositionFees","canisterId","positionId","refresh","usePositionFee","useMemo","amount0","tokensOwed0","amount1","tokensOwed1","TokenAmount","amount","useCollectFeeCalls","principal","useAccountPrincipal","openErrorTip","useErrorTip","withdraw","useSwapWithdraw","currencyFeeAmount0","currencyFeeAmount1","openExternalTip","stepKey","async","_getLocaleMessage","status","message","identity","getActorIdentity","collect","collectPositionFee","getLocaleMessage","BigNumber","quotient","minus","transFee","isGreaterThan","tipKey","useCollectFeeSteps","stepContentManage","useStepContentManager","handleReclaim","useReclaimCallback","_ref4","retry","content","_principal$toString","principalString","shorten","withdrawAmountA","toSignificant","groupSeparator","_withdrawAmountA","withdrawAmountB","_withdrawAmountB","tokenA","wrapped","tokenB","withdrawAmountALessThanZero","formatTokenAmount","decimals","isLessThan","withdrawAmountBLessThanZero","title","step","label","errorActions","TextButton","values","0","errorMessage","skipError","getCollectFeeSteps","String","feeBox","palette","level3","CollectFees","open","onClose","onClaimedSuccessfully","openSuccessTip","useSuccessTip","openLoadingTip","closeLoadingTip","useLoadingTip","setLoading","useState","getClaimFeeCall","getCalls","formatCall","useStepCalls","initialSteps","_ref5","newStepKey","calls","call","reset","useCollectFeeCallback","SwapModal","_Fragment","mr","TokenImage","tokenId","toFormat","toExact","toFixed","fullWidth","BigInt","ReclaimTips","loadingTipKey","extraContent","StepViewButton","disabled","startIcon","CircularProgress","createContext","positionContainer","backgroundColor","gray200","breakpoints","down","detailContainer","PositionDetailItem","convert","onConvertClick","useTheme","matchDownSM","useMediaQuery","flex","isElement","SyncAltIcon","PositionDetails","manuallyInverted","setManuallyInverted","show","token0USDPrice","token1USDPrice","onPrincipalChange","_tickAtLimit","useIsTickAtLimit","pricesFromPosition","getPriceOrderingFromPositionForUI","priceLower","priceUpper","base","useInverter","quote","invert","inverted","equals","tickAtLimit","Bound","LOWER","UPPER","currencyQuote","currencyBase","pairName","feeAmount0","feeAmount1","CurrencyAmount","fromRawAmount","numberToString","gap","toSignificantWithGroupSeparator","CurrencyAmountFormatDecimals","priceOf","formatTickPrice","multipliedBy","plus","FilledTextField","multiline","placeholder","onChange","TransferPosition","showButtons","invalid","onTransferSuccess","userPrincipal","setPrincipal","matchDownMD","tickCurrent","useUSDPriceById","totalUSDValue","error","isValidPrincipal","Loading","circularSize","isDarkTheme","mx","Chip","DEFAULT_PERCENT_SYMBOL","PositionStatus","loadingKey","resultFormat","swapPool","transferPosition","Principal","fromText","ResultStatus","OK","moreRef","useRef","collectFeesShow","setCollectFeesShow","reloadPositionFee","setReloadPositionFee","transferPopperShow","setTransferPopperShow","transferShow","setTransferShow","updateCounter","useContext","PositionContext","noLiquidity","handleLoadRemoveLiquidity","handleLoadIncreaseLiquidity","handleCollectFee","hasUnclaimedFees","gridTemplateColumns","isMobile","ref","onMouseEnter","onMouseLeave","Popper","anchorEl","current","placement","popperOptions","modifiers","name","options","offset","ClickAwayListener","onClickAway","level1","CollectFeesModal","handleClaimedSuccessfully","handleTransferSuccess","PositionItem","detailShow","setDetailShow","handleToggleShow","setAllPositionsUSDValue","positionKey","useEffect","ml","KeyboardArrowUp","KeyboardArrowDown","hasLiquidity","_position$liquidity","positionDetail","PositionItemComponent","index","Positions","useAccountPrincipalString","findPositionsOpen","setFindPositionsOpen","allPositionsUSDKeyValue","counter","setCounter","positions","setPositions","userPositionPools","useStoreUserPositionPools","length","userPositionsResult","Promise","all","map","getUserPositionIds","filter","ele","reduce","prev","curr","getSwapPosition","useUserAllPositions","initialUserPositionPoolsLoading","useInitialUserPositionPools","hasLiquidityPositions","allPositionsUSDValue","Object","Provider","handleAllPositionsUSDValue","usdValue","prevState","mb","LoadingRow","NoData","FindPositionsModal","rejected","generator","throw","e","reject","done","resolve","then","fulfilled","apply","thisArg","_arguments","next","useAllPoolsTVL","useCallsData","__awaiter","globalIndex","getAllPoolTvl","data","getAllPoolsTVL","bgOpacity","gridGap","listWrapper","left","bottom","zIndex","PoolList","pools","useInfoAllPools","allPoolsTVL","tvlLoading","poolList","sort","a","b","feeTier","slice","find","poolTVL","token0Id","token1Id","Liquidity","isInitialed","updatePoolStandardInitialed","usePoolStandardManager","useSwapPools","updateTokenStandard","useUpdateTokenStandard","trigger","updatedNum","i","standard","to","createSvgIcon","token0PriceUpper","lessThan","token0PriceLower"],"sourceRoot":""}