"use strict";(self.webpackChunkwaste2earn_home=self.webpackChunkwaste2earn_home||[]).push([[2099],{42099:(e,a,n)=>{n.r(a),n.d(a,{TokenStandards:()=>P,default:()=>b});var t=n(54711),r=n(72296),d=n(33441),i=n(77500),l=n(1054),s=n(11871),o=n(16443),u=n(55484),c=n(62474),T=n(27442),m=n(27895),h=n(61361),k=n(16910),w=n(12288),g=n(65490),I=n(86837),p=n(210),v=n(86100),x=n(66657),S=n(67856),R=n(72177),D=n(94570),j=n.n(D),_=n(34947),A=n(37012);const P=[{label:"EXT",value:g.i.EXT},{label:"DIP20",value:g.i.DIP20},{label:"DIP20-WICP",value:g.i.DIP20_WICP},{label:"DIP20-XTC",value:g.i.DIP20_XTC},{label:"ICRC-1",value:g.i.ICRC1},{label:"ICRC-2",value:g.i.ICRC2},{label:"ICP",value:g.i.ICP}];function b(){var e;const a=(0,o.Le)(),n=(0,_.DA)(),[g,D]=(0,r.useState)({BONUS_MULTIPLIER:1}),[b]=(0,u.cO)(),[C,L]=(0,r.useState)(!1),[y,U]=(0,r.useState)(void 0),f=(e,a)=>{D({...g,[a]:e})};(0,r.useEffect)((()=>{(async()=>{if(g.rewardToken&&g.rewardStandard){const{valid:e}=await(0,I.E)(g.rewardToken,g.rewardStandard);if(!e)return b("reward token standard is incorrect",u.lA.error),void L(!1);n({canisterId:g.rewardToken,standard:g.rewardStandard});const a=await(0,p.Qr)(g.rewardToken);U(a)}})()}),[g.rewardToken,g.rewardStandard]);let B="";return g.name||(B=t.Ru._({id:"LnUcnD"})),g.rewardStandard||(B=t.Ru._({id:"RiKKkn"})),g.rewardToken||(B=t.Ru._({id:"z5ccVY"})),g.startDateTime||(B=t.Ru._({id:"q3EMSU"})),g.endDateTime||(B=t.Ru._({id:"NaPp+L"})),g.outputPerSecond||(B=t.Ru._({id:"umgYDO"})),g.stakingToken||(B=t.Ru._({id:"hGjyZZ"})),g.stakingStandard||(B=t.Ru._({id:"kX88Sq"})),g.BONUS_MULTIPLIER||(B=t.Ru._({id:"rokSfk"})),(0,A.jsx)(s.mO,{children:(0,A.jsx)(s.Am,{children:(0,A.jsx)(d.Ay,{container:!0,justifyContent:"center",children:(0,A.jsxs)(i.A,{sx:{maxWidth:"474px",width:"100%",display:"grid",gap:"20px 0"},children:[(0,A.jsx)(i.A,{children:(0,A.jsx)(s.GV,{label:t.Ru._({id:"L5Teh3"}),placeholder:t.Ru._({id:"DAQh/r"}),onChange:e=>f(e,"name"),value:g.name})}),(0,A.jsx)(i.A,{children:(0,A.jsx)(s.GV,{label:t.Ru._({id:"11n7rr"}),placeholder:t.Ru._({id:"AIjezT"}),onChange:e=>f(e,"rewardToken"),value:g.rewardToken})}),(0,A.jsx)(i.A,{children:(0,A.jsx)(s.GV,{select:!0,label:t.Ru._({id:"d4llCD"}),menus:P,placeholder:t.Ru._({id:"/rhw90"}),onChange:e=>f(e,"rewardStandard"),value:g.rewardStandard})}),(0,A.jsx)(i.A,{children:(0,A.jsx)(s.GV,{label:t.Ru._({id:"1hJLFW"}),placeholder:t.Ru._({id:"ykT1Lx"}),onChange:e=>f(e,"stakingToken"),value:g.stakingToken})}),(0,A.jsx)(i.A,{children:(0,A.jsx)(s.GV,{label:t.Ru._({id:"bYilVi"}),select:!0,menus:P,placeholder:t.Ru._({id:"Z6VR+u"}),onChange:e=>f(e,"stakingStandard"),value:g.stakingStandard})}),(0,A.jsxs)(i.A,{children:[(0,A.jsx)(l.A,{color:"text.primary",children:"Start/End Time"}),(0,A.jsx)(i.A,{mt:"12px",children:(0,A.jsxs)(d.Ay,{container:!0,justifyContent:"space-between",children:[(0,A.jsx)(d.Ay,{item:!0,sx:{width:"48%"},children:(0,A.jsx)(S.$,{dateAdapter:x.R,children:(0,A.jsx)(R.K,{renderInput:e=>{var a;return(0,A.jsx)(s.GV,{fullWidth:!0,...e,InputProps:{...null!==(a=null===e||void 0===e?void 0:e.InputProps)&&void 0!==a?a:{},disableUnderline:!0},helperText:""})},value:g.startDateTime?j()(g.startDateTime):null,onChange:e=>{f((0,v.Lw)(new Date(e.toDate()).getTime()).getTime(),"startDateTime")},minDateTime:j()(new Date),maxDateTime:g.endDateTime?j()(new Date(g.endDateTime)):void 0})})}),(0,A.jsx)(d.Ay,{item:!0,sx:{width:"48%"},children:(0,A.jsx)(S.$,{dateAdapter:x.R,children:(0,A.jsx)(R.K,{renderInput:e=>{var a;return(0,A.jsx)(s.GV,{fullWidth:!0,...e,InputProps:{...null!==(a=null===e||void 0===e?void 0:e.InputProps)&&void 0!==a?a:{},disableUnderline:!0},helperText:""})},value:g.endDateTime?j()(g.endDateTime):null,onChange:e=>{f((0,v.Lw)(new Date(e.toDate()).getTime()).getTime(),"endDateTime")},minDateTime:g.startDateTime?j()(g.startDateTime):j()(new Date)})})})]})})]}),(0,A.jsx)(i.A,{children:(0,A.jsx)(s.GV,{label:t.Ru._({id:"LGtw/D"}),placeholder:t.Ru._({id:"1ROHwz"}),onChange:e=>f(e,"outputPerSecond"),value:g.outputPerSecond,InputProps:{disableUnderline:!0,inputComponent:s.et,inputProps:{thousandSeparator:!0,decimalScale:null!==(e=null===y||void 0===y?void 0:y.decimals)&&void 0!==e?e:8,allowNegative:!1,maxLength:100,value:g.outputPerSecond}}})}),(0,A.jsx)(i.A,{children:(0,A.jsx)(s.GV,{label:t.Ru._({id:"cb1Nej"}),placeholder:t.Ru._({id:"A9lTDJ"}),onChange:e=>f(e,"BONUS_MULTIPLIER"),value:g.BONUS_MULTIPLIER})}),(0,A.jsx)(i.A,{mt:4,children:(0,A.jsx)(c.A,{onSubmit:async e=>{await(async e=>{if(!e||C||!a)return;L(!0);const{valid:t}=await(0,I.E)(g.rewardToken,g.rewardStandard);if(!t)return b("reward token standard is incorrect",u.lA.error),void L(!1);n({canisterId:g.rewardToken,standard:g.rewardStandard});const r=await(0,p.Qr)(g.rewardToken);if(!r)return b("can't got reward token info, please try again",u.lA.error),void L(!1);const{valid:d}=await(0,I.E)(g.stakingToken,g.stakingStandard);if(!d)return b("staking token standard is incorrect",u.lA.error),void L(!1);n({canisterId:g.stakingToken,standard:g.stakingStandard});const i=await(0,p.Qr)(g.stakingToken);if(!i)return b("can't got staking token info, please try again",u.lA.error),void L(!1);const l=new m.A(g.outputPerSecond).multipliedBy(10**r.decimals).dividedBy(g.BONUS_MULTIPLIER);if(l.isLessThan(1)||l.toString().includes("."))return b("Wrong amount per second",u.lA.error),void L(!1);const{status:s,message:o}=await(0,k.dw)({name:g.name,stakingTokenSymbol:i.symbol,stakingToken:{address:i.canisterId,standard:g.stakingStandard},stakingTokenFee:i.transFee,stakingTokenDecimals:BigInt(i.decimals),rewardTokenSymbol:r.symbol,rewardToken:{address:r.canisterId,standard:g.rewardStandard},rewardTokenFee:r.transFee,rewardTokenDecimals:BigInt(r.decimals),startTime:BigInt(g.startDateTime)/BigInt(1e3),rewardPerTime:BigInt((0,T.u)(new m.A(g.outputPerSecond).multipliedBy(10**r.decimals).dividedBy(g.BONUS_MULTIPLIER))),bonusEndTime:BigInt(g.endDateTime)/BigInt(1e3),BONUS_MULTIPLIER:BigInt(g.BONUS_MULTIPLIER)},e);s===w.i.OK?(b("create success pool:".concat(o),u.lA.success),D({BONUS_MULTIPLIER:1e3})):b(null!==o&&void 0!==o?o:"Failed to create token pool",u.lA.error),L(!1)})(e)},children:e=>{let{submit:a}=e;return(0,A.jsx)(h.A,{variant:"contained",fullWidth:!0,size:"large",onClick:a,disabled:Boolean(B)||C,loading:C,children:B||t.Ru._({id:"gHT3lX"})})}})})]})})})})}}}]);
//# sourceMappingURL=2099.ff6d8b74.chunk.js.map